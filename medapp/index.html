<!DOCTYPE html><html lang="fr"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#2563EB">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="MedApp Pro">
    <meta name="description" content="Application m√©dicale de calculateurs et guidelines pour la g√©riatrie">
    <meta name="mobile-web-app-capable" content="yes">
    <title>MedApp Pro - G√©riatrie UGA</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>‚öïÔ∏è</text></svg>">
    <link rel="apple-touch-icon" href="../icon-192x192.png">
    <link rel="manifest" href="../manifest.json">
    <style>
@import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&family=Space+Mono:wght@400;700&display=swap');

:root {
    --primary: #2563EB;
    --primary-light: #3B82F6;
    --primary-lighter: #93C5FD;
    --primary-dark: #1D4ED8;
    --primary-glow: rgba(37, 99, 235, 0.25);
    --accent: #0D9488;
    --accent-light: #14B8A6;
    --success: #10B981;
    --success-bg: rgba(16, 185, 129, 0.12);
    --warning: #F59E0B;
    --warning-bg: rgba(245, 158, 11, 0.12);
    --danger: #EF4444;
    --danger-bg: rgba(239, 68, 68, 0.12);
    --bg-primary: #F8FAFC;
    --bg-secondary: #FFFFFF;
    --bg-tertiary: #F1F5F9;
    --bg-hover: rgba(0,0,0,0.04);
    --bg-glass: rgba(255,255,255,0.85);
    --bg-glass-strong: rgba(255,255,255,0.95);
    --text-primary: #0F172A;
    --text-secondary: #475569;
    --text-muted: #94A3B8;
    --border: rgba(0,0,0,0.08);
    --border-light: rgba(0,0,0,0.05);
    --shadow-sm: 0 1px 3px rgba(0,0,0,0.04), 0 1px 2px rgba(0,0,0,0.06);
    --shadow-md: 0 4px 12px rgba(0,0,0,0.06), 0 2px 4px rgba(0,0,0,0.04);
    --shadow-lg: 0 12px 40px rgba(0,0,0,0.08), 0 4px 12px rgba(0,0,0,0.04);
    --shadow-xl: 0 20px 60px rgba(0,0,0,0.1), 0 8px 20px rgba(0,0,0,0.06);
    --shadow-glow: 0 0 40px var(--primary-glow);
    --radius-sm: 10px;
    --radius-md: 14px;
    --radius-lg: 18px;
    --radius-xl: 24px;
}

/* DARK THEME */
[data-theme="dark"] {
    --bg-primary: #0F172A;
    --bg-secondary: #1E293B;
    --bg-tertiary: #334155;
    --bg-hover: rgba(255,255,255,0.06);
    --bg-glass: rgba(30,41,59,0.9);
    --bg-glass-strong: rgba(30,41,59,0.98);
    --text-primary: #F8FAFC;
    --text-secondary: #CBD5E1;
    --text-muted: #64748B;
    --border: rgba(255,255,255,0.1);
    --border-light: rgba(255,255,255,0.06);
    --shadow-sm: 0 1px 3px rgba(0,0,0,0.3);
    --shadow-md: 0 4px 12px rgba(0,0,0,0.4);
    --shadow-lg: 0 12px 40px rgba(0,0,0,0.5);
    --shadow-xl: 0 20px 60px rgba(0,0,0,0.6);
    --primary-glow: rgba(59, 130, 246, 0.3);
}

[data-theme="dark"] .form-input,
[data-theme="dark"] .form-select {
    background: var(--bg-tertiary);
    color: var(--text-primary);
}

[data-theme="dark"] .calc-page,
[data-theme="dark"] .guide-page {
    background: var(--bg-primary);
}

/* Theme toggle button */
.theme-toggle {
    width: 40px;
    height: 40px;
    border: none;
    background: var(--bg-secondary);
    border-radius: var(--radius-md);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
    transition: all 0.2s ease;
    border: 1px solid var(--border-light);
}

.theme-toggle:hover {
    background: var(--bg-hover);
}

* { margin: 0; padding: 0; box-sizing: border-box; }
html, body { 
    height: 100%; 
    font-family: 'Plus Jakarta Sans', -apple-system, BlinkMacSystemFont, sans-serif;
    background: var(--bg-primary);
    color: var(--text-primary);
    -webkit-font-smoothing: antialiased;
    transition: background-color 0.3s ease, color 0.3s ease;
    overflow-x: hidden;
}

/* APP CONTAINER */
.app-container {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    position: relative;
}

/* HEADER */
header {
    position: sticky;
    top: 0;
    z-index: 100;
    background: var(--bg-glass-strong);
    backdrop-filter: blur(24px);
    -webkit-backdrop-filter: blur(24px);
    border-bottom: 1px solid var(--border-light);
    padding: 12px 20px 16px;
}

.header-top {
    display: flex;
    align-items: center;
    gap: 14px;
    margin-bottom: 14px;
}

.back-btn {
    width: 40px;
    height: 40px;
    background: var(--bg-secondary);
    border: 1px solid var(--border-light);
    border-radius: var(--radius-md);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s ease;
    text-decoration: none;
    color: var(--text-secondary);
    flex-shrink: 0;
}

.back-btn:hover {
    background: var(--bg-tertiary);
    color: var(--primary);
    transform: translateX(-2px);
}

.back-btn svg {
    width: 20px;
    height: 20px;
}

.logo {
    width: 44px;
    height: 44px;
    background: linear-gradient(145deg, var(--primary), var(--primary-dark));
    border-radius: var(--radius-md);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 22px;
    box-shadow: var(--shadow-md), var(--shadow-glow);
}

.app-info h1 {
    font-size: 18px;
    font-weight: 800;
    letter-spacing: -0.3px;
    background: linear-gradient(135deg, var(--primary), var(--accent));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.app-info p {
    font-size: 11px;
    color: var(--text-muted);
    font-weight: 500;
    letter-spacing: 0.3px;
    text-transform: uppercase;
}

/* MAIN TABS (Calculs / Guidelines) */
.main-tabs {
    display: flex;
    background: var(--bg-tertiary);
    border-radius: var(--radius-md);
    padding: 4px;
    margin-bottom: 14px;
}

.main-tab {
    flex: 1;
    padding: 10px 16px;
    border: none;
    background: transparent;
    font-family: inherit;
    font-size: 14px;
    font-weight: 600;
    color: var(--text-secondary);
    border-radius: var(--radius-sm);
    cursor: pointer;
    transition: all 0.2s ease;
}

.main-tab.active {
    background: linear-gradient(135deg, var(--primary), var(--primary-dark));
    color: white;
    box-shadow: var(--shadow-md);
}

/* SEARCH */
.search-container {
    position: relative;
}

.search-container.hidden {
    display: none;
}

.search-bar {
    width: 100%;
    padding: 14px 20px 14px 48px;
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    font-size: 15px;
    font-family: inherit;
    background: var(--bg-secondary);
    color: var(--text-primary);
    transition: all 0.2s ease;
    box-shadow: var(--shadow-sm);
}

.search-bar:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: var(--shadow-md), 0 0 0 4px var(--primary-glow);
}

.search-icon {
    position: absolute;
    left: 16px;
    top: 50%;
    transform: translateY(-50%);
    width: 20px;
    height: 20px;
    color: var(--text-muted);
}

.search-results {
    display: none;
    position: absolute;
    top: calc(100% + 8px);
    left: 0;
    right: 0;
    background: var(--bg-secondary);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-xl);
    border: 1px solid var(--border);
    max-height: 320px;
    overflow-y: auto;
    z-index: 200;
}

.search-results.show { display: block; }

.search-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 14px 18px;
    cursor: pointer;
    border-bottom: 1px solid var(--border-light);
    transition: background 0.15s ease;
}

.search-item:hover { background: var(--bg-hover); }
.search-item:last-child { border-bottom: none; }
.search-icon-item { font-size: 20px; }
.search-name { font-weight: 500; color: var(--text-primary); }
.search-empty { padding: 24px; text-align: center; color: var(--text-muted); }

/* SECTIONS - IMPORTANT: visibilit√© des sections */
.section-calculs {
    display: block;
    flex: 1;
}

.section-calculs.hidden {
    display: none;
}

.section-guidelines {
    display: none;
    padding: 20px;
    padding-bottom: 100px;
}

.section-guidelines.active {
    display: block;
}

/* CATEGORY TABS */
.tabs-wrapper {
    background: var(--bg-glass);
    backdrop-filter: blur(16px);
    border-bottom: 1px solid var(--border-light);
    position: sticky;
    top: 130px;
    z-index: 50;
}

.tabs {
    display: flex;
    gap: 8px;
    padding: 12px 20px;
    overflow-x: auto;
    scrollbar-width: none;
    -ms-overflow-style: none;
}

.tabs::-webkit-scrollbar { display: none; }

.tab {
    flex-shrink: 0;
    padding: 10px 18px;
    border: none;
    background: var(--bg-secondary);
    font-family: inherit;
    font-size: 13px;
    font-weight: 600;
    color: var(--text-secondary);
    border-radius: var(--radius-md);
    cursor: pointer;
    transition: all 0.2s ease;
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--border-light);
    display: flex;
    align-items: center;
    gap: 6px;
}

.tab:hover { background: var(--bg-hover); border-color: var(--border); }

.tab.active {
    background: linear-gradient(135deg, var(--primary), var(--primary-dark));
    color: white;
    border-color: transparent;
    box-shadow: var(--shadow-md);
}

.tab-icon { font-size: 14px; }

/* CONTENT */
.content {
    padding: 20px;
    padding-bottom: 120px;
}

.page { display: none; }
.page.active { display: block; }

.section-header {
    margin-bottom: 16px;
}

.section-title {
    font-size: 16px;
    font-weight: 700;
    color: var(--text-primary);
}

/* FAV GRID */
.fav-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 12px;
    margin-bottom: 28px;
}

.fav-card {
    background: var(--bg-secondary);
    border-radius: var(--radius-lg);
    padding: 18px 14px;
    text-align: center;
    cursor: pointer;
    transition: all 0.2s ease;
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--border-light);
}

.fav-card:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg);
    border-color: var(--primary-lighter);
}

.fav-icon {
    font-size: 28px;
    margin-bottom: 10px;
}

.fav-name {
    font-size: 12px;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 4px;
    line-height: 1.3;
}

.fav-cat {
    font-size: 10px;
    color: var(--text-muted);
    font-weight: 500;
}

/* CALC LIST */
.calc-list {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.calc-cat-title {
    font-size: 13px;
    font-weight: 700;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin: 20px 0 12px;
    padding-left: 4px;
}

.calc-cat-title:first-child { margin-top: 0; }

.calc-item {
    display: flex;
    align-items: center;
    gap: 14px;
    background: var(--bg-secondary);
    padding: 16px 18px;
    border-radius: var(--radius-lg);
    cursor: pointer;
    transition: all 0.2s ease;
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--border-light);
}

.calc-item:hover {
    transform: translateX(4px);
    box-shadow: var(--shadow-md);
    border-color: var(--primary-lighter);
}

.calc-icon {
    width: 46px;
    height: 46px;
    background: linear-gradient(145deg, var(--bg-tertiary), var(--bg-secondary));
    border-radius: var(--radius-md);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 22px;
    box-shadow: var(--shadow-sm);
}

.calc-info { flex: 1; }

.calc-name {
    font-size: 15px;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 3px;
}

.calc-desc {
    font-size: 12px;
    color: var(--text-muted);
}

.calc-arrow {
    font-size: 20px;
    color: var(--text-muted);
    font-weight: 300;
}

/* HISTORY ITEM */
.history-item {
    display: flex;
    align-items: center;
    gap: 14px;
    background: var(--bg-secondary);
    padding: 14px 16px;
    border-radius: var(--radius-lg);
    margin-bottom: 10px;
    cursor: pointer;
    transition: all 0.2s ease;
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--border-light);
}

.history-item:hover {
    box-shadow: var(--shadow-md);
}

.history-icon {
    font-size: 22px;
}

.history-info { flex: 1; }

.history-name {
    font-size: 14px;
    font-weight: 600;
    color: var(--text-primary);
}

.history-date {
    font-size: 11px;
    color: var(--text-muted);
}

.history-result {
    font-family: 'Space Mono', monospace;
    font-size: 15px;
    font-weight: 700;
    color: var(--primary);
}

/* EMPTY STATE */
.empty-state {
    text-align: center;
    padding: 48px 24px;
    color: var(--text-muted);
}

.empty-icon {
    font-size: 48px;
    margin-bottom: 16px;
    opacity: 0.5;
}

.empty-text {
    font-size: 15px;
    font-weight: 500;
}

/* BOTTOM NAV */
.bottom-nav {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background: var(--bg-glass-strong);
    backdrop-filter: blur(24px);
    -webkit-backdrop-filter: blur(24px);
    border-top: 1px solid var(--border-light);
    padding: 10px 20px 28px;
    display: flex;
    justify-content: space-around;
    z-index: 100;
}

.nav-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
    padding: 8px 20px;
    border: none;
    background: transparent;
    font-family: inherit;
    cursor: pointer;
    transition: all 0.2s ease;
    border-radius: var(--radius-md);
}

.nav-icon {
    font-size: 22px;
    opacity: 0.5;
    transition: all 0.2s ease;
}

.nav-label {
    font-size: 11px;
    font-weight: 600;
    color: var(--text-muted);
    transition: all 0.2s ease;
}

.nav-item.active .nav-icon { opacity: 1; }
.nav-item.active .nav-label { color: var(--primary); font-weight: 700; }

/* ==================== CALC PAGE ==================== */
.calc-page {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: var(--bg-primary);
    z-index: 1000;
    transform: translateX(100%);
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    overflow-y: auto;
}

.calc-page.active { transform: translateX(0); }

.calc-header {
    position: sticky;
    top: 0;
    background: var(--bg-glass-strong);
    backdrop-filter: blur(24px);
    padding: 16px 20px;
    display: flex;
    align-items: center;
    gap: 14px;
    border-bottom: 1px solid var(--border-light);
    z-index: 10;
}

.btn-back {
    width: 40px;
    height: 40px;
    border: none;
    background: var(--bg-secondary);
    border-radius: var(--radius-md);
    font-size: 20px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
    box-shadow: var(--shadow-sm);
}

.btn-back:hover { background: var(--bg-hover); }

.calc-header-info { flex: 1; }
.calc-header-title { font-size: 18px; font-weight: 700; color: var(--text-primary); }
.calc-header-sub { font-size: 12px; color: var(--text-muted); margin-top: 2px; }

.btn-fav {
    width: 40px;
    height: 40px;
    border: none;
    background: var(--bg-secondary);
    border-radius: var(--radius-md);
    font-size: 18px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
    box-shadow: var(--shadow-sm);
    opacity: 0.4;
}

.btn-fav.active { opacity: 1; background: var(--warning-bg); }

.calc-body { padding: 20px; padding-bottom: 40px; }

.form-card {
    background: var(--bg-secondary);
    border-radius: var(--radius-xl);
    padding: 20px;
    margin-bottom: 16px;
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--border-light);
}

.form-title {
    font-size: 14px;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 16px;
    display: flex;
    align-items: center;
    gap: 8px;
}

.form-group { margin-bottom: 16px; }
.form-group:last-child { margin-bottom: 0; }

.form-label {
    display: block;
    font-size: 13px;
    font-weight: 600;
    color: var(--text-secondary);
    margin-bottom: 8px;
}

.form-label span { font-weight: 400; color: var(--text-muted); }

.form-input {
    width: 100%;
    padding: 14px 16px;
    border: 1px solid var(--border);
    border-radius: var(--radius-md);
    font-size: 16px;
    font-family: inherit;
    background: var(--bg-primary);
    color: var(--text-primary);
    transition: all 0.2s ease;
}

.form-input:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 4px var(--primary-glow);
}

.input-unit {
    position: relative;
}

.input-unit .form-input { padding-right: 70px; }

.input-unit::after {
    content: attr(data-unit);
    position: absolute;
    right: 16px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 13px;
    font-weight: 600;
    color: var(--text-muted);
}

/* RADIO */
.radio-group {
    display: flex;
    gap: 10px;
}

.radio-opt {
    flex: 1;
    padding: 14px 16px;
    border: 2px solid var(--border);
    border-radius: var(--radius-md);
    cursor: pointer;
    transition: all 0.2s ease;
    text-align: center;
    background: var(--bg-primary);
}

.radio-opt input { display: none; }

.radio-opt.selected {
    border-color: var(--primary);
    background: rgba(37, 99, 235, 0.08);
}

.radio-label {
    font-size: 14px;
    font-weight: 600;
    color: var(--text-primary);
}

/* SCORE OPTIONS */
.score-opts {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.score-opt {
    display: flex;
    align-items: center;
    gap: 14px;
    padding: 14px 16px;
    border: 2px solid var(--border);
    border-radius: var(--radius-md);
    cursor: pointer;
    transition: all 0.2s ease;
    background: var(--bg-primary);
}

.score-opt:hover { border-color: var(--border); background: var(--bg-hover); }

.score-opt.selected {
    border-color: var(--primary);
    background: rgba(37, 99, 235, 0.08);
}

.score-num {
    width: 32px;
    height: 32px;
    background: var(--bg-tertiary);
    border-radius: var(--radius-sm);
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: 'Space Mono', monospace;
    font-weight: 700;
    font-size: 14px;
    color: var(--text-secondary);
}

.score-opt.selected .score-num {
    background: var(--primary);
    color: white;
}

.score-text {
    font-size: 14px;
    color: var(--text-primary);
}

/* CHECK LIST */
.check-list {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.check-opt {
    display: flex;
    align-items: center;
    gap: 14px;
    padding: 14px 16px;
    border: 2px solid var(--border);
    border-radius: var(--radius-md);
    cursor: pointer;
    transition: all 0.2s ease;
    background: var(--bg-primary);
}

.check-opt:hover { background: var(--bg-hover); }

.check-opt.selected {
    border-color: var(--success);
    background: var(--success-bg);
}

.check-box {
    width: 26px;
    height: 26px;
    border: 2px solid var(--border);
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
    color: transparent;
    transition: all 0.2s ease;
    flex-shrink: 0;
}

.check-opt.selected .check-box {
    background: var(--success);
    border-color: var(--success);
    color: white;
}

.check-text { flex: 1; }

.check-title {
    font-size: 14px;
    color: var(--text-primary);
    line-height: 1.4;
}

.check-pts {
    font-size: 12px;
    color: var(--text-muted);
    margin-top: 2px;
}

/* RESULT CARD */
.result-card {
    background: linear-gradient(145deg, var(--bg-secondary), var(--bg-tertiary));
    border-radius: var(--radius-xl);
    padding: 28px 24px;
    text-align: center;
    box-shadow: var(--shadow-md);
    border: 1px solid var(--border-light);
    margin-top: 20px;
}

.result-label {
    font-size: 13px;
    font-weight: 600;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 8px;
}

.result-value {
    font-family: 'Space Mono', monospace;
    font-size: 52px;
    font-weight: 700;
    color: var(--text-primary);
    line-height: 1;
    margin-bottom: 4px;
}

.result-unit {
    font-size: 16px;
    color: var(--text-muted);
    font-weight: 500;
}

.result-interp {
    display: none;
    margin-top: 16px;
    padding: 14px 18px;
    border-radius: var(--radius-md);
    font-size: 14px;
    font-weight: 600;
}

.result-interp.show { display: block; }
.result-interp.normal { background: var(--success-bg); color: var(--success); }
.result-interp.warning { background: var(--warning-bg); color: var(--warning); }
.result-interp.danger { background: var(--danger-bg); color: var(--danger); }

/* REF SECTION */
.ref-section { margin-top: 20px; }

.ref-toggle {
    width: 100%;
    padding: 14px 18px;
    border: 1px solid var(--border);
    background: var(--bg-secondary);
    border-radius: var(--radius-md);
    font-family: inherit;
    font-size: 13px;
    font-weight: 600;
    color: var(--text-secondary);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: space-between;
    transition: all 0.2s ease;
}

.ref-toggle:hover { background: var(--bg-hover); }
.ref-toggle::after { content: '‚ñº'; font-size: 10px; transition: transform 0.2s; }
.ref-toggle.open::after { transform: rotate(180deg); }

.ref-content {
    display: none;
    padding: 16px;
    background: var(--bg-tertiary);
    border-radius: 0 0 var(--radius-md) var(--radius-md);
    font-size: 12px;
    color: var(--text-secondary);
    line-height: 1.6;
    border: 1px solid var(--border);
    border-top: none;
}

.ref-content.open { display: block; }

/* ==================== GUIDELINES STYLES ==================== */
.guide-intro {
    background: linear-gradient(135deg, rgba(37, 99, 235, 0.08), rgba(13, 148, 136, 0.08));
    border-left: 4px solid var(--primary);
    padding: 18px 20px;
    border-radius: 0 var(--radius-md) var(--radius-md) 0;
    margin-bottom: 20px;
    font-size: 14px;
    line-height: 1.6;
    color: var(--text-secondary);
}

.guide-cat {
    background: var(--bg-secondary);
    border-radius: var(--radius-xl);
    margin-bottom: 14px;
    overflow: hidden;
    border: 1px solid var(--border-light);
    box-shadow: var(--shadow-sm);
}

.guide-cat-header {
    display: flex;
    align-items: center;
    gap: 14px;
    padding: 18px 20px;
    cursor: pointer;
    transition: background 0.2s ease;
}

.guide-cat-header:hover { background: var(--bg-hover); }

.guide-cat-icon {
    width: 50px;
    height: 50px;
    border-radius: var(--radius-md);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    background: linear-gradient(145deg, var(--bg-tertiary), var(--bg-secondary));
    box-shadow: var(--shadow-sm);
}

.guide-cat-info { flex: 1; }
.guide-cat-title { font-weight: 700; color: var(--text-primary); font-size: 16px; }
.guide-cat-count { font-size: 12px; color: var(--text-muted); margin-top: 3px; }
.guide-cat-arrow { font-size: 12px; color: var(--text-muted); transition: transform 0.2s; }
.guide-cat.open .guide-cat-arrow { transform: rotate(180deg); }

.guide-cat-items {
    display: none;
    border-top: 1px solid var(--border-light);
}

.guide-cat.open .guide-cat-items { display: block; }

.guide-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 16px 20px 16px 84px;
    cursor: pointer;
    transition: all 0.2s ease;
    border-bottom: 1px solid var(--border-light);
}

.guide-item:last-child { border-bottom: none; }
.guide-item:hover { background: var(--bg-hover); padding-left: 88px; }

.guide-item-dot {
    width: 8px;
    height: 8px;
    background: var(--primary);
    border-radius: 50%;
    flex-shrink: 0;
}

.guide-item-title {
    flex: 1;
    font-size: 14px;
    font-weight: 500;
    color: var(--text-primary);
}

.guide-item-arrow {
    font-size: 18px;
    color: var(--text-muted);
}

/* GUIDE PAGE (fullscreen) */
.guide-page {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: var(--bg-primary);
    z-index: 1000;
    transform: translateX(100%);
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    overflow-y: auto;
}

.guide-page.active { transform: translateX(0); }

.guide-hdr {
    position: sticky;
    top: 0;
    background: var(--bg-glass-strong);
    backdrop-filter: blur(24px);
    padding: 16px 20px;
    display: flex;
    align-items: center;
    gap: 14px;
    border-bottom: 1px solid var(--border-light);
    z-index: 10;
}

.guide-hdr-info { flex: 1; }
.guide-hdr-title { font-weight: 700; font-size: 18px; color: var(--text-primary); }
.guide-hdr-sub { font-size: 12px; color: var(--text-muted); margin-top: 2px; }

.guide-body {
    padding: 20px;
    padding-bottom: 40px;
}

/* GUIDE CARDS */
.g-card {
    background: var(--bg-secondary);
    border-radius: var(--radius-xl);
    margin-bottom: 16px;
    overflow: hidden;
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--border-light);
}

.g-card-hdr {
    background: linear-gradient(135deg, var(--bg-tertiary), var(--bg-secondary));
    padding: 16px 20px;
    font-weight: 700;
    font-size: 15px;
    color: var(--text-primary);
    border-bottom: 1px solid var(--border-light);
}

.g-card-body {
    padding: 18px 20px;
}

.g-card-body p {
    margin-bottom: 12px;
    line-height: 1.6;
    color: var(--text-secondary);
}

.g-card-body p:last-child { margin-bottom: 0; }

/* GUIDE ALERTS */
.g-alert {
    padding: 14px 18px;
    border-radius: var(--radius-md);
    margin-bottom: 16px;
    font-size: 14px;
    line-height: 1.5;
}

.g-alert.danger { background: var(--danger-bg); color: var(--danger); border-left: 4px solid var(--danger); }
.g-alert.warning { background: var(--warning-bg); color: var(--warning); border-left: 4px solid var(--warning); }
.g-alert.info { background: rgba(37, 99, 235, 0.1); color: var(--primary); border-left: 4px solid var(--primary); }
.g-alert.success { background: var(--success-bg); color: var(--success); border-left: 4px solid var(--success); }

/* GUIDE LISTS */
.g-list {
    list-style: none;
    padding: 0;
    margin: 0;
}

.g-list li {
    position: relative;
    padding: 8px 0 8px 24px;
    line-height: 1.5;
    color: var(--text-secondary);
}

.g-list li::before {
    content: '‚Ä¢';
    position: absolute;
    left: 8px;
    color: var(--primary);
    font-weight: bold;
}

/* GUIDE TABLES */
.g-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 13px;
    margin: 12px 0;
}

.g-table th, .g-table td {
    padding: 12px 14px;
    text-align: left;
    border-bottom: 1px solid var(--border-light);
}

.g-table th {
    background: var(--bg-tertiary);
    font-weight: 700;
    color: var(--text-primary);
}

.g-table td {
    color: var(--text-secondary);
}

.g-table tr:last-child td { border-bottom: none; }

/* HIGHLIGHT */
.g-hl {
    background: linear-gradient(135deg, rgba(37, 99, 235, 0.15), rgba(13, 148, 136, 0.15));
    padding: 2px 8px;
    border-radius: 4px;
    font-weight: 600;
    color: var(--primary-dark);
}


/* ==================== V7 ADDITIONS ==================== */

/* Header reorganized */
.header-main {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 14px;
}

.header-left {
    display: flex;
    align-items: center;
    gap: 14px;
}

.header-right {
    display: flex;
    align-items: center;
    gap: 12px;
}

/* Logo RHNe */
.logo-rhne {
    background: linear-gradient(135deg, #00508F, #0073CF);
    color: white;
    padding: 8px 12px;
    border-radius: var(--radius-md);
    font-weight: 800;
    font-size: 13px;
    letter-spacing: 0.5px;
    box-shadow: var(--shadow-sm);
}

/* User profile */
.user-profile {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 8px 14px;
    background: var(--bg-secondary);
    border-radius: var(--radius-lg);
    border: 1px solid var(--border-light);
    cursor: pointer;
    transition: all 0.2s ease;
}

.user-profile:hover {
    box-shadow: var(--shadow-md);
}

.user-avatar {
    width: 36px;
    height: 36px;
    background: linear-gradient(145deg, var(--primary), var(--accent));
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 16px;
    color: white;
    font-weight: 700;
}

.user-info {
    display: flex;
    flex-direction: column;
}

.user-name {
    font-size: 13px;
    font-weight: 700;
    color: var(--text-primary);
}

.user-role {
    font-size: 10px;
    color: var(--text-muted);
}

/* Language selector */
.lang-selector {
    position: relative;
}

.lang-btn {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 8px 12px;
    background: var(--bg-secondary);
    border: 1px solid var(--border-light);
    border-radius: var(--radius-md);
    font-family: inherit;
    font-size: 13px;
    font-weight: 600;
    color: var(--text-primary);
    cursor: pointer;
    transition: all 0.2s ease;
}

.lang-btn:hover {
    background: var(--bg-hover);
}

.lang-flag {
    font-size: 16px;
}

.lang-dropdown {
    display: none;
    position: absolute;
    top: calc(100% + 6px);
    right: 0;
    background: var(--bg-secondary);
    border-radius: var(--radius-md);
    box-shadow: var(--shadow-xl);
    border: 1px solid var(--border);
    overflow: hidden;
    z-index: 200;
    min-width: 140px;
}

.lang-dropdown.show {
    display: block;
}

.lang-option {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 12px 16px;
    cursor: pointer;
    transition: background 0.15s ease;
    font-size: 13px;
}

.lang-option:hover {
    background: var(--bg-hover);
}

.lang-option.active {
    background: rgba(37, 99, 235, 0.1);
    color: var(--primary);
    font-weight: 600;
}

/* Settings modal */
.modal-overlay {
    display: none;
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    z-index: 2000;
    align-items: center;
    justify-content: center;
    padding: 20px;
}

.modal-overlay.show {
    display: flex;
}

.modal-content {
    background: var(--bg-secondary);
    border-radius: var(--radius-xl);
    width: 100%;
    max-width: 400px;
    padding: 24px;
    box-shadow: var(--shadow-xl);
}

.modal-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 20px;
}

.modal-title {
    font-size: 18px;
    font-weight: 700;
    color: var(--text-primary);
}

.modal-close {
    width: 36px;
    height: 36px;
    border: none;
    background: var(--bg-tertiary);
    border-radius: var(--radius-md);
    font-size: 18px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
}

.modal-body .form-group {
    margin-bottom: 16px;
}

.modal-body .form-label {
    display: block;
    font-size: 13px;
    font-weight: 600;
    color: var(--text-secondary);
    margin-bottom: 8px;
}

.modal-body .form-input {
    width: 100%;
    padding: 12px 16px;
    border: 1px solid var(--border);
    border-radius: var(--radius-md);
    font-size: 15px;
    font-family: inherit;
}

.modal-footer {
    display: flex;
    gap: 10px;
    margin-top: 24px;
}

.btn-primary {
    flex: 1;
    padding: 14px;
    background: linear-gradient(135deg, var(--primary), var(--primary-dark));
    color: white;
    border: none;
    border-radius: var(--radius-md);
    font-family: inherit;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
}

.btn-secondary {
    flex: 1;
    padding: 14px;
    background: var(--bg-tertiary);
    color: var(--text-primary);
    border: none;
    border-radius: var(--radius-md);
    font-family: inherit;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
}

/* ==================== MEDCHAT SECTION ==================== */
.section-medchat {
    display: none;
    flex-direction: column;
    height: calc(100vh - 280px);
    padding: 0;
    padding-bottom: 80px;
}

.section-medchat.active {
    display: flex;
}

.chat-container {
    flex: 1;
    display: flex;
    flex-direction: column;
    background: var(--bg-primary);
    overflow: hidden;
}

.chat-header {
    padding: 16px 20px;
    background: var(--bg-secondary);
    border-bottom: 1px solid var(--border-light);
}

.chat-header-title {
    font-size: 16px;
    font-weight: 700;
    color: var(--text-primary);
    display: flex;
    align-items: center;
    gap: 8px;
}

.chat-header-subtitle {
    font-size: 12px;
    color: var(--text-muted);
    margin-top: 4px;
}

.chat-disclaimer {
    background: linear-gradient(135deg, rgba(245, 158, 11, 0.1), rgba(245, 158, 11, 0.05));
    border: 1px solid rgba(245, 158, 11, 0.3);
    border-radius: var(--radius-md);
    padding: 10px 14px;
    margin: 12px 16px;
    font-size: 11px;
    color: var(--warning);
    display: flex;
    align-items: flex-start;
    gap: 8px;
}

.chat-disclaimer-icon {
    font-size: 14px;
    flex-shrink: 0;
}

.chat-messages {
    flex: 1;
    overflow-y: auto;
    overflow-x: hidden;
    padding: 16px;
    display: flex;
    flex-direction: column;
    gap: 16px;
    width: 100%;
}

.chat-message {
    display: flex;
    gap: 10px;
    max-width: 88%;
    animation: messageIn 0.3s ease;
    align-items: flex-start;
}

@keyframes messageIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

.chat-message.user {
    align-self: flex-end;
    flex-direction: row-reverse;
}

.chat-message.assistant {
    align-self: flex-start;
}

.chat-avatar {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    font-size: 16px;
    flex-shrink: 0;
}

.chat-message.user .chat-avatar {
    background: linear-gradient(145deg, var(--primary), var(--primary-dark));
    color: white;
}

.chat-message.assistant .chat-avatar {
    background: linear-gradient(145deg, var(--accent), #0d9488);
    color: white;
}

.chat-bubble {
    padding: 12px 16px;
    border-radius: var(--radius-lg);
    font-size: 14px;
    line-height: 1.6;
    overflow-wrap: break-word;
    white-space: pre-wrap;
    flex: 1;
}

.chat-message.user .chat-bubble {
    background: linear-gradient(135deg, var(--primary), var(--primary-dark));
    color: white;
    border-bottom-right-radius: 4px;
}

.chat-message.assistant .chat-bubble {
    background: var(--bg-secondary);
    color: var(--text-primary);
    border: 1px solid var(--border-light);
    border-bottom-left-radius: 4px;
}

.chat-bubble p {
    margin: 0 0 10px 0;
    text-align: left;
}

.chat-bubble p:last-child {
    margin-bottom: 0;
}

.chat-bubble ul, .chat-bubble ol {
    margin: 8px 0;
    padding-left: 20px;
}

.chat-bubble li {
    margin: 4px 0;
}

.chat-bubble strong {
    color: var(--primary);
}

.chat-bubble code {
    background: rgba(0,0,0,0.1);
    padding: 2px 6px;
    border-radius: 4px;
    font-family: var(--font-mono);
    font-size: 13px;
}

.chat-typing {
    display: flex;
    align-items: center;
    gap: 4px;
    padding: 12px 16px;
}

.chat-typing-dot {
    width: 8px;
    height: 8px;
    background: var(--text-muted);
    border-radius: 50%;
    animation: typingBounce 1.4s infinite ease-in-out;
}

.chat-typing-dot:nth-child(1) { animation-delay: -0.32s; }
.chat-typing-dot:nth-child(2) { animation-delay: -0.16s; }

@keyframes typingBounce {
    0%, 80%, 100% { transform: scale(0.8); opacity: 0.5; }
    40% { transform: scale(1); opacity: 1; }
}

.chat-input-container {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    padding: 12px 16px;
    padding-bottom: max(12px, env(safe-area-inset-bottom));
    background: var(--bg-secondary);
    border-top: 1px solid var(--border-light);
    z-index: 150;
}

.chat-input-wrapper {
    display: flex;
    gap: 12px;
    align-items: flex-end;
}

.chat-input {
    flex: 1;
    padding: 14px 18px;
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    font-family: inherit;
    font-size: 15px;
    resize: none;
    max-height: 120px;
    min-height: 48px;
    line-height: 1.4;
    transition: border-color 0.2s ease, box-shadow 0.2s ease;
}

.chat-input:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
}

.chat-input::placeholder {
    color: var(--text-muted);
}

.chat-send-btn {
    width: 48px;
    height: 48px;
    border: none;
    background: linear-gradient(135deg, var(--primary), var(--primary-dark));
    color: white;
    border-radius: var(--radius-md);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 20px;
    transition: transform 0.15s ease, box-shadow 0.15s ease;
    flex-shrink: 0;
}

.chat-send-btn:hover {
    transform: scale(1.05);
    box-shadow: var(--shadow-md);
}

.chat-send-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    transform: none;
}

.chat-suggestions {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    padding: 12px 16px;
    border-top: 1px solid var(--border-light);
    background: var(--bg-tertiary);
}

.chat-suggestion {
    padding: 8px 14px;
    background: var(--bg-secondary);
    border: 1px solid var(--border);
    border-radius: 20px;
    font-size: 12px;
    color: var(--text-secondary);
    cursor: pointer;
    transition: all 0.2s ease;
}

.chat-suggestion:hover {
    border-color: var(--primary);
    color: var(--primary);
    background: rgba(37, 99, 235, 0.05);
}

.chat-error {
    background: rgba(239, 68, 68, 0.1);
    border: 1px solid rgba(239, 68, 68, 0.3);
    color: var(--danger);
    padding: 12px 16px;
    border-radius: var(--radius-md);
    margin: 8px 16px;
    font-size: 13px;
}

/* Hide bottom nav when MedChat is active */
.section-medchat.active ~ .bottom-nav,
body.medchat-active .bottom-nav {
    display: none;
}

/* Adjust chat messages area for fixed input */
.chat-messages {
    padding-bottom: 100px;
}

/* Mobile optimizations */
@media (max-width: 480px) {
    .section-medchat {
        height: calc(100vh - 180px);
    }
    
    .chat-input {
        font-size: 16px; /* Prevents iOS zoom */
    }
    
    .chat-suggestion {
        font-size: 11px;
        padding: 6px 10px;
    }
    
    .chat-header {
        padding: 12px 16px;
    }
    
    .chat-disclaimer {
        margin: 8px 12px;
        padding: 8px 10px;
        font-size: 10px;
    }
}

/* ==================== AESTHETIC IMPROVEMENTS V9 ==================== */

/* Smoother animations */
.calc-card, .form-card, .result-card, .guide-card {
    transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Better hover effects */
.calc-card:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg);
}

/* Gradient accent line on cards */
.calc-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, var(--primary), var(--accent));
    border-radius: var(--radius-md) var(--radius-md) 0 0;
    opacity: 0;
    transition: opacity 0.2s ease;
}

.calc-card:hover::before {
    opacity: 1;
}

/* Better result cards */
.result-card.has-result {
    background: linear-gradient(135deg, var(--bg-secondary), var(--bg-tertiary));
    border: 1px solid var(--primary-lighter);
}

/* Pulse animation for important results */
@keyframes resultPulse {
    0%, 100% { box-shadow: 0 0 0 0 var(--primary-glow); }
    50% { box-shadow: 0 0 20px 5px var(--primary-glow); }
}

.result-card.has-result.danger {
    animation: resultPulse 2s ease-in-out;
}

/* Better tabs styling */
.tab {
    position: relative;
    overflow: hidden;
}

.tab::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 50%;
    width: 0;
    height: 2px;
    background: var(--primary);
    transition: all 0.3s ease;
    transform: translateX(-50%);
}

.tab.active::after {
    width: 80%;
}

/* Improved header gradient */
header {
    background: linear-gradient(180deg, var(--bg-glass-strong) 0%, var(--bg-glass) 100%);
}

/* Better form inputs focus */
.form-input:focus, .form-select:focus {
    border-color: var(--primary);
    box-shadow: 0 0 0 4px var(--primary-glow), var(--shadow-sm);
}

/* Smooth page transitions */
.calc-page, .guide-page {
    animation: slideIn 0.3s ease-out;
}

@keyframes slideIn {
    from {
        opacity: 0;
        transform: translateX(20px);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

/* Better check options */
.check-opt {
    transition: all 0.2s ease;
}

.check-opt:active {
    transform: scale(0.98);
}

.check-opt.selected {
    background: linear-gradient(135deg, rgba(37, 99, 235, 0.08), rgba(37, 99, 235, 0.15));
}

/* Install prompt for PWA */
.install-prompt {
    position: fixed;
    bottom: 100px;
    left: 50%;
    transform: translateX(-50%);
    background: var(--bg-secondary);
    padding: 12px 20px;
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-xl);
    display: none;
    align-items: center;
    gap: 12px;
    z-index: 1000;
    border: 1px solid var(--border);
}

.install-prompt.show {
    display: flex;
    animation: slideUp 0.3s ease;
}

@keyframes slideUp {
    from { transform: translateX(-50%) translateY(20px); opacity: 0; }
    to { transform: translateX(-50%) translateY(0); opacity: 1; }
}

.install-btn {
    background: var(--primary);
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: var(--radius-sm);
    cursor: pointer;
    font-weight: 600;
}

/* Version badge */
.version-badge {
    position: absolute;
    top: 8px;
    right: 8px;
    font-size: 9px;
    background: var(--primary);
    color: white;
    padding: 2px 6px;
    border-radius: 10px;
    font-weight: 600;
}

/* Geriatrie category highlight */
.tab[data-cat="geriatrie"] {
    background: linear-gradient(135deg, rgba(147, 51, 234, 0.1), rgba(147, 51, 234, 0.05));
}

.tab[data-cat="geriatrie"].active {
    background: linear-gradient(135deg, rgba(147, 51, 234, 0.2), rgba(147, 51, 234, 0.1));
    color: #7C3AED;
}

/* Enhanced visual improvements for V9 */

/* Smooth card hover effects */
.calc-card {
    transition: transform 0.2s ease, box-shadow 0.2s ease !important;
}

.calc-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-lg);
}

.calc-card:active {
    transform: translateY(-2px);
}

/* Better gradient for geriatrie category */
.calc-card[data-cat="geriatrie"] {
    background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
    border-left: 4px solid #22c55e;
}

[data-theme="dark"] .calc-card[data-cat="geriatrie"] {
    background: linear-gradient(135deg, rgba(34, 197, 94, 0.15) 0%, rgba(34, 197, 94, 0.05) 100%);
}

/* Improved tab styling */
.tab {
    transition: all 0.25s ease !important;
}

.tab:hover:not(.active) {
    background: var(--bg-hover);
    transform: translateY(-1px);
}

/* Better result cards */
.result-card.has-result {
    animation: resultPulse 0.5s ease;
}

@keyframes resultPulse {
    0% { transform: scale(0.98); opacity: 0.8; }
    50% { transform: scale(1.02); }
    100% { transform: scale(1); opacity: 1; }
}

/* Improved form inputs */
.form-input:focus, .form-select:focus {
    transform: translateY(-1px);
}

/* Better guideline cards */
.g-category:hover {
    background: var(--bg-hover);
}

/* Smooth page transitions */
.calc-page, .guide-page {
    animation: slideIn 0.3s ease;
}

@keyframes slideIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

/* Install prompt banner */
.install-banner {
    position: fixed;
    bottom: 100px;
    left: 16px;
    right: 16px;
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    color: white;
    padding: 16px;
    border-radius: var(--radius-lg);
    display: none;
    align-items: center;
    gap: 12px;
    box-shadow: var(--shadow-xl);
    z-index: 200;
    animation: slideUp 0.3s ease;
}

.install-banner.show {
    display: flex;
}

@keyframes slideUp {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}

.install-banner-text {
    flex: 1;
}

.install-banner-title {
    font-weight: 700;
    margin-bottom: 4px;
}

.install-banner-desc {
    font-size: 13px;
    opacity: 0.9;
}

.install-banner-btn {
    padding: 10px 20px;
    background: white;
    color: var(--primary);
    border: none;
    border-radius: var(--radius-md);
    font-weight: 700;
    cursor: pointer;
}

.install-banner-close {
    width: 32px;
    height: 32px;
    background: rgba(255,255,255,0.2);
    border: none;
    border-radius: 50%;
    color: white;
    cursor: pointer;
    font-size: 18px;
}
    </style>
<script defer="" data-domain="giulia-tu-es-la-plus-jolie.tiiny.site" src="https://analytics.tiiny.site/js/plausible.js"></script><meta property="og:url" content="https://giulia-tu-es-la-plus-jolie.tiiny.site/" data-id="th-modified"><meta property="og:type" content="website" data-id="th-modified"></head>
<body>
    <div class="app-container">
        <header>
            <div class="header-main">
                <div class="header-left">
                    <a href="../index.html" class="back-btn" title="Retour au hub">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
                            <path d="M19 12H5M12 19l-7-7 7-7"/>
                        </svg>
                    </a>
                    <div class="logo">‚öïÔ∏è</div>
                    <div class="app-info">
                        <h1>MedApp Pro</h1>
                        <p>G√©riatrie UGA</p>
                    </div>
                </div>
                <div class="header-right">
                    <div class="lang-selector">
                        <button class="lang-btn" onclick="toggleLangDropdown()">
                            <span class="lang-flag" id="currentLangFlag">üá´üá∑</span>
                            <span id="currentLangCode">FR</span>
                        </button>
                        <div class="lang-dropdown" id="langDropdown">
                            <div class="lang-option active" onclick="setLanguage('fr')"><span class="lang-flag">üá´üá∑</span> Fran√ßais</div>
                            <div class="lang-option" onclick="setLanguage('de')"><span class="lang-flag">üá©üá™</span> Deutsch</div>
                            <div class="lang-option" onclick="setLanguage('en')"><span class="lang-flag">üá¨üáß</span> English</div>
                            <div class="lang-option" onclick="setLanguage('it')"><span class="lang-flag">üáÆüáπ</span> Italiano</div>
                            <div class="lang-option" onclick="setLanguage('ro')"><span class="lang-flag">üá∑üá¥</span> Rom√¢nƒÉ</div>
                        </div>
                    </div>
                    <button class="theme-toggle" onclick="toggleTheme()" title="Changer le th√®me">üåô</button>
                    <div class="logo-rhne">RHNe</div>
                </div>
            </div>
            
            <div class="user-profile" onclick="openSettingsModal()">
                <div class="user-avatar" id="userAvatar">GS</div>
                <div class="user-info">
                    <div class="user-name" id="userName">Dr. Giulia Scattu</div>
                    <div class="user-role" id="userRole">M√©decin assistant ¬∑ UGA</div>
                </div>
            </div>
            
            <div class="main-tabs">
                <button class="main-tab active" onclick="switchSection('calculs')">üìä Calculs</button>
                <button class="main-tab" onclick="switchSection('guidelines')">üìñ Guidelines</button>
                <button class="main-tab" onclick="switchSection('medchat')">üí¨ MedChat</button>
            </div>
            
            <div class="search-container" id="searchContainer">
                <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.3-4.3"></path></svg>
                <input type="text" class="search-bar" placeholder="Rechercher un score..." id="searchInput" autocomplete="off">
                <div class="search-results" id="searchResults"></div>
            </div>
        </header>
        
        
        <div class="section-calculs" id="sectionCalculs">
            <div class="tabs-wrapper">
                <div class="tabs">
                    <button class="tab active" data-cat="all">Tous</button>
                    <button class="tab" data-cat="geriatrie"><span class="tab-icon">üßì</span> G√©riatrie</button>
                    <button class="tab" data-cat="nephro"><span class="tab-icon">ü´ò</span> N√©phro</button>
                    <button class="tab" data-cat="cardio"><span class="tab-icon">‚ù§Ô∏è</span> Cardio</button>
                    <button class="tab" data-cat="rea"><span class="tab-icon">üè•</span> R√©a</button>
                    <button class="tab" data-cat="pneumo"><span class="tab-icon">ü´Å</span> Pneumo</button>
                    <button class="tab" data-cat="neuro"><span class="tab-icon">üß†</span> Neuro</button>
                    <button class="tab" data-cat="gastro"><span class="tab-icon">üî¨</span> Gastro</button>
                    <button class="tab" data-cat="pediatrie"><span class="tab-icon">üë∂</span> P√©diatrie</button>
                    <button class="tab" data-cat="general"><span class="tab-icon">üìê</span> G√©n√©ral</button>
                </div>
            </div>
            
            <main class="content">
                <div class="page active" id="page-home">
                    <div class="section-header"><h2 class="section-title">‚≠ê Favoris</h2></div>
                    <div class="fav-grid" id="favGrid"></div>
                    <div class="section-header"><h2 class="section-title">üìã Tous les scores</h2></div>
                    <div class="calc-list" id="calcList"></div>
                </div>
                <div class="page" id="page-history">
                    <div class="section-header"><h2 class="section-title">üìä Historique</h2></div>
                    <div id="historyList"></div>
                </div>
                <div class="page" id="page-favorites">
                    <div class="section-header"><h2 class="section-title">‚≠ê Mes favoris</h2></div>
                    <div class="calc-list" id="favList"></div>
                </div>
            </main>
        </div>

        
        <div class="section-guidelines" id="sectionGuidelines">
            <div class="guide-intro">
                üìö <strong>Guidelines G√©riatrie</strong> ‚Äî Protocoles de prise en charge des syndromes g√©riatriques les plus fr√©quents en UGA. Bas√©s sur les recommandations HAS, SFGG et soci√©t√©s savantes.
            </div>
            
            
            <div class="guide-cat">
                <div class="guide-cat-header" onclick="toggleGuideCat(this.parentElement)">
                    <div class="guide-cat-icon">üßì</div>
                    <div class="guide-cat-info">
                        <div class="guide-cat-title">Syndromes G√©riatriques</div>
                        <div class="guide-cat-count">5 guidelines</div>
                    </div>
                    <span class="guide-cat-arrow">‚ñº</span>
                </div>
                <div class="guide-cat-items">
                    <div class="guide-item" onclick="openGuide('delirium')"><div class="guide-item-dot"></div><div class="guide-item-title">Confusion / D√©lirium</div><span class="guide-item-arrow">‚Ä∫</span></div>
                    <div class="guide-item" onclick="openGuide('chutes')"><div class="guide-item-dot"></div><div class="guide-item-title">Chutes r√©p√©t√©es</div><span class="guide-item-arrow">‚Ä∫</span></div>
                    <div class="guide-item" onclick="openGuide('denutrition')"><div class="guide-item-dot"></div><div class="guide-item-title">D√©nutrition</div><span class="guide-item-arrow">‚Ä∫</span></div>
                    <div class="guide-item" onclick="openGuide('polymed')"><div class="guide-item-dot"></div><div class="guide-item-title">Polym√©dication / STOPP-START</div><span class="guide-item-arrow">‚Ä∫</span></div>
                    <div class="guide-item" onclick="openGuide('fragilite')"><div class="guide-item-dot"></div><div class="guide-item-title">Fragilit√© / Sarcop√©nie</div><span class="guide-item-arrow">‚Ä∫</span></div>
                    <div class="guide-item" onclick="openGuide('egs')"><div class="guide-item-dot"></div><div class="guide-item-title">√âvaluation G√©riatrique (EGS)</div><span class="guide-item-arrow">‚Ä∫</span></div>
                    <div class="guide-item" onclick="openGuide('douleur')"><div class="guide-item-dot"></div><div class="guide-item-title">Douleur du sujet √¢g√©</div><span class="guide-item-arrow">‚Ä∫</span></div>
                </div>
            </div>

            
            <div class="guide-cat">
                <div class="guide-cat-header" onclick="toggleGuideCat(this.parentElement)">
                    <div class="guide-cat-icon">ü¶†</div>
                    <div class="guide-cat-info">
                        <div class="guide-cat-title">Infectiologie</div>
                        <div class="guide-cat-count">1 guideline</div>
                    </div>
                    <span class="guide-cat-arrow">‚ñº</span>
                </div>
                <div class="guide-cat-items">
                    <div class="guide-item" onclick="openGuide('iu')"><div class="guide-item-dot"></div><div class="guide-item-title">Infection urinaire / Bact√©riurie</div><span class="guide-item-arrow">‚Ä∫</span></div>
                </div>
            </div>
        </div>

        
        <nav class="bottom-nav">
            <button class="nav-item active" data-page="home"><span class="nav-icon">üè†</span><span class="nav-label">Accueil</span></button>
            <button class="nav-item" data-page="history"><span class="nav-icon">üìä</span><span class="nav-label">Historique</span></button>
            <button class="nav-item" data-page="favorites"><span class="nav-icon">‚≠ê</span><span class="nav-label">Favoris</span></button>
        </nav>
    </div>

    
    
    
    <div class="guide-page" id="guide-delirium">
        <div class="guide-hdr">
            <button class="btn-back" onclick="closeGuide()">‚Üê</button>
            <div class="guide-hdr-info">
                <div class="guide-hdr-title">Confusion / D√©lirium</div>
                <div class="guide-hdr-sub">HAS 2009 ‚Ä¢ SFGG</div>
            </div>
        </div>
        <div class="guide-body">
            <div class="g-alert danger">‚ö†Ô∏è <strong>Urgence diagnostique !</strong> Mortalit√© et d√©clin fonctionnel augment√©s. Toujours chercher une cause.</div>
            
            <div class="g-card">
                <div class="g-card-hdr">üîç Diagnostic - Score CAM</div>
                <div class="g-card-body">
                    <p><strong>Positif si crit√®res 1 + 2 + (3 ou 4) :</strong></p>
                    <table class="g-table">
                        <tbody><tr><th>Crit√®re</th><th>Description</th></tr>
                        <tr><td><strong>1. D√©but aigu</strong></td><td>Changement brutal, fluctuant dans la journ√©e</td></tr>
                        <tr><td><strong>2. Inattention</strong></td><td>Distrait facilement, perd le fil</td></tr>
                        <tr><td><strong>3. D√©sorganis√©</strong></td><td>Propos incoh√©rents, illogiques</td></tr>
                        <tr><td><strong>4. Conscience</strong></td><td>Hypervigilance ou l√©thargie</td></tr>
                    </tbody></table>
                </div>
            </div>
            
            <div class="g-card">
                <div class="g-card-hdr">üéØ √âtiologies - Mn√©motechnique DELIRIUM</div>
                <div class="g-card-body">
                    <ul class="g-list">
                        <li><strong>D</strong>rogues (BZD, anticholinergiques, opio√Ødes, cortico√Ødes)</li>
                        <li><strong>E</strong>lectrolytes (Na+, K+, Ca++, glyc√©mie)</li>
                        <li><strong>L</strong>ack of drugs (sevrage alcool, BZD)</li>
                        <li><strong>I</strong>nfection (urinaire, pulmonaire, cutan√©e)</li>
                        <li><strong>R</strong>√©tention (globe v√©sical, f√©calome)</li>
                        <li><strong>I</strong>ntracranien (AVC, HSD, m√©ningite)</li>
                        <li><strong>U</strong>nderperfusion (hypoxie, an√©mie, bas d√©bit)</li>
                        <li><strong>M</strong>√©tabolique (IR, IH, dysthyro√Ødie)</li>
                    </ul>
                </div>
            </div>
            
            <div class="g-card">
                <div class="g-card-hdr">üß™ Bilan minimum</div>
                <div class="g-card-body">
                    <ul class="g-list">
                        <li>NFS, CRP, ionogramme, ur√©e, cr√©atinine, glyc√©mie</li>
                        <li>Calc√©mie</li>
                        <li>BU ¬± ECBU</li>
                        <li>ECG, SpO2</li>
                        <li>Bladder-scan syst√©matique</li>
                        <li>TR si constipation suspect√©e</li>
                    </ul>
                    <div class="g-alert info">üß† <strong>TDM c√©r√©bral si :</strong> trauma cr√¢nien, signes focaux, anticoagulants, chute r√©cente, c√©phal√©es inhabituelles</div>
                </div>
            </div>
            
            <div class="g-card">
                <div class="g-card-hdr">üíä Traitement</div>
                <div class="g-card-body">
                    <p><strong>1Ô∏è‚É£ Mesures non m√©dicamenteuses (PRIORITAIRES) :</strong></p>
                    <ul class="g-list">
                        <li>Environnement calme, √©clairage adapt√© jour/nuit</li>
                        <li>Rep√®res temporels (horloge, calendrier)</li>
                        <li>Pr√©sence rassurante de la famille</li>
                        <li>Correction d√©ficits sensoriels (lunettes, appareils auditifs)</li>
                        <li>Hydratation, mobilisation pr√©coce</li>
                        <li>√âviter contention physique (aggrave l'agitation)</li>
                    </ul>
                    <p><strong>2Ô∏è‚É£ Si agitation s√©v√®re mettant en danger :</strong></p>
                    <ul class="g-list">
                        <li><span class="g-hl">Halop√©ridol 0.5-1 mg</span> PO ou IM</li>
                        <li>Max 5 mg/jour, dur√©e minimale</li>
                        <li>Alternative : Risp√©ridone 0.25-0.5 mg</li>
                    </ul>
                    <div class="g-alert danger">üö´ <strong>Contre-indications neuroleptiques :</strong> Maladie de Parkinson, d√©mence √† corps de Lewy, QT long</div>
                </div>
            </div>
        </div>
    </div>

    
    <div class="guide-page" id="guide-chutes">
        <div class="guide-hdr">
            <button class="btn-back" onclick="closeGuide()">‚Üê</button>
            <div class="guide-hdr-info">
                <div class="guide-hdr-title">Chutes r√©p√©t√©es</div>
                <div class="guide-hdr-sub">HAS 2009 ‚Ä¢ SFGG</div>
            </div>
        </div>
        <div class="guide-body">
            <div class="g-alert warning">üìä <strong>D√©finition :</strong> ‚â•2 chutes en 12 mois. Incidence : 30% des &gt;65 ans, 50% des &gt;80 ans</div>
            
            <div class="g-card">
                <div class="g-card-hdr">üö® Signes de gravit√©</div>
                <div class="g-card-body">
                    <ul class="g-list">
                        <li>Impossibilit√© de se relever seul (station au sol prolong√©e)</li>
                        <li>Fracture (poignet, col f√©moral, vert√®bre)</li>
                        <li>Traumatisme cr√¢nien + anticoagulants</li>
                        <li>Malaise / perte de connaissance</li>
                        <li>‚â•3 chutes en 6 mois</li>
                        <li>Syndrome post-chute (peur de tomber, r√©tropulsion)</li>
                    </ul>
                </div>
            </div>
            
            <div class="g-card">
                <div class="g-card-hdr">üìã √âvaluation - Tests cliniques</div>
                <div class="g-card-body">
                    <table class="g-table">
                        <tbody><tr><th>Test</th><th>Seuil pathologique</th></tr>
                        <tr><td><strong>Timed Up and Go</strong></td><td>&gt;14 secondes</td></tr>
                        <tr><td><strong>Appui unipodal</strong></td><td>&lt;5 secondes</td></tr>
                        <tr><td><strong>Test HTO</strong></td><td>‚ÜìPAS ‚â•20 mmHg √† 1-3 min</td></tr>
                        <tr><td><strong>Tinetti</strong></td><td>&lt;20/28</td></tr>
                    </tbody></table>
                </div>
            </div>
            
            <div class="g-card">
                <div class="g-card-hdr">‚ö†Ô∏è Facteurs de risque majeurs</div>
                <div class="g-card-body">
                    <ul class="g-list">
                        <li>√Çge ‚â•80 ans</li>
                        <li>ATCD de chute dans l'ann√©e</li>
                        <li>Troubles cognitifs (MMS &lt;24)</li>
                        <li>Polym√©dication ‚â•4 m√©dicaments</li>
                        <li>Psychotropes (BZD, antid√©presseurs, neuroleptiques)</li>
                        <li>Troubles visuels non corrig√©s</li>
                        <li>Arthrose des membres inf√©rieurs</li>
                    </ul>
                </div>
            </div>
            
            <div class="g-card">
                <div class="g-card-hdr">üíä Prise en charge</div>
                <div class="g-card-body">
                    <ul class="g-list">
                        <li><strong>R√©vision m√©dicamenteuse</strong> : arr√™t/diminution psychotropes, antihypertenseurs si HTO</li>
                        <li><strong>Kin√©sith√©rapie</strong> : travail √©quilibre + renforcement membres inf√©rieurs</li>
                        <li><strong>Vitamine D</strong> : 800-1000 UI/j si carence</li>
                        <li><strong>Am√©nagement domicile</strong> : √©clairage, tapis, barres d'appui</li>
                        <li><strong>Correction d√©ficits sensoriels</strong> : vue, audition</li>
                        <li><strong>Chaussage adapt√©</strong> : semelles antid√©rapantes</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    
    <div class="guide-page" id="guide-denutrition">
        <div class="guide-hdr">
            <button class="btn-back" onclick="closeGuide()">‚Üê</button>
            <div class="guide-hdr-info">
                <div class="guide-hdr-title">D√©nutrition</div>
                <div class="guide-hdr-sub">HAS 2021</div>
            </div>
        </div>
        <div class="guide-body">
            <div class="g-alert warning">üìä <strong>Pr√©valence :</strong> ~1 million de PA d√©nutries en France. 4-10% √† domicile, 30-70% en institution</div>
            
            <div class="g-card">
                <div class="g-card-hdr">üîç Diagnostic HAS 2021 (‚â•70 ans)</div>
                <div class="g-card-body">
                    <p><strong>D√©nutrition = 1 crit√®re ph√©notypique + 1 crit√®re √©tiologique</strong></p>
                    
                    <p><strong>Crit√®res ph√©notypiques :</strong></p>
                    <ul class="g-list">
                        <li>Perte de poids ‚â•5% en 1 mois OU ‚â•10% en 6 mois</li>
                        <li>IMC &lt;22 kg/m¬≤</li>
                        <li>Sarcop√©nie confirm√©e (EWGSOP2)</li>
                    </ul>
                    
                    <p><strong>Crit√®res √©tiologiques :</strong></p>
                    <ul class="g-list">
                        <li>R√©duction des apports ‚â•50% pendant &gt;1 semaine</li>
                        <li>Absorption r√©duite (malabsorption)</li>
                        <li>Situation d'agression (infection, inflammation, cancer)</li>
                    </ul>
                </div>
            </div>
            
            <div class="g-card">
                <div class="g-card-hdr">üìä S√©v√©rit√©</div>
                <div class="g-card-body">
                    <table class="g-table">
                        <tbody><tr><th>Crit√®re</th><th>Mod√©r√©e</th><th>S√©v√®re</th></tr>
                        <tr><td><strong>IMC</strong></td><td>&lt;22</td><td>&lt;20</td></tr>
                        <tr><td><strong>Perte poids/1 mois</strong></td><td>5-10%</td><td>‚â•10%</td></tr>
                        <tr><td><strong>Perte poids/6 mois</strong></td><td>10-15%</td><td>‚â•15%</td></tr>
                        <tr><td><strong>Albumine</strong></td><td>-</td><td>&lt;30 g/L</td></tr>
                    </tbody></table>
                    <div class="g-alert info">‚ÑπÔ∏è <strong>Attention :</strong> L'albumine est un crit√®re de S√âV√âRIT√â, pas de diagnostic !</div>
                </div>
            </div>
            
            <div class="g-card">
                <div class="g-card-hdr">üìã D√©pistage - MNA-SF</div>
                <div class="g-card-body">
                    <table class="g-table">
                        <tbody><tr><th>Score</th><th>Interpr√©tation</th></tr>
                        <tr><td>12-14</td><td>√âtat nutritionnel normal</td></tr>
                        <tr><td>8-11</td><td>Risque de d√©nutrition</td></tr>
                        <tr><td>0-7</td><td>D√©nutrition av√©r√©e</td></tr>
                    </tbody></table>
                </div>
            </div>
            
            <div class="g-card">
                <div class="g-card-hdr">üíä Objectifs et traitement</div>
                <div class="g-card-body">
                    <p><strong>Objectifs nutritionnels :</strong></p>
                    <ul class="g-list">
                        <li>√ânergie : <span class="g-hl">30-40 kcal/kg/j</span></li>
                        <li>Prot√©ines : <span class="g-hl">1.2-1.5 g/kg/j</span></li>
                    </ul>
                    
                    <p><strong>Strat√©gie par paliers :</strong></p>
                    <ul class="g-list">
                        <li><strong>1. Enrichissement</strong> : poudre de lait, ≈ìufs, fromage r√¢p√©, huile</li>
                        <li><strong>2. CNO</strong> : ‚â•400 kcal/j et ‚â•30g prot√©ines/j, en collation</li>
                        <li><strong>3. Nutrition ent√©rale</strong> : si √©chec CNO ou apports &lt;50%</li>
                    </ul>
                    
                    <p><strong>Mesures associ√©es :</strong></p>
                    <ul class="g-list">
                        <li>Activit√© physique adapt√©e (lutte contre sarcop√©nie)</li>
                        <li>Soins bucco-dentaires</li>
                        <li>Correction des facteurs favorisants</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    
    <div class="guide-page" id="guide-polymed">
        <div class="guide-hdr">
            <button class="btn-back" onclick="closeGuide()">‚Üê</button>
            <div class="guide-hdr-info">
                <div class="guide-hdr-title">Polym√©dication / STOPP-START</div>
                <div class="guide-hdr-sub">STOPP-START v3 2023</div>
            </div>
        </div>
        <div class="guide-body">
            <div class="g-alert warning">üìä <strong>Polym√©dication :</strong> ‚â•5 m√©dicaments/jour. 5-20% des hospitalisations des PA sont li√©es aux effets ind√©sirables m√©dicamenteux</div>
            
            <div class="g-card">
                <div class="g-card-hdr">üõë STOPP - M√©dicaments √† arr√™ter</div>
                <div class="g-card-body">
                    <p><strong>Psychotropes :</strong></p>
                    <ul class="g-list">
                        <li>BZD &gt;4 semaines (risque chute, confusion)</li>
                        <li>Neuroleptiques &gt;1 mois sans psychose vraie</li>
                        <li>Anticholinergiques si troubles cognitifs</li>
                    </ul>
                    
                    <p><strong>Digestif :</strong></p>
                    <ul class="g-list">
                        <li>IPP &gt;8 semaines sans indication document√©e</li>
                    </ul>
                    
                    <p><strong>Cardiovasculaire :</strong></p>
                    <ul class="g-list">
                        <li>Digoxine &gt;125 ¬µg/j si DFG &lt;30</li>
                        <li>AINS au long cours (risque r√©nal, digestif)</li>
                    </ul>
                </div>
            </div>
            
            <div class="g-card">
                <div class="g-card-hdr">‚úÖ START - M√©dicaments √† initier</div>
                <div class="g-card-body">
                    <p><strong>Indications fr√©quemment manqu√©es :</strong></p>
                    <ul class="g-list">
                        <li><strong>Vitamine D</strong> si carence document√©e</li>
                        <li><strong>IEC/ARA2</strong> si IC √† FEVG alt√©r√©e</li>
                        <li><strong>Anticoagulant</strong> si FA et CHA‚ÇÇDS‚ÇÇ-VASc ‚â•2</li>
                        <li><strong>Bisphosphonate</strong> si ost√©oporose fracturaire</li>
                        <li><strong>Vaccins</strong> grippe et pneumocoque</li>
                    </ul>
                </div>
            </div>
            
            <div class="g-card">
                <div class="g-card-hdr">üìã D√©marche de d√©prescription</div>
                <div class="g-card-body">
                    <p><strong>7 √©tapes :</strong></p>
                    <ul class="g-list">
                        <li><strong>1.</strong> Lister tous les m√©dicaments (dont autom√©dication)</li>
                        <li><strong>2.</strong> V√©rifier l'indication de chaque m√©dicament</li>
                        <li><strong>3.</strong> Identifier les m√©dicaments potentiellement inappropri√©s</li>
                        <li><strong>4.</strong> Prioriser les arr√™ts (balance b√©n√©fice/risque)</li>
                        <li><strong>5.</strong> Planifier le sevrage progressif</li>
                        <li><strong>6.</strong> Surveiller les signes de sevrage ou rebond</li>
                        <li><strong>7.</strong> Impliquer le patient et r√©√©valuer</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    
    <div class="guide-page" id="guide-fragilite">
        <div class="guide-hdr">
            <button class="btn-back" onclick="closeGuide()">‚Üê</button>
            <div class="guide-hdr-info">
                <div class="guide-hdr-title">Fragilit√© / Sarcop√©nie</div>
                <div class="guide-hdr-sub">Fried 2001 ‚Ä¢ EWGSOP2 2018</div>
            </div>
        </div>
        <div class="guide-body">
            <div class="g-alert info">‚ÑπÔ∏è <strong>Concept cl√© :</strong> La fragilit√© est un syndrome potentiellement R√âVERSIBLE pr√©c√©dant la d√©pendance</div>
            
            <div class="g-card">
                <div class="g-card-hdr">üìã Crit√®res de Fried</div>
                <div class="g-card-body">
                    <p><strong>Fragile si ‚â•3 crit√®res / Pr√©-fragile si 1-2 crit√®res</strong></p>
                    <table class="g-table">
                        <tbody><tr><th>Crit√®re</th><th>D√©finition</th></tr>
                        <tr><td><strong>Perte de poids</strong></td><td>‚â•4.5 kg involontaire dans l'ann√©e</td></tr>
                        <tr><td><strong>Fatigue</strong></td><td>√âpuisement ressenti (auto-√©valuation)</td></tr>
                        <tr><td><strong>Faiblesse</strong></td><td>Force de pr√©hension diminu√©e</td></tr>
                        <tr><td><strong>Lenteur</strong></td><td>Vitesse de marche &lt;0.8 m/s</td></tr>
                        <tr><td><strong>S√©dentarit√©</strong></td><td>Activit√© physique r√©duite</td></tr>
                    </tbody></table>
                </div>
            </div>
            
            <div class="g-card">
                <div class="g-card-hdr">üí™ Sarcop√©nie - EWGSOP2</div>
                <div class="g-card-body">
                    <p><strong>Algorithme diagnostique :</strong></p>
                    <ul class="g-list">
                        <li><strong>1. D√©pistage</strong> : questionnaire SARC-F (‚â•4 = risque)</li>
                        <li><strong>2. Diagnostic</strong> : force de pr√©hension ‚Üì (H&lt;27kg, F&lt;16kg)</li>
                        <li><strong>3. Confirmation</strong> : masse musculaire ‚Üì (DXA, BIA)</li>
                        <li><strong>4. S√©v√©rit√©</strong> : vitesse de marche &lt;0.8 m/s</li>
                    </ul>
                </div>
            </div>
            
            <div class="g-card">
                <div class="g-card-hdr">üíä Prise en charge</div>
                <div class="g-card-body">
                    <p><strong>Triade th√©rapeutique :</strong></p>
                    <ul class="g-list">
                        <li><strong>Exercice physique</strong> : r√©sistance 2-3x/semaine, √©quilibre, endurance</li>
                        <li><strong>Nutrition</strong> : prot√©ines <span class="g-hl">1.2-1.5 g/kg/j</span>, r√©parties sur 3 repas</li>
                        <li><strong>Vitamine D</strong> : 800-1000 UI/j si carence</li>
                    </ul>
                    <div class="g-alert success">‚úÖ <strong>Message cl√© :</strong> L'activit√© physique est le traitement le plus efficace de la sarcop√©nie</div>
                </div>
            </div>
        </div>
    </div>

    
    <div class="guide-page" id="guide-iu">
        <div class="guide-hdr">
            <button class="btn-back" onclick="closeGuide()">‚Üê</button>
            <div class="guide-hdr-info">
                <div class="guide-hdr-title">Infection urinaire</div>
                <div class="guide-hdr-sub">SPILF 2024</div>
            </div>
        </div>
        <div class="guide-body">
            <div class="g-alert danger">üö´ <strong>R√®gle d'or :</strong> Bact√©riurie asymptomatique = NE PAS TRAITER (sauf grossesse ou geste urologique)</div>
            
            <div class="g-card">
                <div class="g-card-hdr">üìä √âpid√©miologie</div>
                <div class="g-card-body">
                    <ul class="g-list">
                        <li>1√®re cause d'antibioth√©rapie inappropri√©e chez la PA</li>
                        <li>Bact√©riurie asymptomatique : 25-50% en institution</li>
                        <li>Colonisation urinaire tr√®s fr√©quente sur sonde</li>
                    </ul>
                </div>
            </div>
            
            <div class="g-card">
                <div class="g-card-hdr">‚ùå Ce qui N'EST PAS un signe d'IU</div>
                <div class="g-card-body">
                    <ul class="g-list">
                        <li>Urines malodorantes ou troubles</li>
                        <li>Confusion isol√©e (sans autre signe)</li>
                        <li>Chute isol√©e</li>
                        <li>Alt√©ration de l'√©tat g√©n√©ral non sp√©cifique</li>
                    </ul>
                    <div class="g-alert warning">‚ö†Ô∏è Une BU positive chez un PA confus ne suffit PAS √† traiter !</div>
                </div>
            </div>
            
            <div class="g-card">
                <div class="g-card-hdr">‚úÖ Vrais signes d'IU</div>
                <div class="g-card-body">
                    <p><strong>Cystite :</strong></p>
                    <ul class="g-list">
                        <li>Br√ªlures mictionnelles</li>
                        <li>Pollakiurie</li>
                        <li>Urgenturie</li>
                        <li>Incontinence d'apparition r√©cente</li>
                    </ul>
                    
                    <p><strong>Py√©lon√©phrite :</strong></p>
                    <ul class="g-list">
                        <li>Fi√®vre</li>
                        <li>Douleur lombaire</li>
                        <li>¬± signes de cystite</li>
                    </ul>
                </div>
            </div>
            
            <div class="g-card">
                <div class="g-card-hdr">‚ö†Ô∏è Facteurs de complication</div>
                <div class="g-card-body">
                    <ul class="g-list">
                        <li>√Çge &gt;75 ans OU &gt;65 ans + ‚â•3 crit√®res de Fried</li>
                        <li>Anomalie de l'arbre urinaire</li>
                        <li>Insuffisance r√©nale s√©v√®re (DFG &lt;30)</li>
                        <li>Immunod√©pression s√©v√®re</li>
                    </ul>
                </div>
            </div>
            
            <div class="g-card">
                <div class="g-card-hdr">üíä Antibioth√©rapie - Cystite √† risque de complication</div>
                <div class="g-card-body">
                    <p><strong>Privil√©gier traitement diff√©r√© selon antibiogramme</strong></p>
                    <table class="g-table">
                        <tbody><tr><th>Choix</th><th>Mol√©cule</th><th>Posologie</th></tr>
                        <tr><td>1er</td><td>Amoxicilline</td><td>1g x3/j - 7 jours</td></tr>
                        <tr><td>2e</td><td>Pivm√©cillinam</td><td>400mg x2/j - 7 jours</td></tr>
                        <tr><td>3e</td><td>Nitrofuranto√Øne</td><td>100mg x3/j - 7 jours</td></tr>
                    </tbody></table>
                    <div class="g-alert danger">üö´ <strong>Fluoroquinolones</strong> en dernier recours : risque tendinopathie, confusion, C. difficile</div>
                </div>
            </div>
        </div>
    </div>

    
    <div class="guide-page" id="guide-egs">
        <div class="guide-hdr">
            <button class="btn-back" onclick="closeGuide()">‚Üê</button>
            <div class="guide-hdr-info">
                <div class="guide-hdr-title">√âvaluation G√©riatrique Standardis√©e</div>
                <div class="guide-hdr-sub">EGS - SFGG 2023</div>
            </div>
        </div>
        <div class="guide-body">
            <div class="g-alert success">üí° L'EGS est une approche multidimensionnelle visant √† √©valuer les capacit√©s et probl√®mes m√©dicaux, psychosociaux et fonctionnels de la personne √¢g√©e.</div>
            
            <div class="g-card">
                <div class="g-card-hdr">üìã Les 8 domaines de l'EGS</div>
                <div class="g-card-body">
                    <ul class="g-list">
                        <li><strong>Autonomie :</strong> ADL, IADL</li>
                        <li><strong>Cognition :</strong> MMSE, Test horloge, 5 mots</li>
                        <li><strong>Thymie :</strong> GDS-15, Mini-GDS</li>
                        <li><strong>Nutrition :</strong> MNA, IMC, Albumine</li>
                        <li><strong>Mobilit√© :</strong> Get Up &amp; Go, Tinetti, SPPB</li>
                        <li><strong>Risque de chutes :</strong> Ant√©c√©dents, peur, √©quilibre</li>
                        <li><strong>Comorbidit√©s :</strong> Charlson, CIRS-G</li>
                        <li><strong>Social :</strong> Aidants, isolement, Zarit</li>
                    </ul>
                </div>
            </div>
            
            <div class="g-card">
                <div class="g-card-hdr">üéØ Indications de l'EGS</div>
                <div class="g-card-body">
                    <ul class="g-list">
                        <li>Patient ‚â• 75 ans hospitalis√©</li>
                        <li>Patient fragile ou pr√©-fragile (Fried)</li>
                        <li>Perte d'autonomie r√©cente</li>
                        <li>Chutes r√©p√©t√©es</li>
                        <li>D√©nutrition</li>
                        <li>Polym√©dication (&gt; 5 m√©dicaments)</li>
                        <li>Troubles cognitifs</li>
                        <li>Oncog√©riatrie : G8 ‚â§ 14</li>
                    </ul>
                </div>
            </div>
            
            <div class="g-card">
                <div class="g-card-hdr">‚è±Ô∏è EGS rapide (screening)</div>
                <div class="g-card-body">
                    <table class="g-table">
                        <tbody><tr><th>Domaine</th><th>Test rapide</th><th>Seuil</th></tr>
                        <tr><td>Autonomie</td><td>IADL 4 items</td><td>&lt; 4</td></tr>
                        <tr><td>Cognition</td><td>Mini-Cog ou horloge</td><td>Anormal</td></tr>
                        <tr><td>Thymie</td><td>Mini-GDS</td><td>‚â• 1</td></tr>
                        <tr><td>Nutrition</td><td>MNA-SF</td><td>‚â§ 11</td></tr>
                        <tr><td>Mobilit√©</td><td>Get Up &amp; Go</td><td>&gt; 20 sec</td></tr>
                    </tbody></table>
                </div>
            </div>
            
            <div class="g-card">
                <div class="g-card-hdr">üìä Scores disponibles dans MedApp</div>
                <div class="g-card-body">
                    <p><strong>Autonomie :</strong> ADL (Katz), IADL (Lawton)</p>
                    <p><strong>Cognition :</strong> MMSE, Test horloge</p>
                    <p><strong>Thymie :</strong> GDS-15, Mini-GDS</p>
                    <p><strong>Nutrition :</strong> MNA, MNA-SF</p>
                    <p><strong>Fragilit√© :</strong> Fried, G8</p>
                    <p><strong>Comorbidit√©s :</strong> Charlson</p>
                    <p><strong>Mobilit√© :</strong> Get Up &amp; Go, Tinetti</p>
                    <p><strong>Escarres :</strong> Braden, Norton</p>
                    <div class="g-alert warning">üí° Tous ces scores sont calculables dans l'onglet "Calculs" ‚Üí cat√©gorie "G√©riatrie"</div>
                </div>
            </div>
        </div>
    </div>

    
    <div class="guide-page" id="guide-douleur">
        <div class="guide-hdr">
            <button class="btn-back" onclick="closeGuide()">‚Üê</button>
            <div class="guide-hdr-info">
                <div class="guide-hdr-title">Douleur du sujet √¢g√©</div>
                <div class="guide-hdr-sub">SFETD / HAS</div>
            </div>
        </div>
        <div class="guide-body">
            <div class="g-alert danger">‚ö†Ô∏è La douleur est sous-√©valu√©e et sous-trait√©e chez la personne √¢g√©e. 50-80% des PA en institution ont des douleurs chroniques.</div>
            
            <div class="g-card">
                <div class="g-card-hdr">üìä √âchelles d'√©valuation</div>
                <div class="g-card-body">
                    <p><strong>Patient communicant :</strong></p>
                    <ul class="g-list">
                        <li>EVA (√âchelle Visuelle Analogique)</li>
                        <li>EN (√âchelle Num√©rique 0-10)</li>
                        <li>EVS (√âchelle Verbale Simple)</li>
                    </ul>
                    <p><strong>Patient non communicant :</strong></p>
                    <ul class="g-list">
                        <li><strong>ALGOPLUS</strong> (5 items, seuil ‚â• 2)</li>
                        <li>ECPA (comportement, repos, soins)</li>
                        <li>DOLOPLUS-2 (10 items)</li>
                    </ul>
                </div>
            </div>
            
            <div class="g-card">
                <div class="g-card-hdr">üíä Paliers antalgiques adapt√©s</div>
                <div class="g-card-body">
                    <table class="g-table">
                        <tbody><tr><th>Palier</th><th>Mol√©cule</th><th>Adaptation PA</th></tr>
                        <tr><td>I</td><td>Parac√©tamol</td><td>Max 3g/j si &gt; 75 ans</td></tr>
                        <tr><td>I</td><td>AINS</td><td>‚ö†Ô∏è √âVITER (IR, HTA, UGD)</td></tr>
                        <tr><td>II</td><td>Tramadol</td><td>D√©buter 50mg, risque confusion</td></tr>
                        <tr><td>II</td><td>Cod√©ine</td><td>Constipation ++, d√©buter faible</td></tr>
                        <tr><td>III</td><td>Morphine</td><td>D√©buter 2.5-5mg/4h, titrer</td></tr>
                    </tbody></table>
                </div>
            </div>
            
            <div class="g-card">
                <div class="g-card-hdr">‚ö†Ô∏è Pr√©cautions sp√©cifiques</div>
                <div class="g-card-body">
                    <ul class="g-list">
                        <li><strong>Fonction r√©nale :</strong> Adapter doses, √©viter AINS</li>
                        <li><strong>Opio√Ødes :</strong> Laxatifs syst√©matiques, d√©buter bas</li>
                        <li><strong>Interactions :</strong> Attention psychotropes + opio√Ødes</li>
                        <li><strong>Confusion :</strong> Opio√Ødes peuvent induire un d√©lirium</li>
                        <li><strong>Constipation :</strong> Pr√©vention syst√©matique</li>
                    </ul>
                    <div class="g-alert success">üí° R√®gle : "Start low, go slow" - D√©buter bas, augmenter lentement</div>
                </div>
            </div>
        </div>
    </div>

    
    <div class="section-medchat" id="sectionMedchat">
        <div class="chat-container">
            <div class="chat-header">
                <div class="chat-header-title">ü§ñ Assistant Clinique MedChat</div>
                <div class="chat-header-subtitle">Sp√©cialis√© g√©riatrie ‚Ä¢ Guidelines HAS/SFGG ‚Ä¢ Scores cliniques</div>
            </div>
            
            <div class="chat-disclaimer">
                <span class="chat-disclaimer-icon">‚ö†Ô∏è</span>
                <span>Cet assistant est une aide √† la d√©cision clinique. Il ne remplace pas le jugement m√©dical. V√©rifiez toujours les informations et adaptez-les au contexte du patient.</span>
            </div>
            
            <div class="chat-messages" id="chatMessages">
                <div class="chat-message assistant">
                    <div class="chat-avatar">ü§ñ</div>
                    <div class="chat-bubble">
                        <p>Bonjour ! Je suis votre assistant clinique sp√©cialis√© en <strong>g√©riatrie</strong>.</p>
                        <p>Je peux vous aider avec :</p>
                        <ul>
                            <li>Les <strong>scores cliniques</strong> (CHA‚ÇÇDS‚ÇÇ-VASc, Cockcroft, STOPP-START...)</li>
                            <li>Les <strong>guidelines</strong> HAS, SFGG, SPILF</li>
                            <li>Les <strong>syndromes g√©riatriques</strong> (d√©lirium, chutes, fragilit√©...)</li>
                            <li>L'<strong>adaptation des traitements</strong> chez le sujet √¢g√©</li>
                        </ul>
                        <p>Comment puis-je vous aider ?</p>
                    </div>
                </div>
            </div>
            
            <div class="chat-suggestions" id="chatSuggestions">
                <button class="chat-suggestion" onclick="askSuggestion('Quand utiliser le score CHA‚ÇÇDS‚ÇÇ-VASc ?')">Score CHA‚ÇÇDS‚ÇÇ-VASc</button>
                <button class="chat-suggestion" onclick="askSuggestion('Crit√®res de fragilit√© de Fried ?')">Crit√®res de Fried</button>
                <button class="chat-suggestion" onclick="askSuggestion('CAM pour le d√©lirium ?')">Score CAM</button>
                <button class="chat-suggestion" onclick="askSuggestion('STOPP-START : m√©dicaments √† √©viter ?')">STOPP-START</button>
                <button class="chat-suggestion" onclick="askSuggestion('Bilan de chutes r√©p√©t√©es ?')">Bilan chutes</button>
            </div>
            
            <div class="chat-input-container">
                <div class="chat-input-wrapper">
                    <textarea class="chat-input" id="chatInput" placeholder="Posez votre question clinique..." rows="1" onkeydown="handleChatKeydown(event)"></textarea>
                    <button class="chat-send-btn" id="chatSendBtn" onclick="sendMessage()">‚û§</button>
                </div>
            </div>
        </div>
    </div>

    
    
    
    <div class="calc-page" id="calc-cg">
        <div class="calc-header">
            <button class="btn-back" onclick="closeCalc()">‚Üê</button>
            <div class="calc-header-info">
                <div class="calc-header-title">Clairance Cr√©atinine</div>
                <div class="calc-header-sub">Cockcroft-Gault</div>
            </div>
            <button class="btn-fav active" onclick="toggleFav('cg')">‚≠ê</button>
        </div>
        <div class="calc-body">
            <div class="form-card">
                <div class="form-title">üë§ Patient</div>
                <div class="form-group">
                    <label class="form-label">Sexe</label>
                    <div class="radio-group">
                        <label class="radio-opt selected" onclick="selectRadio(this,'cg-sex')"><input type="radio" name="cg-sex" value="M" checked=""><span class="radio-label">üë® Homme</span></label>
                        <label class="radio-opt" onclick="selectRadio(this,'cg-sex')"><input type="radio" name="cg-sex" value="F"><span class="radio-label">üë© Femme</span></label>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">√Çge <span>(ann√©es)</span></label>
                    <div class="input-unit" data-unit="ans"><input type="number" class="form-input" id="cg-age" placeholder="65" oninput="calcCG()"></div>
                </div>
                <div class="form-group">
                    <label class="form-label">Poids <span>(kg)</span></label>
                    <div class="input-unit" data-unit="kg"><input type="number" class="form-input" id="cg-poids" placeholder="70" oninput="calcCG()"></div>
                </div>
                <div class="form-group">
                    <label class="form-label">Cr√©atinin√©mie <span>(¬µmol/L)</span></label>
                    <div class="input-unit" data-unit="¬µmol/L"><input type="number" class="form-input" id="cg-creat" placeholder="88" oninput="calcCG()"></div>
                </div>
            </div>
            <div class="result-card" id="cg-result">
                <div class="result-label">Clairance estim√©e</div>
                <div class="result-value" id="cg-val">--</div>
                <div class="result-unit">mL/min</div>
                <div class="result-interp" id="cg-interp"></div>
            </div>
        </div>
    </div>
    
    
    <div class="calc-page" id="calc-imc">
        <div class="calc-header">
            <button class="btn-back" onclick="closeCalc()">‚Üê</button>
            <div class="calc-header-info">
                <div class="calc-header-title">IMC</div>
                <div class="calc-header-sub">Indice de Masse Corporelle</div>
            </div>
            <button class="btn-fav active" onclick="toggleFav('imc')">‚≠ê</button>
        </div>
        <div class="calc-body">
            <div class="form-card">
                <div class="form-title">üìê Mesures</div>
                <div class="form-group">
                    <label class="form-label">Taille <span>(cm)</span></label>
                    <div class="input-unit" data-unit="cm"><input type="number" class="form-input" id="imc-taille" placeholder="175" oninput="calcIMC()"></div>
                </div>
                <div class="form-group">
                    <label class="form-label">Poids <span>(kg)</span></label>
                    <div class="input-unit" data-unit="kg"><input type="number" class="form-input" id="imc-poids" placeholder="70" oninput="calcIMC()"></div>
                </div>
            </div>
            <div class="result-card" id="imc-result">
                <div class="result-label">IMC</div>
                <div class="result-value" id="imc-val">--</div>
                <div class="result-unit">kg/m¬≤</div>
                <div class="result-interp" id="imc-interp"></div>
            </div>
        </div>
    </div>
    
    
    <div class="calc-page" id="calc-glasgow">
        <div class="calc-header">
            <button class="btn-back" onclick="closeCalc()">‚Üê</button>
            <div class="calc-header-info">
                <div class="calc-header-title">Score de Glasgow</div>
                <div class="calc-header-sub">√âtat de conscience</div>
            </div>
            <button class="btn-fav active" onclick="toggleFav('glasgow')">‚≠ê</button>
        </div>
        <div class="calc-body">
            <div class="form-card">
                <div class="form-title">üëÅÔ∏è Ouverture des yeux (Y)</div>
                <div class="score-opts" id="gla-y">
                    <div class="score-opt" onclick="selectScore(this,'gla-y');calcGlasgow()" data-val="4"><div class="score-num">4</div><div class="score-text">Spontan√©e</div></div>
                    <div class="score-opt" onclick="selectScore(this,'gla-y');calcGlasgow()" data-val="3"><div class="score-num">3</div><div class="score-text">√Ä la demande</div></div>
                    <div class="score-opt" onclick="selectScore(this,'gla-y');calcGlasgow()" data-val="2"><div class="score-num">2</div><div class="score-text">√Ä la douleur</div></div>
                    <div class="score-opt" onclick="selectScore(this,'gla-y');calcGlasgow()" data-val="1"><div class="score-num">1</div><div class="score-text">Aucune</div></div>
                </div>
            </div>
            <div class="form-card">
                <div class="form-title">üí¨ R√©ponse verbale (V)</div>
                <div class="score-opts" id="gla-v">
                    <div class="score-opt" onclick="selectScore(this,'gla-v');calcGlasgow()" data-val="5"><div class="score-num">5</div><div class="score-text">Orient√©e</div></div>
                    <div class="score-opt" onclick="selectScore(this,'gla-v');calcGlasgow()" data-val="4"><div class="score-num">4</div><div class="score-text">Confuse</div></div>
                    <div class="score-opt" onclick="selectScore(this,'gla-v');calcGlasgow()" data-val="3"><div class="score-num">3</div><div class="score-text">Inappropri√©e</div></div>
                    <div class="score-opt" onclick="selectScore(this,'gla-v');calcGlasgow()" data-val="2"><div class="score-num">2</div><div class="score-text">Incompr√©hensible</div></div>
                    <div class="score-opt" onclick="selectScore(this,'gla-v');calcGlasgow()" data-val="1"><div class="score-num">1</div><div class="score-text">Aucune</div></div>
                </div>
            </div>
            <div class="form-card">
                <div class="form-title">üí™ R√©ponse motrice (M)</div>
                <div class="score-opts" id="gla-m">
                    <div class="score-opt" onclick="selectScore(this,'gla-m');calcGlasgow()" data-val="6"><div class="score-num">6</div><div class="score-text">Ob√©it aux ordres</div></div>
                    <div class="score-opt" onclick="selectScore(this,'gla-m');calcGlasgow()" data-val="5"><div class="score-num">5</div><div class="score-text">Localise la douleur</div></div>
                    <div class="score-opt" onclick="selectScore(this,'gla-m');calcGlasgow()" data-val="4"><div class="score-num">4</div><div class="score-text">√âvitement</div></div>
                    <div class="score-opt" onclick="selectScore(this,'gla-m');calcGlasgow()" data-val="3"><div class="score-num">3</div><div class="score-text">Flexion anormale</div></div>
                    <div class="score-opt" onclick="selectScore(this,'gla-m');calcGlasgow()" data-val="2"><div class="score-num">2</div><div class="score-text">Extension</div></div>
                    <div class="score-opt" onclick="selectScore(this,'gla-m');calcGlasgow()" data-val="1"><div class="score-num">1</div><div class="score-text">Aucune</div></div>
                </div>
            </div>
            <div class="result-card" id="gla-result">
                <div class="result-label">Score de Glasgow</div>
                <div class="result-value" id="gla-val">--</div>
                <div class="result-unit">/ 15</div>
                <div class="result-interp" id="gla-interp"></div>
            </div>
        </div>
    </div>
    
    
    <div class="calc-page" id="calc-qsofa">
        <div class="calc-header">
            <button class="btn-back" onclick="closeCalc()">‚Üê</button>
            <div class="calc-header-info">
                <div class="calc-header-title">qSOFA</div>
                <div class="calc-header-sub">Quick SOFA - D√©pistage sepsis</div>
            </div>
            <button class="btn-fav active" onclick="toggleFav('qsofa')">‚≠ê</button>
        </div>
        <div class="calc-body">
            <div class="form-card">
                <div class="form-title">üìã Crit√®res</div>
                <div class="check-list">
                    <div class="check-opt" onclick="toggleCheck(this);calcQsofa()"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title">Fr√©quence respiratoire ‚â• 22/min</div><div class="check-pts">+1 point</div></div></div>
                    <div class="check-opt" onclick="toggleCheck(this);calcQsofa()"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title">Alt√©ration de la conscience (Glasgow &lt; 15)</div><div class="check-pts">+1 point</div></div></div>
                    <div class="check-opt" onclick="toggleCheck(this);calcQsofa()"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title">Pression art√©rielle systolique ‚â§ 100 mmHg</div><div class="check-pts">+1 point</div></div></div>
                </div>
            </div>
            <div class="result-card has-result" id="qsofa-result">
                <div class="result-label">Score qSOFA</div>
                <div class="result-value" id="qsofa-val">0</div>
                <div class="result-unit">/ 3</div>
                <div class="result-interp show normal" id="qsofa-interp">‚úì Risque faible</div>
            </div>
        </div>
    </div>
    
    
    <div class="calc-page" id="calc-chads">
        <div class="calc-header">
            <button class="btn-back" onclick="closeCalc()">‚Üê</button>
            <div class="calc-header-info">
                <div class="calc-header-title">CHA‚ÇÇDS‚ÇÇ-VASc</div>
                <div class="calc-header-sub">Risque AVC dans la FA</div>
            </div>
            <button class="btn-fav active" onclick="toggleFav('chads')">‚≠ê</button>
        </div>
        <div class="calc-body">
            <div class="form-card">
                <div class="form-title">üìã Crit√®res</div>
                <div class="check-list" id="chads-list">
                    <div class="check-opt" onclick="toggleCheck(this);calcChads()" data-pts="1"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title"><strong>C</strong> - Insuffisance cardiaque / FEVG ‚â§ 40%</div><div class="check-pts">+1</div></div></div>
                    <div class="check-opt" onclick="toggleCheck(this);calcChads()" data-pts="1"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title"><strong>H</strong> - Hypertension art√©rielle</div><div class="check-pts">+1</div></div></div>
                    <div class="check-opt" onclick="toggleCheck(this);calcChads()" data-pts="2"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title"><strong>A‚ÇÇ</strong> - √Çge ‚â• 75 ans</div><div class="check-pts">+2</div></div></div>
                    <div class="check-opt" onclick="toggleCheck(this);calcChads()" data-pts="1"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title"><strong>D</strong> - Diab√®te</div><div class="check-pts">+1</div></div></div>
                    <div class="check-opt" onclick="toggleCheck(this);calcChads()" data-pts="2"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title"><strong>S‚ÇÇ</strong> - AVC / AIT / Embolie</div><div class="check-pts">+2</div></div></div>
                    <div class="check-opt" onclick="toggleCheck(this);calcChads()" data-pts="1"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title"><strong>V</strong> - Maladie vasculaire</div><div class="check-pts">+1</div></div></div>
                    <div class="check-opt" onclick="toggleCheck(this);calcChads()" data-pts="1"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title"><strong>A</strong> - √Çge 65-74 ans</div><div class="check-pts">+1</div></div></div>
                    <div class="check-opt" onclick="toggleCheck(this);calcChads()" data-pts="1"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title"><strong>Sc</strong> - Sexe f√©minin</div><div class="check-pts">+1</div></div></div>
                </div>
            </div>
            <div class="result-card has-result" id="chads-result">
                <div class="result-label">Score CHA‚ÇÇDS‚ÇÇ-VASc</div>
                <div class="result-value" id="chads-val">0</div>
                <div class="result-unit">/ 9</div>
                <div class="result-interp show normal" id="chads-interp">‚úì Risque faible</div>
            </div>
        </div>
    </div>
    
    
    <div class="calc-page" id="calc-wellsep">
        <div class="calc-header">
            <button class="btn-back" onclick="closeCalc()">‚Üê</button>
            <div class="calc-header-info">
                <div class="calc-header-title">Score Wells EP</div>
                <div class="calc-header-sub">Probabilit√© embolie pulmonaire</div>
            </div>
            <button class="btn-fav active" onclick="toggleFav('wellsep')">‚≠ê</button>
        </div>
        <div class="calc-body">
            <div class="form-card">
                <div class="form-title">üìã Crit√®res</div>
                <div class="check-list" id="wellsep-list">
                    <div class="check-opt" onclick="toggleCheck(this);calcWellsEP()" data-pts="3"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title">Signes cliniques de TVP</div><div class="check-pts">+3</div></div></div>
                    <div class="check-opt" onclick="toggleCheck(this);calcWellsEP()" data-pts="3"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title">Diagnostic alternatif moins probable</div><div class="check-pts">+3</div></div></div>
                    <div class="check-opt" onclick="toggleCheck(this);calcWellsEP()" data-pts="1.5"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title">FC &gt; 100/min</div><div class="check-pts">+1.5</div></div></div>
                    <div class="check-opt" onclick="toggleCheck(this);calcWellsEP()" data-pts="1.5"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title">Immobilisation ‚â•3j ou chirurgie &lt;4 sem</div><div class="check-pts">+1.5</div></div></div>
                    <div class="check-opt" onclick="toggleCheck(this);calcWellsEP()" data-pts="1.5"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title">ATCD TVP ou EP</div><div class="check-pts">+1.5</div></div></div>
                    <div class="check-opt" onclick="toggleCheck(this);calcWellsEP()" data-pts="1"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title">H√©moptysie</div><div class="check-pts">+1</div></div></div>
                    <div class="check-opt" onclick="toggleCheck(this);calcWellsEP()" data-pts="1"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title">Cancer actif</div><div class="check-pts">+1</div></div></div>
                </div>
            </div>
            <div class="result-card has-result" id="wellsep-result">
                <div class="result-label">Score Wells EP</div>
                <div class="result-value" id="wellsep-val">0</div>
                <div class="result-unit">points</div>
                <div class="result-interp show normal" id="wellsep-interp">‚úì EP improbable ‚Üí D-dim√®res</div>
            </div>
        </div>
    </div>

    
    <div class="calc-page" id="calc-ckdepi">
        <div class="calc-header">
            <button class="btn-back" onclick="closeCalc()">‚Üê</button>
            <div class="calc-header-info"><div class="calc-header-title">DFG CKD-EPI</div><div class="calc-header-sub">CKD-EPI 2021</div></div>
            <button class="btn-fav" onclick="toggleFav('ckdepi')">‚≠ê</button>
        </div>
        <div class="calc-body">
            <div class="form-card">
                <div class="form-title">üë§ Patient</div>
                <div class="form-group"><label class="form-label">Sexe</label><div class="radio-group"><label class="radio-opt selected" onclick="selectRadio(this,'ckdepi-sex')"><input type="radio" name="ckdepi-sex" value="M" checked=""><span class="radio-label">üë® Homme</span></label><label class="radio-opt" onclick="selectRadio(this,'ckdepi-sex')"><input type="radio" name="ckdepi-sex" value="F"><span class="radio-label">üë© Femme</span></label></div></div>
                <div class="form-group"><label class="form-label">√Çge</label><div class="input-unit" data-unit="ans"><input type="number" class="form-input" id="ckdepi-age" placeholder="65" oninput="calcCKDEPI()"></div></div>
                <div class="form-group"><label class="form-label">Cr√©atinin√©mie</label><div class="input-unit" data-unit="¬µmol/L"><input type="number" class="form-input" id="ckdepi-creat" placeholder="88" oninput="calcCKDEPI()"></div></div>
            </div>
            <div class="result-card" id="ckdepi-result"><div class="result-label">DFG estim√©</div><div class="result-value" id="ckdepi-val">--</div><div class="result-unit">mL/min/1.73m¬≤</div><div class="result-interp" id="ckdepi-interp"></div></div>
        </div>
    </div>

    
    <div class="calc-page" id="calc-nacorr">
        <div class="calc-header">
            <button class="btn-back" onclick="closeCalc()">‚Üê</button>
            <div class="calc-header-info"><div class="calc-header-title">Natr√©mie corrig√©e</div><div class="calc-header-sub">Correction pour hyperglyc√©mie</div></div>
            <button class="btn-fav" onclick="toggleFav('nacorr')">‚≠ê</button>
        </div>
        <div class="calc-body">
            <div class="form-card">
                <div class="form-title">üß™ Biologie</div>
                <div class="form-group"><label class="form-label">Natr√©mie mesur√©e</label><div class="input-unit" data-unit="mmol/L"><input type="number" class="form-input" id="nacorr-na" placeholder="135" oninput="calcNaCorr()"></div></div>
                <div class="form-group"><label class="form-label">Glyc√©mie</label><div class="input-unit" data-unit="mmol/L"><input type="number" class="form-input" id="nacorr-glyc" placeholder="5" oninput="calcNaCorr()"></div></div>
            </div>
            <div class="result-card" id="nacorr-result"><div class="result-label">Natr√©mie corrig√©e</div><div class="result-value" id="nacorr-val">--</div><div class="result-unit">mmol/L</div><div class="result-interp" id="nacorr-interp"></div></div>
        </div>
    </div>

    
    <div class="calc-page" id="calc-osmo">
        <div class="calc-header">
            <button class="btn-back" onclick="closeCalc()">‚Üê</button>
            <div class="calc-header-info"><div class="calc-header-title">Osmolarit√© plasmatique</div><div class="calc-header-sub">Osmolarit√© calcul√©e</div></div>
            <button class="btn-fav" onclick="toggleFav('osmo')">‚≠ê</button>
        </div>
        <div class="calc-body">
            <div class="form-card">
                <div class="form-title">üß™ Biologie</div>
                <div class="form-group"><label class="form-label">Natr√©mie</label><div class="input-unit" data-unit="mmol/L"><input type="number" class="form-input" id="osmo-na" placeholder="140" oninput="calcOsmo()"></div></div>
                <div class="form-group"><label class="form-label">Glyc√©mie</label><div class="input-unit" data-unit="mmol/L"><input type="number" class="form-input" id="osmo-glyc" placeholder="5" oninput="calcOsmo()"></div></div>
                <div class="form-group"><label class="form-label">Ur√©e</label><div class="input-unit" data-unit="mmol/L"><input type="number" class="form-input" id="osmo-uree" placeholder="5" oninput="calcOsmo()"></div></div>
            </div>
            <div class="result-card" id="osmo-result"><div class="result-label">Osmolarit√©</div><div class="result-value" id="osmo-val">--</div><div class="result-unit">mOsm/L</div><div class="result-interp" id="osmo-interp"></div></div>
        </div>
    </div>

    
    <div class="calc-page" id="calc-ta">
        <div class="calc-header">
            <button class="btn-back" onclick="closeCalc()">‚Üê</button>
            <div class="calc-header-info"><div class="calc-header-title">Trou anionique</div><div class="calc-header-sub">Anion gap</div></div>
            <button class="btn-fav" onclick="toggleFav('ta')">‚≠ê</button>
        </div>
        <div class="calc-body">
            <div class="form-card">
                <div class="form-title">üß™ Ionogramme</div>
                <div class="form-group"><label class="form-label">Natr√©mie (Na+)</label><div class="input-unit" data-unit="mmol/L"><input type="number" class="form-input" id="ta-na" placeholder="140" oninput="calcTA()"></div></div>
                <div class="form-group"><label class="form-label">Chlor√©mie (Cl-)</label><div class="input-unit" data-unit="mmol/L"><input type="number" class="form-input" id="ta-cl" placeholder="105" oninput="calcTA()"></div></div>
                <div class="form-group"><label class="form-label">Bicarbonates (HCO3-)</label><div class="input-unit" data-unit="mmol/L"><input type="number" class="form-input" id="ta-hco3" placeholder="24" oninput="calcTA()"></div></div>
            </div>
            <div class="result-card" id="ta-result"><div class="result-label">Trou anionique</div><div class="result-value" id="ta-val">--</div><div class="result-unit">mmol/L</div><div class="result-interp" id="ta-interp"></div></div>
        </div>
    </div>

    
    <div class="calc-page" id="calc-cacorr">
        <div class="calc-header">
            <button class="btn-back" onclick="closeCalc()">‚Üê</button>
            <div class="calc-header-info"><div class="calc-header-title">Calc√©mie corrig√©e</div><div class="calc-header-sub">Correction pour albumine</div></div>
            <button class="btn-fav" onclick="toggleFav('cacorr')">‚≠ê</button>
        </div>
        <div class="calc-body">
            <div class="form-card">
                <div class="form-title">üß™ Biologie</div>
                <div class="form-group"><label class="form-label">Calc√©mie mesur√©e</label><div class="input-unit" data-unit="mmol/L"><input type="number" step="0.01" class="form-input" id="cacorr-ca" placeholder="2.4" oninput="calcCaCorr()"></div></div>
                <div class="form-group"><label class="form-label">Albumin√©mie</label><div class="input-unit" data-unit="g/L"><input type="number" class="form-input" id="cacorr-alb" placeholder="40" oninput="calcCaCorr()"></div></div>
            </div>
            <div class="result-card" id="cacorr-result"><div class="result-label">Calc√©mie corrig√©e</div><div class="result-value" id="cacorr-val">--</div><div class="result-unit">mmol/L</div><div class="result-interp" id="cacorr-interp"></div></div>
        </div>
    </div>

    
    <div class="calc-page" id="calc-hasbled">
        <div class="calc-header">
            <button class="btn-back" onclick="closeCalc()">‚Üê</button>
            <div class="calc-header-info"><div class="calc-header-title">HAS-BLED</div><div class="calc-header-sub">Risque h√©morragique</div></div>
            <button class="btn-fav" onclick="toggleFav('hasbled')">‚≠ê</button>
        </div>
        <div class="calc-body">
            <div class="form-card">
                <div class="form-title">üìã Crit√®res</div>
                <div class="check-list" id="hasbled-list">
                    <div class="check-opt" onclick="toggleCheck(this);calcHASBLED()" data-pts="1"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title"><strong>H</strong> - HTA non contr√¥l√©e</div><div class="check-pts">+1</div></div></div>
                    <div class="check-opt" onclick="toggleCheck(this);calcHASBLED()" data-pts="1"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title"><strong>A</strong> - Anomalie r√©nale</div><div class="check-pts">+1</div></div></div>
                    <div class="check-opt" onclick="toggleCheck(this);calcHASBLED()" data-pts="1"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title"><strong>A</strong> - Anomalie h√©patique</div><div class="check-pts">+1</div></div></div>
                    <div class="check-opt" onclick="toggleCheck(this);calcHASBLED()" data-pts="1"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title"><strong>S</strong> - AVC</div><div class="check-pts">+1</div></div></div>
                    <div class="check-opt" onclick="toggleCheck(this);calcHASBLED()" data-pts="1"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title"><strong>B</strong> - Saignement</div><div class="check-pts">+1</div></div></div>
                    <div class="check-opt" onclick="toggleCheck(this);calcHASBLED()" data-pts="1"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title"><strong>L</strong> - INR labile</div><div class="check-pts">+1</div></div></div>
                    <div class="check-opt" onclick="toggleCheck(this);calcHASBLED()" data-pts="1"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title"><strong>E</strong> - √Çge &gt;65 ans</div><div class="check-pts">+1</div></div></div>
                    <div class="check-opt" onclick="toggleCheck(this);calcHASBLED()" data-pts="1"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title"><strong>D</strong> - Drugs (antiplaq/AINS)</div><div class="check-pts">+1</div></div></div>
                    <div class="check-opt" onclick="toggleCheck(this);calcHASBLED()" data-pts="1"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title"><strong>D</strong> - Alcool</div><div class="check-pts">+1</div></div></div>
                </div>
            </div>
            <div class="result-card has-result" id="hasbled-result"><div class="result-label">Score HAS-BLED</div><div class="result-value" id="hasbled-val">0</div><div class="result-unit">/ 9</div><div class="result-interp show normal" id="hasbled-interp">‚úì Risque faible</div></div>
        </div>
    </div>

    
    <div class="calc-page" id="calc-qtc">
        <div class="calc-header">
            <button class="btn-back" onclick="closeCalc()">‚Üê</button>
            <div class="calc-header-info"><div class="calc-header-title">QTc corrig√©</div><div class="calc-header-sub">Bazett &amp; Fridericia</div></div>
            <button class="btn-fav" onclick="toggleFav('qtc')">‚≠ê</button>
        </div>
        <div class="calc-body">
            <div class="form-card">
                <div class="form-title">üìä ECG</div>
                <div class="form-group"><label class="form-label">Intervalle QT mesur√©</label><div class="input-unit" data-unit="ms"><input type="number" class="form-input" id="qtc-qt" placeholder="400" oninput="calcQTc()"></div></div>
                <div class="form-group"><label class="form-label">Fr√©quence cardiaque</label><div class="input-unit" data-unit="bpm"><input type="number" class="form-input" id="qtc-fc" placeholder="70" oninput="calcQTc()"></div></div>
            </div>
            <div class="result-card" id="qtc-result"><div class="result-label">QTc Bazett</div><div class="result-value" id="qtc-val">--</div><div class="result-unit">ms</div><div class="result-interp" id="qtc-interp"></div></div>
        </div>
    </div>

    
    <div class="calc-page" id="calc-sofa">
        <div class="calc-header">
            <button class="btn-back" onclick="closeCalc()">‚Üê</button>
            <div class="calc-header-info"><div class="calc-header-title">Score SOFA</div><div class="calc-header-sub">D√©faillance d'organes</div></div>
            <button class="btn-fav" onclick="toggleFav('sofa')">‚≠ê</button>
        </div>
        <div class="calc-body">
            <div class="form-card"><div class="form-title">ü´Å Respiration (PaO2/FiO2)</div><select class="form-input sofa-select" onchange="calcSOFA()"><option value="0">‚â•400 (0)</option><option value="1">300-399 (1)</option><option value="2">200-299 (2)</option><option value="3">&lt;200+VM (3)</option><option value="4">&lt;100+VM (4)</option></select></div>
            <div class="form-card"><div class="form-title">üß† Neurologie (Glasgow)</div><select class="form-input sofa-select" onchange="calcSOFA()"><option value="0">15 (0)</option><option value="1">13-14 (1)</option><option value="2">10-12 (2)</option><option value="3">6-9 (3)</option><option value="4">&lt;6 (4)</option></select></div>
            <div class="form-card"><div class="form-title">‚ù§Ô∏è Cardiovasculaire</div><select class="form-input sofa-select" onchange="calcSOFA()"><option value="0">PAM ‚â•70 (0)</option><option value="1">PAM &lt;70 (1)</option><option value="2">Dopa ‚â§5 (2)</option><option value="3">Dopa &gt;5 (3)</option><option value="4">NA &gt;0.1 (4)</option></select></div>
            <div class="form-card"><div class="form-title">üü° Foie (Bili ¬µmol/L)</div><select class="form-input sofa-select" onchange="calcSOFA()"><option value="0">&lt;20 (0)</option><option value="1">20-32 (1)</option><option value="2">33-101 (2)</option><option value="3">102-204 (3)</option><option value="4">&gt;204 (4)</option></select></div>
            <div class="form-card"><div class="form-title">ü©∏ Coagulation (Plaq G/L)</div><select class="form-input sofa-select" onchange="calcSOFA()"><option value="0">‚â•150 (0)</option><option value="1">100-149 (1)</option><option value="2">50-99 (2)</option><option value="3">20-49 (3)</option><option value="4">&lt;20 (4)</option></select></div>
            <div class="form-card"><div class="form-title">ü´ò Rein (Cr√©at ¬µmol/L)</div><select class="form-input sofa-select" onchange="calcSOFA()"><option value="0">&lt;110 (0)</option><option value="1">110-170 (1)</option><option value="2">171-299 (2)</option><option value="3">300-440 (3)</option><option value="4">&gt;440 (4)</option></select></div>
            <div class="result-card has-result" id="sofa-result"><div class="result-label">Score SOFA</div><div class="result-value" id="sofa-val">0</div><div class="result-unit">/ 24</div><div class="result-interp show normal" id="sofa-interp">‚úì Mortalit√© &lt;3%</div></div>
        </div>
    </div>

    
    <div class="calc-page" id="calc-news">
        <div class="calc-header">
            <button class="btn-back" onclick="closeCalc()">‚Üê</button>
            <div class="calc-header-info"><div class="calc-header-title">NEWS 2</div><div class="calc-header-sub">Early Warning Score</div></div>
            <button class="btn-fav" onclick="toggleFav('news')">‚≠ê</button>
        </div>
        <div class="calc-body">
            <div class="form-card"><div class="form-title">ü´Å FR</div><select class="form-input news-select" onchange="calcNEWS()"><option value="3">‚â§8 (3)</option><option value="1">9-11 (1)</option><option value="0" selected="">12-20 (0)</option><option value="2">21-24 (2)</option><option value="3">‚â•25 (3)</option></select></div>
            <div class="form-card"><div class="form-title">üí® SpO2</div><select class="form-input news-select" onchange="calcNEWS()"><option value="3">‚â§91% (3)</option><option value="2">92-93% (2)</option><option value="1">94-95% (1)</option><option value="0" selected="">‚â•96% (0)</option></select></div>
            <div class="form-card"><div class="form-title">üå°Ô∏è T¬∞</div><select class="form-input news-select" onchange="calcNEWS()"><option value="3">‚â§35.0 (3)</option><option value="1">35.1-36 (1)</option><option value="0" selected="">36.1-38 (0)</option><option value="1">38.1-39 (1)</option><option value="2">‚â•39.1 (2)</option></select></div>
            <div class="form-card"><div class="form-title">ü©∫ PAS</div><select class="form-input news-select" onchange="calcNEWS()"><option value="3">‚â§90 (3)</option><option value="2">91-100 (2)</option><option value="1">101-110 (1)</option><option value="0" selected="">111-219 (0)</option><option value="3">‚â•220 (3)</option></select></div>
            <div class="form-card"><div class="form-title">‚ù§Ô∏è FC</div><select class="form-input news-select" onchange="calcNEWS()"><option value="3">‚â§40 (3)</option><option value="1">41-50 (1)</option><option value="0" selected="">51-90 (0)</option><option value="1">91-110 (1)</option><option value="2">111-130 (2)</option><option value="3">‚â•131 (3)</option></select></div>
            <div class="form-card"><div class="form-title">üß† Conscience</div><select class="form-input news-select" onchange="calcNEWS()"><option value="0" selected="">Alerte (0)</option><option value="3">Confusion (3)</option></select></div>
            <div class="result-card has-result" id="news-result"><div class="result-label">Score NEWS 2</div><div class="result-value" id="news-val">0</div><div class="result-unit">/ 20</div><div class="result-interp show normal" id="news-interp">‚úì Risque faible</div></div>
        </div>
    </div>

    
    <div class="calc-page" id="calc-wellstvp">
        <div class="calc-header">
            <button class="btn-back" onclick="closeCalc()">‚Üê</button>
            <div class="calc-header-info"><div class="calc-header-title">Score Wells TVP</div><div class="calc-header-sub">Probabilit√© thrombose veineuse</div></div>
            <button class="btn-fav" onclick="toggleFav('wellstvp')">‚≠ê</button>
        </div>
        <div class="calc-body">
            <div class="form-card">
                <div class="form-title">üìã Crit√®res</div>
                <div class="check-list" id="wellstvp-list">
                    <div class="check-opt" onclick="toggleCheck(this);calcWellsTVP()" data-pts="1"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title">Cancer actif</div><div class="check-pts">+1</div></div></div>
                    <div class="check-opt" onclick="toggleCheck(this);calcWellsTVP()" data-pts="1"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title">Paralysie ou immobilisation MI</div><div class="check-pts">+1</div></div></div>
                    <div class="check-opt" onclick="toggleCheck(this);calcWellsTVP()" data-pts="1"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title">Alitement &gt;3j ou chirurgie &lt;12 sem</div><div class="check-pts">+1</div></div></div>
                    <div class="check-opt" onclick="toggleCheck(this);calcWellsTVP()" data-pts="1"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title">Douleur sur trajet veineux</div><div class="check-pts">+1</div></div></div>
                    <div class="check-opt" onclick="toggleCheck(this);calcWellsTVP()" data-pts="1"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title">≈íd√®me de tout le MI</div><div class="check-pts">+1</div></div></div>
                    <div class="check-opt" onclick="toggleCheck(this);calcWellsTVP()" data-pts="1"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title">Mollet gonfl√© &gt;3cm vs controlat√©ral</div><div class="check-pts">+1</div></div></div>
                    <div class="check-opt" onclick="toggleCheck(this);calcWellsTVP()" data-pts="1"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title">≈íd√®me prenant le godet</div><div class="check-pts">+1</div></div></div>
                    <div class="check-opt" onclick="toggleCheck(this);calcWellsTVP()" data-pts="1"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title">Veines collat√©rales</div><div class="check-pts">+1</div></div></div>
                    <div class="check-opt" onclick="toggleCheck(this);calcWellsTVP()" data-pts="1"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title">ATCD TVP</div><div class="check-pts">+1</div></div></div>
                    <div class="check-opt" onclick="toggleCheck(this);calcWellsTVP()" data-pts="-2"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title">Diagnostic alternatif aussi probable</div><div class="check-pts">-2</div></div></div>
                </div>
            </div>
            <div class="result-card has-result" id="wellstvp-result"><div class="result-label">Score Wells TVP</div><div class="result-value" id="wellstvp-val">0</div><div class="result-unit">points</div><div class="result-interp show normal" id="wellstvp-interp">‚úì TVP improbable</div></div>
        </div>
    </div>

    
    <div class="calc-page" id="calc-curb65">
        <div class="calc-header">
            <button class="btn-back" onclick="closeCalc()">‚Üê</button>
            <div class="calc-header-info"><div class="calc-header-title">CURB-65</div><div class="calc-header-sub">Gravit√© pneumopathie</div></div>
            <button class="btn-fav" onclick="toggleFav('curb65')">‚≠ê</button>
        </div>
        <div class="calc-body">
            <div class="form-card">
                <div class="form-title">üìã Crit√®res</div>
                <div class="check-list" id="curb65-list">
                    <div class="check-opt" onclick="toggleCheck(this);calcCURB65()" data-pts="1"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title"><strong>C</strong> - Confusion</div><div class="check-pts">+1</div></div></div>
                    <div class="check-opt" onclick="toggleCheck(this);calcCURB65()" data-pts="1"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title"><strong>U</strong> - Ur√©e &gt;7 mmol/L</div><div class="check-pts">+1</div></div></div>
                    <div class="check-opt" onclick="toggleCheck(this);calcCURB65()" data-pts="1"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title"><strong>R</strong> - FR ‚â•30/min</div><div class="check-pts">+1</div></div></div>
                    <div class="check-opt" onclick="toggleCheck(this);calcCURB65()" data-pts="1"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title"><strong>B</strong> - PAS &lt;90 ou PAD ‚â§60</div><div class="check-pts">+1</div></div></div>
                    <div class="check-opt" onclick="toggleCheck(this);calcCURB65()" data-pts="1"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title"><strong>65</strong> - √Çge ‚â•65 ans</div><div class="check-pts">+1</div></div></div>
                </div>
            </div>
            <div class="result-card has-result" id="curb65-result"><div class="result-label">Score CURB-65</div><div class="result-value" id="curb65-val">0</div><div class="result-unit">/ 5</div><div class="result-interp show normal" id="curb65-interp">‚úì Ambulatoire possible</div></div>
        </div>
    </div>

    
    <div class="calc-page" id="calc-fine">
        <div class="calc-header">
            <button class="btn-back" onclick="closeCalc()">‚Üê</button>
            <div class="calc-header-info"><div class="calc-header-title">Score Fine (PSI)</div><div class="calc-header-sub">Pneumonia Severity Index</div></div>
            <button class="btn-fav" onclick="toggleFav('fine')">‚≠ê</button>
        </div>
        <div class="calc-body">
            <div class="form-card">
                <div class="form-title">üë§ Patient</div>
                <div class="form-group"><label class="form-label">Sexe</label><div class="radio-group"><label class="radio-opt selected" onclick="selectRadio(this,'fine-sex');calcFine()"><input type="radio" name="fine-sex" value="M" checked=""><span class="radio-label">üë® Homme</span></label><label class="radio-opt" onclick="selectRadio(this,'fine-sex');calcFine()"><input type="radio" name="fine-sex" value="F"><span class="radio-label">üë© Femme (-10)</span></label></div></div>
                <div class="form-group"><label class="form-label">√Çge</label><div class="input-unit" data-unit="ans"><input type="number" class="form-input" id="fine-age" placeholder="65" oninput="calcFine()"></div></div>
            </div>
            <div class="form-card">
                <div class="form-title">üìã Crit√®res</div>
                <div class="check-list" id="fine-list">
                    <div class="check-opt" onclick="toggleCheck(this);calcFine()" data-pts="10"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title">Vie en institution</div><div class="check-pts">+10</div></div></div>
                    <div class="check-opt" onclick="toggleCheck(this);calcFine()" data-pts="30"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title">Cancer</div><div class="check-pts">+30</div></div></div>
                    <div class="check-opt" onclick="toggleCheck(this);calcFine()" data-pts="20"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title">Maladie h√©patique</div><div class="check-pts">+20</div></div></div>
                    <div class="check-opt" onclick="toggleCheck(this);calcFine()" data-pts="10"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title">Insuffisance cardiaque</div><div class="check-pts">+10</div></div></div>
                    <div class="check-opt" onclick="toggleCheck(this);calcFine()" data-pts="10"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title">Maladie c√©r√©brovasculaire</div><div class="check-pts">+10</div></div></div>
                    <div class="check-opt" onclick="toggleCheck(this);calcFine()" data-pts="10"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title">Maladie r√©nale</div><div class="check-pts">+10</div></div></div>
                    <div class="check-opt" onclick="toggleCheck(this);calcFine()" data-pts="20"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title">Confusion</div><div class="check-pts">+20</div></div></div>
                    <div class="check-opt" onclick="toggleCheck(this);calcFine()" data-pts="20"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title">FR ‚â•30/min</div><div class="check-pts">+20</div></div></div>
                    <div class="check-opt" onclick="toggleCheck(this);calcFine()" data-pts="20"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title">PAS &lt;90</div><div class="check-pts">+20</div></div></div>
                    <div class="check-opt" onclick="toggleCheck(this);calcFine()" data-pts="15"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title">T¬∞ &lt;35 ou ‚â•40</div><div class="check-pts">+15</div></div></div>
                    <div class="check-opt" onclick="toggleCheck(this);calcFine()" data-pts="10"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title">FC ‚â•125/min</div><div class="check-pts">+10</div></div></div>
                </div>
            </div>
            <div class="result-card" id="fine-result"><div class="result-label">Score Fine PSI</div><div class="result-value" id="fine-val">--</div><div class="result-unit">points</div><div class="result-interp" id="fine-interp"></div></div>
        </div>
    </div>

    
    <div class="calc-page" id="calc-child">
        <div class="calc-header">
            <button class="btn-back" onclick="closeCalc()">‚Üê</button>
            <div class="calc-header-info"><div class="calc-header-title">Child-Pugh</div><div class="calc-header-sub">Insuffisance h√©patique</div></div>
            <button class="btn-fav" onclick="toggleFav('child')">‚≠ê</button>
        </div>
        <div class="calc-body">
            <div class="form-card"><div class="form-title">üü° Bilirubine (¬µmol/L)</div><select class="form-input child-select" onchange="calcChild()"><option value="1">&lt;35 (1)</option><option value="2">35-50 (2)</option><option value="3">&gt;50 (3)</option></select></div>
            <div class="form-card"><div class="form-title">ü©∏ Albumine (g/L)</div><select class="form-input child-select" onchange="calcChild()"><option value="1">&gt;35 (1)</option><option value="2">28-35 (2)</option><option value="3">&lt;28 (3)</option></select></div>
            <div class="form-card"><div class="form-title">‚è±Ô∏è INR</div><select class="form-input child-select" onchange="calcChild()"><option value="1">&lt;1.7 (1)</option><option value="2">1.7-2.3 (2)</option><option value="3">&gt;2.3 (3)</option></select></div>
            <div class="form-card"><div class="form-title">üíß Ascite</div><select class="form-input child-select" onchange="calcChild()"><option value="1">Absente (1)</option><option value="2">Minime (2)</option><option value="3">Mod√©r√©e (3)</option></select></div>
            <div class="form-card"><div class="form-title">üß† Enc√©phalopathie</div><select class="form-input child-select" onchange="calcChild()"><option value="1">Absente (1)</option><option value="2">Grade I-II (2)</option><option value="3">Grade III-IV (3)</option></select></div>
            <div class="result-card has-result" id="child-result"><div class="result-label">Score Child-Pugh</div><div class="result-value" id="child-val">5</div><div class="result-unit">/ 15</div><div class="result-interp show normal" id="child-interp">‚úì Classe A</div></div>
        </div>
    </div>

    
    <div class="calc-page" id="calc-meld">
        <div class="calc-header">
            <button class="btn-back" onclick="closeCalc()">‚Üê</button>
            <div class="calc-header-info"><div class="calc-header-title">Score MELD</div><div class="calc-header-sub">End-Stage Liver Disease</div></div>
            <button class="btn-fav" onclick="toggleFav('meld')">‚≠ê</button>
        </div>
        <div class="calc-body">
            <div class="form-card">
                <div class="form-title">üß™ Biologie</div>
                <div class="form-group"><label class="form-label">Bilirubine</label><div class="input-unit" data-unit="¬µmol/L"><input type="number" class="form-input" id="meld-bili" placeholder="20" oninput="calcMELD()"></div></div>
                <div class="form-group"><label class="form-label">INR</label><div class="input-unit" data-unit=""><input type="number" step="0.1" class="form-input" id="meld-inr" placeholder="1.2" oninput="calcMELD()"></div></div>
                <div class="form-group"><label class="form-label">Cr√©atinine</label><div class="input-unit" data-unit="¬µmol/L"><input type="number" class="form-input" id="meld-creat" placeholder="90" oninput="calcMELD()"></div></div>
            </div>
            <div class="result-card" id="meld-result"><div class="result-label">Score MELD</div><div class="result-value" id="meld-val">--</div><div class="result-unit"></div><div class="result-interp" id="meld-interp"></div></div>
        </div>
    </div>

    
    <div class="calc-page" id="calc-gbs">
        <div class="calc-header">
            <button class="btn-back" onclick="closeCalc()">‚Üê</button>
            <div class="calc-header-info"><div class="calc-header-title">Glasgow-Blatchford</div><div class="calc-header-sub">H√©morragie digestive haute</div></div>
            <button class="btn-fav" onclick="toggleFav('gbs')">‚≠ê</button>
        </div>
        <div class="calc-body">
            <div class="form-card"><div class="form-title">ü©∏ H√©moglobine</div><select class="form-input gbs-select" onchange="calcGBS()"><option value="0">‚â•13H/‚â•12F (0)</option><option value="1">12-12.9H/10-11.9F (1)</option><option value="3">10-11.9H (3)</option><option value="6">&lt;10 (6)</option></select></div>
            <div class="form-card"><div class="form-title">ü©∫ PAS</div><select class="form-input gbs-select" onchange="calcGBS()"><option value="0">‚â•110 (0)</option><option value="1">100-109 (1)</option><option value="2">90-99 (2)</option><option value="3">&lt;90 (3)</option></select></div>
            <div class="form-card"><div class="form-title">‚ù§Ô∏è FC</div><select class="form-input gbs-select" onchange="calcGBS()"><option value="0">&lt;100 (0)</option><option value="1">‚â•100 (1)</option></select></div>
            <div class="form-card"><div class="form-title">üß™ Ur√©e</div><select class="form-input gbs-select" onchange="calcGBS()"><option value="0">&lt;6.5 (0)</option><option value="2">6.5-7.9 (2)</option><option value="3">8-9.9 (3)</option><option value="4">10-25 (4)</option><option value="6">&gt;25 (6)</option></select></div>
            <div class="form-card">
                <div class="form-title">üìã Autres</div>
                <div class="check-list" id="gbs-list">
                    <div class="check-opt" onclick="toggleCheck(this);calcGBS()" data-pts="2"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title">M√©l√©na</div><div class="check-pts">+2</div></div></div>
                    <div class="check-opt" onclick="toggleCheck(this);calcGBS()" data-pts="2"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title">Syncope</div><div class="check-pts">+2</div></div></div>
                    <div class="check-opt" onclick="toggleCheck(this);calcGBS()" data-pts="2"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title">Maladie h√©patique</div><div class="check-pts">+2</div></div></div>
                    <div class="check-opt" onclick="toggleCheck(this);calcGBS()" data-pts="2"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title">Insuffisance cardiaque</div><div class="check-pts">+2</div></div></div>
                </div>
            </div>
            <div class="result-card has-result" id="gbs-result"><div class="result-label">Score GBS</div><div class="result-value" id="gbs-val">0</div><div class="result-unit">/ 23</div><div class="result-interp show normal" id="gbs-interp">‚úì Score 0 - Sortie possible</div></div>
        </div>
    </div>

    
    <div class="calc-page" id="calc-alvarado">
        <div class="calc-header">
            <button class="btn-back" onclick="closeCalc()">‚Üê</button>
            <div class="calc-header-info"><div class="calc-header-title">Score Alvarado</div><div class="calc-header-sub">Probabilit√© appendicite</div></div>
            <button class="btn-fav" onclick="toggleFav('alvarado')">‚≠ê</button>
        </div>
        <div class="calc-body">
            <div class="form-card">
                <div class="form-title">üìã MANTRELS</div>
                <div class="check-list" id="alvarado-list">
                    <div class="check-opt" onclick="toggleCheck(this);calcAlvarado()" data-pts="1"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title"><strong>M</strong> - Migration douleur FID</div><div class="check-pts">+1</div></div></div>
                    <div class="check-opt" onclick="toggleCheck(this);calcAlvarado()" data-pts="1"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title"><strong>A</strong> - Anorexie</div><div class="check-pts">+1</div></div></div>
                    <div class="check-opt" onclick="toggleCheck(this);calcAlvarado()" data-pts="1"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title"><strong>N</strong> - Naus√©es/Vomissements</div><div class="check-pts">+1</div></div></div>
                    <div class="check-opt" onclick="toggleCheck(this);calcAlvarado()" data-pts="2"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title"><strong>T</strong> - Douleur FID</div><div class="check-pts">+2</div></div></div>
                    <div class="check-opt" onclick="toggleCheck(this);calcAlvarado()" data-pts="1"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title"><strong>R</strong> - Rebond</div><div class="check-pts">+1</div></div></div>
                    <div class="check-opt" onclick="toggleCheck(this);calcAlvarado()" data-pts="1"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title"><strong>E</strong> - T¬∞ ‚â•37.3</div><div class="check-pts">+1</div></div></div>
                    <div class="check-opt" onclick="toggleCheck(this);calcAlvarado()" data-pts="2"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title"><strong>L</strong> - Leucocytose &gt;10G/L</div><div class="check-pts">+2</div></div></div>
                    <div class="check-opt" onclick="toggleCheck(this);calcAlvarado()" data-pts="1"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title"><strong>S</strong> - Shift (PNN)</div><div class="check-pts">+1</div></div></div>
                </div>
            </div>
            <div class="result-card has-result" id="alvarado-result"><div class="result-label">Score Alvarado</div><div class="result-value" id="alvarado-val">0</div><div class="result-unit">/ 10</div><div class="result-interp show normal" id="alvarado-interp">‚úì Appendicite peu probable</div></div>
        </div>
    </div>

    
    <div class="calc-page" id="calc-canadian">
        <div class="calc-header">
            <button class="btn-back" onclick="closeCalc()">‚Üê</button>
            <div class="calc-header-info"><div class="calc-header-title">Canadian CT Head</div><div class="calc-header-sub">Indication TDM cr√¢nien</div></div>
            <button class="btn-fav" onclick="toggleFav('canadian')">‚≠ê</button>
        </div>
        <div class="calc-body">
            <div class="form-card">
                <div class="form-title">‚ö†Ô∏è Crit√®res de haut risque</div>
                <div class="check-list" id="canadian-list">
                    <div class="check-opt" onclick="toggleCheck(this);calcCanadian()"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title">Glasgow &lt;15 √† 2h</div></div></div>
                    <div class="check-opt" onclick="toggleCheck(this);calcCanadian()"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title">Suspicion fracture ouverte/embarrure</div></div></div>
                    <div class="check-opt" onclick="toggleCheck(this);calcCanadian()"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title">Signe fracture base du cr√¢ne</div></div></div>
                    <div class="check-opt" onclick="toggleCheck(this);calcCanadian()"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title">‚â•2 vomissements</div></div></div>
                    <div class="check-opt" onclick="toggleCheck(this);calcCanadian()"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title">√Çge ‚â•65 ans</div></div></div>
                    <div class="check-opt" onclick="toggleCheck(this);calcCanadian()"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title">Amn√©sie r√©trograde ‚â•30 min</div></div></div>
                    <div class="check-opt" onclick="toggleCheck(this);calcCanadian()"><div class="check-box">‚úì</div><div class="check-text"><div class="check-title">M√©canisme dangereux</div></div></div>
                </div>
            </div>
            <div class="result-card has-result" id="canadian-result"><div class="result-label">Crit√®res pr√©sents</div><div class="result-value" id="canadian-val">0</div><div class="result-unit">/ 7</div><div class="result-interp show normal" id="canadian-interp">‚úì TDM non indiqu√©</div></div>
        </div>
    </div>

    
    <div class="calc-page" id="calc-sc">
        <div class="calc-header">
            <button class="btn-back" onclick="closeCalc()">‚Üê</button>
            <div class="calc-header-info"><div class="calc-header-title">Surface corporelle</div><div class="calc-header-sub">Formule de Dubois</div></div>
            <button class="btn-fav" onclick="toggleFav('sc')">‚≠ê</button>
        </div>
        <div class="calc-body">
            <div class="form-card">
                <div class="form-title">üìê Mesures</div>
                <div class="form-group"><label class="form-label">Taille</label><div class="input-unit" data-unit="cm"><input type="number" class="form-input" id="sc-taille" placeholder="175" oninput="calcSC()"></div></div>
                <div class="form-group"><label class="form-label">Poids</label><div class="input-unit" data-unit="kg"><input type="number" class="form-input" id="sc-poids" placeholder="70" oninput="calcSC()"></div></div>
            </div>
            <div class="result-card" id="sc-result"><div class="result-label">Surface corporelle</div><div class="result-value" id="sc-val">--</div><div class="result-unit">m¬≤</div><div class="result-interp" id="sc-interp"></div></div>
        </div>
    </div>

    
    <div class="calc-page" id="calc-poids">
        <div class="calc-header">
            <button class="btn-back" onclick="closeCalc()">‚Üê</button>
            <div class="calc-header-info"><div class="calc-header-title">Poids id√©al</div><div class="calc-header-sub">Formule de Lorentz</div></div>
            <button class="btn-fav" onclick="toggleFav('poids')">‚≠ê</button>
        </div>
        <div class="calc-body">
            <div class="form-card">
                <div class="form-title">üë§ Patient</div>
                <div class="form-group"><label class="form-label">Sexe</label><div class="radio-group"><label class="radio-opt selected" onclick="selectRadio(this,'poids-sex');calcPoidsIdeal()"><input type="radio" name="poids-sex" value="M" checked=""><span class="radio-label">üë® Homme</span></label><label class="radio-opt" onclick="selectRadio(this,'poids-sex');calcPoidsIdeal()"><input type="radio" name="poids-sex" value="F"><span class="radio-label">üë© Femme</span></label></div></div>
                <div class="form-group"><label class="form-label">Taille</label><div class="input-unit" data-unit="cm"><input type="number" class="form-input" id="poids-taille" placeholder="175" oninput="calcPoidsIdeal()"></div></div>
            </div>
            <div class="result-card" id="poids-result"><div class="result-label">Poids id√©al</div><div class="result-value" id="poids-val">--</div><div class="result-unit">kg</div><div class="result-interp" id="poids-interp"></div></div>
        </div>
    </div>

    
    <div class="calc-page" id="calc-dose">
        <div class="calc-header">
            <button class="btn-back" onclick="closeCalc()">‚Üê</button>
            <div class="calc-header-info"><div class="calc-header-title">Dose selon poids</div><div class="calc-header-sub">Calculateur posologie</div></div>
            <button class="btn-fav" onclick="toggleFav('dose')">‚≠ê</button>
        </div>
        <div class="calc-body">
            <div class="form-card">
                <div class="form-title">üíä Posologie</div>
                <div class="form-group"><label class="form-label">Poids</label><div class="input-unit" data-unit="kg"><input type="number" class="form-input" id="dose-poids" placeholder="70" oninput="calcDose()"></div></div>
                <div class="form-group"><label class="form-label">Dose prescrite</label><div class="input-unit" data-unit="mg/kg"><input type="number" step="0.1" class="form-input" id="dose-dose" placeholder="10" oninput="calcDose()"></div></div>
            </div>
            <div class="result-card" id="dose-result"><div class="result-label">Dose totale</div><div class="result-value" id="dose-val">--</div><div class="result-unit">mg</div><div class="result-interp" id="dose-interp"></div></div>
        </div>
    </div>

    
    <div class="calc-page" id="calc-apgar">
        <div class="calc-header">
            <button class="btn-back" onclick="closeCalc()">‚Üê</button>
            <div class="calc-header-info"><div class="calc-header-title">Score Apgar</div><div class="calc-header-sub">√âvaluation nouveau-n√©</div></div>
            <button class="btn-fav" onclick="toggleFav('apgar')">‚≠ê</button>
        </div>
        <div class="calc-body">
            <div class="form-card"><div class="form-title">‚ù§Ô∏è FC</div><select class="form-input apgar-select" onchange="calcApgar()"><option value="0">Absente (0)</option><option value="1">&lt;100 (1)</option><option value="2">‚â•100 (2)</option></select></div>
            <div class="form-card"><div class="form-title">ü´Å Respiration</div><select class="form-input apgar-select" onchange="calcApgar()"><option value="0">Absente (0)</option><option value="1">Lente (1)</option><option value="2">Cri vigoureux (2)</option></select></div>
            <div class="form-card"><div class="form-title">üí™ Tonus</div><select class="form-input apgar-select" onchange="calcApgar()"><option value="0">Flasque (0)</option><option value="1">Flexion (1)</option><option value="2">Actif (2)</option></select></div>
            <div class="form-card"><div class="form-title">üò§ R√©activit√©</div><select class="form-input apgar-select" onchange="calcApgar()"><option value="0">Aucune (0)</option><option value="1">Grimace (1)</option><option value="2">Cri (2)</option></select></div>
            <div class="form-card"><div class="form-title">üé® Coloration</div><select class="form-input apgar-select" onchange="calcApgar()"><option value="0">Cyanose (0)</option><option value="1">Extr√©mit√©s (1)</option><option value="2">Rose (2)</option></select></div>
            <div class="result-card has-result" id="apgar-result"><div class="result-label">Score Apgar</div><div class="result-value" id="apgar-val">0</div><div class="result-unit">/ 10</div><div class="result-interp show danger" id="apgar-interp">‚õî √âtat critique</div></div>
        </div>
    </div>

    
    <div class="calc-page" id="calc-silverman">
        <div class="calc-header">
            <button class="btn-back" onclick="closeCalc()">‚Üê</button>
            <div class="calc-header-info"><div class="calc-header-title">Score Silverman</div><div class="calc-header-sub">D√©tresse respi n√©onatale</div></div>
            <button class="btn-fav" onclick="toggleFav('silverman')">‚≠ê</button>
        </div>
        <div class="calc-body">
            <div class="form-card"><div class="form-title">ü´Å Balancement</div><select class="form-input silverman-select" onchange="calcSilverman()"><option value="0">Synchrone (0)</option><option value="1">Immobile (1)</option><option value="2">Balancement (2)</option></select></div>
            <div class="form-card"><div class="form-title">üìç Tirage</div><select class="form-input silverman-select" onchange="calcSilverman()"><option value="0">Absent (0)</option><option value="1">Mod√©r√© (1)</option><option value="2">Intense (2)</option></select></div>
            <div class="form-card"><div class="form-title">‚¨áÔ∏è Entonnoir</div><select class="form-input silverman-select" onchange="calcSilverman()"><option value="0">Absent (0)</option><option value="1">Mod√©r√© (1)</option><option value="2">Intense (2)</option></select></div>
            <div class="form-card"><div class="form-title">üëÉ BAN</div><select class="form-input silverman-select" onchange="calcSilverman()"><option value="0">Absent (0)</option><option value="1">Mod√©r√© (1)</option><option value="2">Intense (2)</option></select></div>
            <div class="form-card"><div class="form-title">üòÆ Geignement</div><select class="form-input silverman-select" onchange="calcSilverman()"><option value="0">Absent (0)</option><option value="1">St√©tho (1)</option><option value="2">Audible (2)</option></select></div>
            <div class="result-card has-result" id="silverman-result"><div class="result-label">Score Silverman</div><div class="result-value" id="silverman-val">0</div><div class="result-unit">/ 10</div><div class="result-interp show normal" id="silverman-interp">‚úì D√©tresse l√©g√®re</div></div>
        </div>
    </div>


    
    
    
    <div class="calc-page" id="calc-adl">
        <div class="calc-header">
            <button class="btn-back" onclick="closeCalc()">‚Üê</button>
            <div class="calc-header-info">
                <div class="calc-header-title">ADL - √âchelle de Katz</div>
                <div class="calc-header-sub">Autonomie activit√©s quotidiennes</div>
            </div>
            <button class="btn-fav" onclick="toggleFav('adl')">‚òÖ</button>
        </div>
        <div class="calc-body">
            <div class="form-card">
                <div class="form-card-title">üßì Activit√©s de base</div>
                <div class="check-list" id="adl-list">
                    <div class="check-opt" data-pts="1" onclick="toggleCheck(this);calcADL()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">Hygi√®ne corporelle</div><div class="check-desc">Se lave seul (entr√©e/sortie baignoire)</div></div></div>
                    <div class="check-opt" data-pts="1" onclick="toggleCheck(this);calcADL()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">Habillage</div><div class="check-desc">S'habille seul compl√®tement</div></div></div>
                    <div class="check-opt" data-pts="1" onclick="toggleCheck(this);calcADL()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">Toilettes</div><div class="check-desc">Va aux WC seul, se rhabille</div></div></div>
                    <div class="check-opt" data-pts="1" onclick="toggleCheck(this);calcADL()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">Transferts</div><div class="check-desc">Se l√®ve/couche seul du lit ou fauteuil</div></div></div>
                    <div class="check-opt" data-pts="1" onclick="toggleCheck(this);calcADL()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">Continence</div><div class="check-desc">Contr√¥le sphincters</div></div></div>
                    <div class="check-opt" data-pts="1" onclick="toggleCheck(this);calcADL()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">Alimentation</div><div class="check-desc">Mange seul (pr√©par√© et servi)</div></div></div>
                </div>
            </div>
            <div class="result-card" id="adl-result"><div class="result-label">Score ADL</div><div class="result-value" id="adl-val">-</div><div class="result-unit">/ 6</div><div class="result-interp" id="adl-interp"></div></div>
        </div>
    </div>

    
    <div class="calc-page" id="calc-iadl">
        <div class="calc-header">
            <button class="btn-back" onclick="closeCalc()">‚Üê</button>
            <div class="calc-header-info">
                <div class="calc-header-title">IADL - Lawton &amp; Brody</div>
                <div class="calc-header-sub">Activit√©s instrumentales</div>
            </div>
            <button class="btn-fav" onclick="toggleFav('iadl')">‚òÖ</button>
        </div>
        <div class="calc-body">
            <div class="form-card">
                <div class="form-card-title">üè† Activit√©s instrumentales</div>
                <div class="check-list" id="iadl-list">
                    <div class="check-opt" data-pts="1" onclick="toggleCheck(this);calcIADL()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">T√©l√©phone</div><div class="check-desc">Utilise le t√©l√©phone de sa propre initiative</div></div></div>
                    <div class="check-opt" data-pts="1" onclick="toggleCheck(this);calcIADL()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">Courses</div><div class="check-desc">Fait les courses seul</div></div></div>
                    <div class="check-opt" data-pts="1" onclick="toggleCheck(this);calcIADL()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">Cuisine</div><div class="check-desc">Pr√©pare les repas seul</div></div></div>
                    <div class="check-opt" data-pts="1" onclick="toggleCheck(this);calcIADL()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">M√©nage</div><div class="check-desc">Entretient la maison seul</div></div></div>
                    <div class="check-opt" data-pts="1" onclick="toggleCheck(this);calcIADL()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">Lessive</div><div class="check-desc">Fait sa lessive seul</div></div></div>
                    <div class="check-opt" data-pts="1" onclick="toggleCheck(this);calcIADL()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">Transports</div><div class="check-desc">Utilise les transports seul</div></div></div>
                    <div class="check-opt" data-pts="1" onclick="toggleCheck(this);calcIADL()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">M√©dicaments</div><div class="check-desc">G√®re ses m√©dicaments seul</div></div></div>
                    <div class="check-opt" data-pts="1" onclick="toggleCheck(this);calcIADL()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">Finances</div><div class="check-desc">G√®re son budget seul</div></div></div>
                </div>
            </div>
            <div class="result-card" id="iadl-result"><div class="result-label">Score IADL</div><div class="result-value" id="iadl-val">-</div><div class="result-unit">/ 8</div><div class="result-interp" id="iadl-interp"></div></div>
        </div>
    </div>

    
    <div class="calc-page" id="calc-mnasf">
        <div class="calc-header">
            <button class="btn-back" onclick="closeCalc()">‚Üê</button>
            <div class="calc-header-info">
                <div class="calc-header-title">MNA-SF</div>
                <div class="calc-header-sub">D√©pistage d√©nutrition</div>
            </div>
            <button class="btn-fav" onclick="toggleFav('mnasf')">‚òÖ</button>
        </div>
        <div class="calc-body">
            <div class="form-card">
                <div class="form-card-title">üçΩÔ∏è Mini Nutritional Assessment - Short Form</div>
                <div class="form-group">
                    <label class="form-label">A. Diminution des apports (3 derniers mois)</label>
                    <select class="form-select mnasf-select" onchange="calcMNASF()">
                        <option value="0">S√©v√®re (anorexie)</option>
                        <option value="1">Mod√©r√©e</option>
                        <option value="2" selected="">Pas de diminution</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">B. Perte de poids (3 derniers mois)</label>
                    <select class="form-select mnasf-select" onchange="calcMNASF()">
                        <option value="0">Perte &gt; 3 kg</option>
                        <option value="1">Ne sait pas</option>
                        <option value="2">Perte entre 1 et 3 kg</option>
                        <option value="3" selected="">Pas de perte</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">C. Mobilit√©</label>
                    <select class="form-select mnasf-select" onchange="calcMNASF()">
                        <option value="0">Confin√© lit/fauteuil</option>
                        <option value="1">Autonome √† l'int√©rieur</option>
                        <option value="2" selected="">Sort du domicile</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">D. Maladie aigu√´/stress (3 derniers mois)</label>
                    <select class="form-select mnasf-select" onchange="calcMNASF()">
                        <option value="0">Oui</option>
                        <option value="2" selected="">Non</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">E. Probl√®mes neuropsychologiques</label>
                    <select class="form-select mnasf-select" onchange="calcMNASF()">
                        <option value="0">D√©mence ou d√©pression s√©v√®re</option>
                        <option value="1">D√©mence l√©g√®re</option>
                        <option value="2" selected="">Pas de probl√®me</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">F. IMC (kg/m¬≤)</label>
                    <select class="form-select mnasf-select" onchange="calcMNASF()">
                        <option value="0">IMC &lt; 19</option>
                        <option value="1">IMC 19 √† &lt; 21</option>
                        <option value="2">IMC 21 √† &lt; 23</option>
                        <option value="3" selected="">IMC ‚â• 23</option>
                    </select>
                </div>
            </div>
            <div class="result-card" id="mnasf-result"><div class="result-label">Score MNA-SF</div><div class="result-value" id="mnasf-val">-</div><div class="result-unit">/ 14</div><div class="result-interp" id="mnasf-interp"></div></div>
        </div>
    </div>

    
    <div class="calc-page" id="calc-gds15">
        <div class="calc-header">
            <button class="btn-back" onclick="closeCalc()">‚Üê</button>
            <div class="calc-header-info">
                <div class="calc-header-title">GDS-15</div>
                <div class="calc-header-sub">Geriatric Depression Scale</div>
            </div>
            <button class="btn-fav" onclick="toggleFav('gds15')">‚òÖ</button>
        </div>
        <div class="calc-body">
            <div class="form-card">
                <div class="form-card-title">üòî Questions (r√©pondre par Oui/Non)</div>
                <div class="check-list" id="gds15-list">
                    <div class="check-opt" data-pts="1" onclick="toggleCheck(this);calcGDS15()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">1. Insatisfaction vie</div><div class="check-desc">√ätes-vous globalement insatisfait de votre vie ?</div></div></div>
                    <div class="check-opt" data-pts="1" onclick="toggleCheck(this);calcGDS15()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">2. Abandon activit√©s</div><div class="check-desc">Avez-vous abandonn√© beaucoup de vos activit√©s ?</div></div></div>
                    <div class="check-opt" data-pts="1" onclick="toggleCheck(this);calcGDS15()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">3. Vie vide</div><div class="check-desc">Avez-vous le sentiment que votre vie est vide ?</div></div></div>
                    <div class="check-opt" data-pts="1" onclick="toggleCheck(this);calcGDS15()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">4. Ennui fr√©quent</div><div class="check-desc">Vous ennuyez-vous souvent ?</div></div></div>
                    <div class="check-opt" data-pts="1" onclick="toggleCheck(this);calcGDS15()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">5. Mauvais moral</div><div class="check-desc">√ätes-vous de mauvaise humeur la plupart du temps ?</div></div></div>
                    <div class="check-opt" data-pts="1" onclick="toggleCheck(this);calcGDS15()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">6. Peur malheur</div><div class="check-desc">Craignez-vous qu'un malheur vous arrive ?</div></div></div>
                    <div class="check-opt" data-pts="1" onclick="toggleCheck(this);calcGDS15()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">7. Malheureux</div><div class="check-desc">Vous sentez-vous malheureux la plupart du temps ?</div></div></div>
                    <div class="check-opt" data-pts="1" onclick="toggleCheck(this);calcGDS15()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">8. Impuissance</div><div class="check-desc">Vous sentez-vous souvent impuissant ?</div></div></div>
                    <div class="check-opt" data-pts="1" onclick="toggleCheck(this);calcGDS15()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">9. Reste √† la maison</div><div class="check-desc">Pr√©f√©rez-vous rester √† la maison plut√¥t que sortir ?</div></div></div>
                    <div class="check-opt" data-pts="1" onclick="toggleCheck(this);calcGDS15()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">10. Probl√®mes m√©moire</div><div class="check-desc">Pensez-vous avoir plus de probl√®mes de m√©moire ?</div></div></div>
                    <div class="check-opt" data-pts="1" onclick="toggleCheck(this);calcGDS15()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">11. Pas merveilleux vivre</div><div class="check-desc">Pensez-vous qu'il n'est pas merveilleux de vivre ?</div></div></div>
                    <div class="check-opt" data-pts="1" onclick="toggleCheck(this);calcGDS15()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">12. Sans valeur</div><div class="check-desc">Vous sentez-vous sans valeur actuellement ?</div></div></div>
                    <div class="check-opt" data-pts="1" onclick="toggleCheck(this);calcGDS15()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">13. Manque √©nergie</div><div class="check-desc">Vous sentez-vous plein d'√©nergie ? (Non = 1 pt)</div></div></div>
                    <div class="check-opt" data-pts="1" onclick="toggleCheck(this);calcGDS15()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">14. D√©sesp√©r√©</div><div class="check-desc">Pensez-vous que votre situation est d√©sesp√©r√©e ?</div></div></div>
                    <div class="check-opt" data-pts="1" onclick="toggleCheck(this);calcGDS15()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">15. Autres mieux lotis</div><div class="check-desc">Pensez-vous que les autres sont mieux lotis ?</div></div></div>
                </div>
            </div>
            <div class="result-card" id="gds15-result"><div class="result-label">Score GDS-15</div><div class="result-value" id="gds15-val">-</div><div class="result-unit">/ 15</div><div class="result-interp" id="gds15-interp"></div></div>
        </div>
    </div>

    
    <div class="calc-page" id="calc-gds4">
        <div class="calc-header">
            <button class="btn-back" onclick="closeCalc()">‚Üê</button>
            <div class="calc-header-info">
                <div class="calc-header-title">Mini-GDS</div>
                <div class="calc-header-sub">D√©pistage d√©pression rapide</div>
            </div>
            <button class="btn-fav" onclick="toggleFav('gds4')">‚òÖ</button>
        </div>
        <div class="calc-body">
            <div class="form-card">
                <div class="form-card-title">üòî 4 questions de d√©pistage</div>
                <div class="check-list" id="gds4-list">
                    <div class="check-opt" data-pts="1" onclick="toggleCheck(this);calcGDS4()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">D√©courag√©</div><div class="check-desc">Vous sentez-vous souvent d√©courag√©(e) et triste ?</div></div></div>
                    <div class="check-opt" data-pts="1" onclick="toggleCheck(this);calcGDS4()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">Vie vide</div><div class="check-desc">Avez-vous le sentiment que votre vie est vide ?</div></div></div>
                    <div class="check-opt" data-pts="1" onclick="toggleCheck(this);calcGDS4()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">Pas heureux</div><div class="check-desc">√ätes-vous heureux(se) la plupart du temps ? (Non = 1pt)</div></div></div>
                    <div class="check-opt" data-pts="1" onclick="toggleCheck(this);calcGDS4()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">Sans espoir</div><div class="check-desc">Avez-vous l'impression que votre situation est d√©sesp√©r√©e ?</div></div></div>
                </div>
            </div>
            <div class="result-card" id="gds4-result"><div class="result-label">Score Mini-GDS</div><div class="result-value" id="gds4-val">-</div><div class="result-unit">/ 4</div><div class="result-interp" id="gds4-interp"></div></div>
        </div>
    </div>

    
    <div class="calc-page" id="calc-charlson">
        <div class="calc-header">
            <button class="btn-back" onclick="closeCalc()">‚Üê</button>
            <div class="calc-header-info">
                <div class="calc-header-title">Index de Charlson</div>
                <div class="calc-header-sub">Comorbidit√©s</div>
            </div>
            <button class="btn-fav" onclick="toggleFav('charlson')">‚òÖ</button>
        </div>
        <div class="calc-body">
            <div class="form-card">
                <div class="form-card-title">üìã Comorbidit√©s (cocher si pr√©sent)</div>
                <div class="check-list" id="charlson-list">
                    <div class="check-opt" data-pts="1" onclick="toggleCheck(this);calcCharlson()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">Infarctus du myocarde</div><div class="check-desc">+1 point</div></div></div>
                    <div class="check-opt" data-pts="1" onclick="toggleCheck(this);calcCharlson()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">Insuffisance cardiaque</div><div class="check-desc">+1 point</div></div></div>
                    <div class="check-opt" data-pts="1" onclick="toggleCheck(this);calcCharlson()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">Art√©riopathie p√©riph√©rique</div><div class="check-desc">+1 point</div></div></div>
                    <div class="check-opt" data-pts="1" onclick="toggleCheck(this);calcCharlson()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">AVC/AIT</div><div class="check-desc">+1 point</div></div></div>
                    <div class="check-opt" data-pts="1" onclick="toggleCheck(this);calcCharlson()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">D√©mence</div><div class="check-desc">+1 point</div></div></div>
                    <div class="check-opt" data-pts="1" onclick="toggleCheck(this);calcCharlson()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">BPCO</div><div class="check-desc">+1 point</div></div></div>
                    <div class="check-opt" data-pts="1" onclick="toggleCheck(this);calcCharlson()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">Connectivite</div><div class="check-desc">+1 point</div></div></div>
                    <div class="check-opt" data-pts="1" onclick="toggleCheck(this);calcCharlson()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">Ulc√®re gastro-duod√©nal</div><div class="check-desc">+1 point</div></div></div>
                    <div class="check-opt" data-pts="1" onclick="toggleCheck(this);calcCharlson()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">H√©patopathie l√©g√®re</div><div class="check-desc">+1 point</div></div></div>
                    <div class="check-opt" data-pts="1" onclick="toggleCheck(this);calcCharlson()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">Diab√®te non compliqu√©</div><div class="check-desc">+1 point</div></div></div>
                    <div class="check-opt" data-pts="2" onclick="toggleCheck(this);calcCharlson()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">H√©mipl√©gie</div><div class="check-desc">+2 points</div></div></div>
                    <div class="check-opt" data-pts="2" onclick="toggleCheck(this);calcCharlson()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">IRC mod√©r√©e √† s√©v√®re</div><div class="check-desc">+2 points</div></div></div>
                    <div class="check-opt" data-pts="2" onclick="toggleCheck(this);calcCharlson()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">Diab√®te avec atteinte organe</div><div class="check-desc">+2 points</div></div></div>
                    <div class="check-opt" data-pts="2" onclick="toggleCheck(this);calcCharlson()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">Tumeur solide (non m√©ta)</div><div class="check-desc">+2 points</div></div></div>
                    <div class="check-opt" data-pts="2" onclick="toggleCheck(this);calcCharlson()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">Leuc√©mie</div><div class="check-desc">+2 points</div></div></div>
                    <div class="check-opt" data-pts="2" onclick="toggleCheck(this);calcCharlson()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">Lymphome</div><div class="check-desc">+2 points</div></div></div>
                    <div class="check-opt" data-pts="3" onclick="toggleCheck(this);calcCharlson()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">H√©patopathie mod√©r√©e/s√©v√®re</div><div class="check-desc">+3 points</div></div></div>
                    <div class="check-opt" data-pts="6" onclick="toggleCheck(this);calcCharlson()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">Tumeur m√©tastatique</div><div class="check-desc">+6 points</div></div></div>
                    <div class="check-opt" data-pts="6" onclick="toggleCheck(this);calcCharlson()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">SIDA</div><div class="check-desc">+6 points</div></div></div>
                </div>
            </div>
            <div class="result-card" id="charlson-result"><div class="result-label">Index de Charlson</div><div class="result-value" id="charlson-val">-</div><div class="result-unit">pts</div><div class="result-interp" id="charlson-interp"></div></div>
        </div>
    </div>

    
    <div class="calc-page" id="calc-getupgo">
        <div class="calc-header">
            <button class="btn-back" onclick="closeCalc()">‚Üê</button>
            <div class="calc-header-info">
                <div class="calc-header-title">Timed Get Up and Go</div>
                <div class="calc-header-sub">Test de mobilit√©</div>
            </div>
            <button class="btn-fav" onclick="toggleFav('getupgo')">‚òÖ</button>
        </div>
        <div class="calc-body">
            <div class="form-card">
                <div class="form-card-title">üö∂ Instructions</div>
                <p style="font-size:13px;color:var(--text-secondary);margin-bottom:16px;">Le patient se l√®ve d'une chaise avec accoudoirs, marche 3 m√®tres, fait demi-tour, revient s'asseoir. Chronom√©trer.</p>
                <div class="form-group">
                    <label class="form-label">Temps (secondes)</label>
                    <input type="number" class="form-input" id="getupgo-time" placeholder="Ex: 12" oninput="calcGetUpGo()">
                </div>
            </div>
            <div class="result-card" id="getupgo-result"><div class="result-label">R√©sultat</div><div class="result-value" id="getupgo-val">-</div><div class="result-unit">sec</div><div class="result-interp" id="getupgo-interp"></div></div>
        </div>
    </div>

    
    <div class="calc-page" id="calc-braden">
        <div class="calc-header">
            <button class="btn-back" onclick="closeCalc()">‚Üê</button>
            <div class="calc-header-info">
                <div class="calc-header-title">√âchelle de Braden</div>
                <div class="calc-header-sub">Risque d'escarres</div>
            </div>
            <button class="btn-fav" onclick="toggleFav('braden')">‚òÖ</button>
        </div>
        <div class="calc-body">
            <div class="form-card">
                <div class="form-card-title">üõèÔ∏è √âvaluation</div>
                <div class="form-group">
                    <label class="form-label">Perception sensorielle</label>
                    <select class="form-select braden-select" onchange="calcBraden()">
                        <option value="1">1 - Compl√®tement limit√©e</option>
                        <option value="2">2 - Tr√®s limit√©e</option>
                        <option value="3">3 - L√©g√®rement limit√©e</option>
                        <option value="4" selected="">4 - Aucune atteinte</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Humidit√©</label>
                    <select class="form-select braden-select" onchange="calcBraden()">
                        <option value="1">1 - Constamment humide</option>
                        <option value="2">2 - Tr√®s humide</option>
                        <option value="3">3 - Occasionnellement humide</option>
                        <option value="4" selected="">4 - Rarement humide</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Activit√©</label>
                    <select class="form-select braden-select" onchange="calcBraden()">
                        <option value="1">1 - Alit√©</option>
                        <option value="2">2 - Confin√© au fauteuil</option>
                        <option value="3">3 - Marche occasionnelle</option>
                        <option value="4" selected="">4 - Marche fr√©quente</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Mobilit√©</label>
                    <select class="form-select braden-select" onchange="calcBraden()">
                        <option value="1">1 - Compl√®tement immobile</option>
                        <option value="2">2 - Tr√®s limit√©e</option>
                        <option value="3">3 - L√©g√®rement limit√©e</option>
                        <option value="4" selected="">4 - Aucune limitation</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Nutrition</label>
                    <select class="form-select braden-select" onchange="calcBraden()">
                        <option value="1">1 - Tr√®s pauvre</option>
                        <option value="2">2 - Probablement inad√©quate</option>
                        <option value="3">3 - Ad√©quate</option>
                        <option value="4" selected="">4 - Excellente</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Friction et cisaillement</label>
                    <select class="form-select braden-select" onchange="calcBraden()">
                        <option value="1">1 - Probl√®me</option>
                        <option value="2">2 - Probl√®me potentiel</option>
                        <option value="3" selected="">3 - Aucun probl√®me apparent</option>
                    </select>
                </div>
            </div>
            <div class="result-card" id="braden-result"><div class="result-label">Score Braden</div><div class="result-value" id="braden-val">-</div><div class="result-unit">/ 23</div><div class="result-interp" id="braden-interp"></div></div>
        </div>
    </div>

    
    <div class="calc-page" id="calc-g8">
        <div class="calc-header">
            <button class="btn-back" onclick="closeCalc()">‚Üê</button>
            <div class="calc-header-info">
                <div class="calc-header-title">Score G8</div>
                <div class="calc-header-sub">Oncog√©riatrie</div>
            </div>
            <button class="btn-fav" onclick="toggleFav('g8')">‚òÖ</button>
        </div>
        <div class="calc-body">
            <div class="form-card">
                <div class="form-card-title">üéóÔ∏è D√©pistage fragilit√© en oncologie</div>
                <div class="form-group">
                    <label class="form-label">App√©tit (3 derniers mois)</label>
                    <select class="form-select g8-select" onchange="calcG8()">
                        <option value="0">Anorexie s√©v√®re</option>
                        <option value="1">Anorexie mod√©r√©e</option>
                        <option value="2" selected="">Pas d'anorexie</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Perte de poids (3 derniers mois)</label>
                    <select class="form-select g8-select" onchange="calcG8()">
                        <option value="0">Perte &gt; 3 kg</option>
                        <option value="1">Ne sait pas</option>
                        <option value="2">Perte 1-3 kg</option>
                        <option value="3" selected="">Pas de perte</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Mobilit√©</label>
                    <select class="form-select g8-select" onchange="calcG8()">
                        <option value="0">Confin√© lit/fauteuil</option>
                        <option value="1">Autonome √† l'int√©rieur</option>
                        <option value="2" selected="">Sort du domicile</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Probl√®mes neuropsychologiques</label>
                    <select class="form-select g8-select" onchange="calcG8()">
                        <option value="0">D√©mence ou d√©pression s√©v√®re</option>
                        <option value="1">D√©mence l√©g√®re</option>
                        <option value="2" selected="">Pas de probl√®me</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">IMC</label>
                    <select class="form-select g8-select" onchange="calcG8()">
                        <option value="0">IMC &lt; 19</option>
                        <option value="1">IMC 19-21</option>
                        <option value="2">IMC 21-23</option>
                        <option value="3" selected="">IMC ‚â• 23</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">M√©dicaments (&gt; 3/jour)</label>
                    <select class="form-select g8-select" onchange="calcG8()">
                        <option value="0">Oui</option>
                        <option value="1" selected="">Non</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">√âtat de sant√© per√ßu par le patient</label>
                    <select class="form-select g8-select" onchange="calcG8()">
                        <option value="0">Moins bon</option>
                        <option value="0.5">Ne sait pas</option>
                        <option value="1">Aussi bon</option>
                        <option value="2" selected="">Meilleur</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">√Çge</label>
                    <select class="form-select g8-select" onchange="calcG8()">
                        <option value="0">&gt; 85 ans</option>
                        <option value="1">80-85 ans</option>
                        <option value="2" selected="">&lt; 80 ans</option>
                    </select>
                </div>
            </div>
            <div class="result-card" id="g8-result"><div class="result-label">Score G8</div><div class="result-value" id="g8-val">-</div><div class="result-unit">/ 17</div><div class="result-interp" id="g8-interp"></div></div>
        </div>
    </div>

    
    <div class="calc-page" id="calc-cam">
        <div class="calc-header">
            <button class="btn-back" onclick="closeCalc()">‚Üê</button>
            <div class="calc-header-info">
                <div class="calc-header-title">CAM</div>
                <div class="calc-header-sub">Confusion Assessment Method</div>
            </div>
            <button class="btn-fav" onclick="toggleFav('cam')">‚òÖ</button>
        </div>
        <div class="calc-body">
            <div class="form-card">
                <div class="form-card-title">üòµ Crit√®res diagnostiques du d√©lirium</div>
                <div class="check-list" id="cam-list">
                    <div class="check-opt" data-crit="1" onclick="toggleCheck(this);calcCAM()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">1. D√©but aigu et fluctuant</div><div class="check-desc">Changement brutal de l'√©tat mental, fluctuant dans la journ√©e</div></div></div>
                    <div class="check-opt" data-crit="2" onclick="toggleCheck(this);calcCAM()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">2. Inattention</div><div class="check-desc">Difficult√© √† maintenir l'attention, facilement distrait</div></div></div>
                    <div class="check-opt" data-crit="3" onclick="toggleCheck(this);calcCAM()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">3. Pens√©e d√©sorganis√©e</div><div class="check-desc">Propos incoh√©rents, coq-√†-l'√¢ne, illogique</div></div></div>
                    <div class="check-opt" data-crit="4" onclick="toggleCheck(this);calcCAM()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">4. Alt√©ration conscience</div><div class="check-desc">Hypervigilance, l√©thargie, stupeur ou coma</div></div></div>
                </div>
            </div>
            <div class="result-card" id="cam-result"><div class="result-label">Diagnostic CAM</div><div class="result-value" id="cam-val">-</div><div class="result-unit"></div><div class="result-interp" id="cam-interp"></div></div>
        </div>
    </div>

    
    <div class="calc-page" id="calc-fried">
        <div class="calc-header">
            <button class="btn-back" onclick="closeCalc()">‚Üê</button>
            <div class="calc-header-info">
                <div class="calc-header-title">Crit√®res de Fried</div>
                <div class="calc-header-sub">Fragilit√©</div>
            </div>
            <button class="btn-fav" onclick="toggleFav('fried')">‚òÖ</button>
        </div>
        <div class="calc-body">
            <div class="form-card">
                <div class="form-card-title">üí™ 5 crit√®res de fragilit√©</div>
                <div class="check-list" id="fried-list">
                    <div class="check-opt" data-pts="1" onclick="toggleCheck(this);calcFried()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">Perte de poids involontaire</div><div class="check-desc">&gt; 4.5 kg ou &gt; 5% du poids en 1 an</div></div></div>
                    <div class="check-opt" data-pts="1" onclick="toggleCheck(this);calcFried()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">Fatigue / √âpuisement</div><div class="check-desc">Sensation d'√©puisement ‚â• 3 jours/semaine</div></div></div>
                    <div class="check-opt" data-pts="1" onclick="toggleCheck(this);calcFried()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">Faiblesse musculaire</div><div class="check-desc">Force de pr√©hension diminu√©e (grip strength)</div></div></div>
                    <div class="check-opt" data-pts="1" onclick="toggleCheck(this);calcFried()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">Vitesse de marche lente</div><div class="check-desc">&lt; 0.8 m/s sur 4 m√®tres</div></div></div>
                    <div class="check-opt" data-pts="1" onclick="toggleCheck(this);calcFried()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">S√©dentarit√©</div><div class="check-desc">Activit√© physique faible</div></div></div>
                </div>
            </div>
            <div class="result-card" id="fried-result"><div class="result-label">Score Fried</div><div class="result-value" id="fried-val">-</div><div class="result-unit">/ 5</div><div class="result-interp" id="fried-interp"></div></div>
        </div>
    </div>

    
    <div class="calc-page" id="calc-mna">
        <div class="calc-header">
            <button class="btn-back" onclick="closeCalc()">‚Üê</button>
            <div class="calc-header-info">
                <div class="calc-header-title">MNA Complet</div>
                <div class="calc-header-sub">Mini Nutritional Assessment</div>
            </div>
            <button class="btn-fav" onclick="toggleFav('mna')">‚òÖ</button>
        </div>
        <div class="calc-body">
            <div class="form-card">
                <div class="form-card-title">üçΩÔ∏è Utilisez le MNA-SF pour le d√©pistage</div>
                <p style="font-size:13px;color:var(--text-secondary);margin:16px 0;">Le MNA complet (18 questions) est r√©alis√© si le MNA-SF indique un risque. Utilisez le MNA-SF disponible dans cette application pour le d√©pistage initial.</p>
                <button class="form-input" style="background:var(--primary);color:white;border:none;cursor:pointer;font-weight:600;" onclick="openCalc('mnasf')">Ouvrir MNA-SF ‚Üí</button>
            </div>
        </div>
    </div>

    
    <div class="calc-page" id="calc-mmse">
        <div class="calc-header">
            <button class="btn-back" onclick="closeCalc()">‚Üê</button>
            <div class="calc-header-info">
                <div class="calc-header-title">MMSE</div>
                <div class="calc-header-sub">Mini Mental State Examination</div>
            </div>
            <button class="btn-fav" onclick="toggleFav('mmse')">‚òÖ</button>
        </div>
        <div class="calc-body">
            <div class="form-card">
                <div class="form-card-title">üß† Score MMSE</div>
                <p style="font-size:13px;color:var(--text-secondary);margin-bottom:16px;">Entrez le score total du MMSE r√©alis√© (max 30 points)</p>
                <div class="form-group">
                    <label class="form-label">Score total (/30)</label>
                    <input type="number" class="form-input" id="mmse-score" min="0" max="30" placeholder="Ex: 24" oninput="calcMMSE()">
                </div>
            </div>
            <div class="result-card" id="mmse-result"><div class="result-label">Interpr√©tation MMSE</div><div class="result-value" id="mmse-val">-</div><div class="result-unit">/ 30</div><div class="result-interp" id="mmse-interp"></div></div>
        </div>
    </div>

    
    <div class="calc-page" id="calc-horloge">
        <div class="calc-header">
            <button class="btn-back" onclick="closeCalc()">‚Üê</button>
            <div class="calc-header-info">
                <div class="calc-header-title">Test de l'Horloge</div>
                <div class="calc-header-sub">Clock Drawing Test</div>
            </div>
            <button class="btn-fav" onclick="toggleFav('horloge')">‚òÖ</button>
        </div>
        <div class="calc-body">
            <div class="form-card">
                <div class="form-card-title">üïê √âvaluation du dessin</div>
                <p style="font-size:13px;color:var(--text-secondary);margin-bottom:16px;">Demandez au patient de dessiner une horloge indiquant 11h10</p>
                <div class="form-group">
                    <label class="form-label">Score de Shulman (/5)</label>
                    <select class="form-select" id="horloge-score" onchange="calcHorloge()">
                        <option value="">S√©lectionner...</option>
                        <option value="5">5 - Parfait</option>
                        <option value="4">4 - L√©g√®res erreurs d'espacement</option>
                        <option value="3">3 - Aiguilles incorrectes mais chiffres pr√©sents</option>
                        <option value="2">2 - D√©sorganisation mod√©r√©e</option>
                        <option value="1">1 - D√©sorganisation s√©v√®re</option>
                        <option value="0">0 - Aucune repr√©sentation d'horloge</option>
                    </select>
                </div>
            </div>
            <div class="result-card" id="horloge-result"><div class="result-label">Test Horloge</div><div class="result-value" id="horloge-val">-</div><div class="result-unit">/ 5</div><div class="result-interp" id="horloge-interp"></div></div>
        </div>
    </div>

    
    <div class="calc-page" id="calc-tinetti">
        <div class="calc-header">
            <button class="btn-back" onclick="closeCalc()">‚Üê</button>
            <div class="calc-header-info">
                <div class="calc-header-title">Test de Tinetti</div>
                <div class="calc-header-sub">√âquilibre et marche</div>
            </div>
            <button class="btn-fav" onclick="toggleFav('tinetti')">‚òÖ</button>
        </div>
        <div class="calc-body">
            <div class="form-card">
                <div class="form-card-title">üö∂ Score Tinetti</div>
                <div class="form-group">
                    <label class="form-label">√âquilibre statique (/16)</label>
                    <input type="number" class="form-input tinetti-input" id="tinetti-eq" min="0" max="16" placeholder="0-16" oninput="calcTinetti()">
                </div>
                <div class="form-group">
                    <label class="form-label">Marche (/12)</label>
                    <input type="number" class="form-input tinetti-input" id="tinetti-ma" min="0" max="12" placeholder="0-12" oninput="calcTinetti()">
                </div>
            </div>
            <div class="result-card" id="tinetti-result"><div class="result-label">Score Tinetti</div><div class="result-value" id="tinetti-val">-</div><div class="result-unit">/ 28</div><div class="result-interp" id="tinetti-interp"></div></div>
        </div>
    </div>

    
    <div class="calc-page" id="calc-norton">
        <div class="calc-header">
            <button class="btn-back" onclick="closeCalc()">‚Üê</button>
            <div class="calc-header-info">
                <div class="calc-header-title">√âchelle de Norton</div>
                <div class="calc-header-sub">Risque d'escarres</div>
            </div>
            <button class="btn-fav" onclick="toggleFav('norton')">‚òÖ</button>
        </div>
        <div class="calc-body">
            <div class="form-card">
                <div class="form-card-title">üõèÔ∏è √âvaluation</div>
                <div class="form-group">
                    <label class="form-label">√âtat physique</label>
                    <select class="form-select norton-select" onchange="calcNorton()"><option value="4">4 - Bon</option><option value="3">3 - Moyen</option><option value="2">2 - Mauvais</option><option value="1">1 - Tr√®s mauvais</option></select>
                </div>
                <div class="form-group">
                    <label class="form-label">√âtat mental</label>
                    <select class="form-select norton-select" onchange="calcNorton()"><option value="4">4 - Alerte</option><option value="3">3 - Apathique</option><option value="2">2 - Confus</option><option value="1">1 - Stuporeux</option></select>
                </div>
                <div class="form-group">
                    <label class="form-label">Activit√©</label>
                    <select class="form-select norton-select" onchange="calcNorton()"><option value="4">4 - Ambulant</option><option value="3">3 - Marche avec aide</option><option value="2">2 - Assis au fauteuil</option><option value="1">1 - Alit√©</option></select>
                </div>
                <div class="form-group">
                    <label class="form-label">Mobilit√©</label>
                    <select class="form-select norton-select" onchange="calcNorton()"><option value="4">4 - Totale</option><option value="3">3 - L√©g√®rement limit√©e</option><option value="2">2 - Tr√®s limit√©e</option><option value="1">1 - Immobile</option></select>
                </div>
                <div class="form-group">
                    <label class="form-label">Incontinence</label>
                    <select class="form-select norton-select" onchange="calcNorton()"><option value="4">4 - Aucune</option><option value="3">3 - Occasionnelle</option><option value="2">2 - Urinaire</option><option value="1">1 - Double</option></select>
                </div>
            </div>
            <div class="result-card" id="norton-result"><div class="result-label">Score Norton</div><div class="result-value" id="norton-val">-</div><div class="result-unit">/ 20</div><div class="result-interp" id="norton-interp"></div></div>
        </div>
    </div>

    
    <div class="calc-page" id="calc-sppb">
        <div class="calc-header">
            <button class="btn-back" onclick="closeCalc()">‚Üê</button>
            <div class="calc-header-info">
                <div class="calc-header-title">SPPB</div>
                <div class="calc-header-sub">Short Physical Performance Battery</div>
            </div>
            <button class="btn-fav" onclick="toggleFav('sppb')">‚òÖ</button>
        </div>
        <div class="calc-body">
            <div class="form-card">
                <div class="form-card-title">üèÉ Performance physique</div>
                <div class="form-group">
                    <label class="form-label">√âquilibre</label>
                    <select class="form-select sppb-select" onchange="calcSPPB()"><option value="0">0 - Impossible</option><option value="1">1 - Pieds joints seul</option><option value="2">2 - Semi-tandem 10s</option><option value="3">3 - Tandem 3-9s</option><option value="4">4 - Tandem ‚â•10s</option></select>
                </div>
                <div class="form-group">
                    <label class="form-label">Vitesse de marche (4m)</label>
                    <select class="form-select sppb-select" onchange="calcSPPB()"><option value="0">0 - Impossible</option><option value="1">1 - &gt; 8.7s</option><option value="2">2 - 6.21-8.7s</option><option value="3">3 - 4.82-6.2s</option><option value="4">4 - &lt; 4.82s</option></select>
                </div>
                <div class="form-group">
                    <label class="form-label">Lever de chaise (5x)</label>
                    <select class="form-select sppb-select" onchange="calcSPPB()"><option value="0">0 - Impossible ou &gt;60s</option><option value="1">1 - &gt; 16.7s</option><option value="2">2 - 13.7-16.69s</option><option value="3">3 - 11.2-13.69s</option><option value="4">4 - &lt; 11.2s</option></select>
                </div>
            </div>
            <div class="result-card" id="sppb-result"><div class="result-label">Score SPPB</div><div class="result-value" id="sppb-val">-</div><div class="result-unit">/ 12</div><div class="result-interp" id="sppb-interp"></div></div>
        </div>
    </div>

    
    <div class="calc-page" id="calc-zarit">
        <div class="calc-header">
            <button class="btn-back" onclick="closeCalc()">‚Üê</button>
            <div class="calc-header-info">
                <div class="calc-header-title">Mini-Zarit</div>
                <div class="calc-header-sub">Fardeau de l'aidant</div>
            </div>
            <button class="btn-fav" onclick="toggleFav('zarit')">‚òÖ</button>
        </div>
        <div class="calc-body">
            <div class="form-card">
                <div class="form-card-title">ü§ù √âvaluation de l'aidant</div>
                <div class="check-list" id="zarit-list">
                    <div class="check-opt" data-pts="1" onclick="toggleCheck(this);calcZarit()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">Manque de temps personnel</div></div></div>
                    <div class="check-opt" data-pts="1" onclick="toggleCheck(this);calcZarit()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">Stress entre aide et responsabilit√©s</div></div></div>
                    <div class="check-opt" data-pts="1" onclick="toggleCheck(this);calcZarit()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">Col√®re en sa pr√©sence</div></div></div>
                    <div class="check-opt" data-pts="1" onclick="toggleCheck(this);calcZarit()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">Impact sur relations familiales</div></div></div>
                    <div class="check-opt" data-pts="1" onclick="toggleCheck(this);calcZarit()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">Tension en sa pr√©sence</div></div></div>
                    <div class="check-opt" data-pts="1" onclick="toggleCheck(this);calcZarit()"><span class="check-box">‚úì</span><div class="check-info"><div class="check-label">Sant√© alt√©r√©e par l'aide</div></div></div>
                </div>
            </div>
            <div class="result-card" id="zarit-result"><div class="result-label">Score Mini-Zarit</div><div class="result-value" id="zarit-val">-</div><div class="result-unit">/ 6</div><div class="result-interp" id="zarit-interp"></div></div>
        </div>
    </div>

    
    <div class="calc-page" id="calc-aggir">
        <div class="calc-header">
            <button class="btn-back" onclick="closeCalc()">‚Üê</button>
            <div class="calc-header-info">
                <div class="calc-header-title">AGGIR Simplifi√©</div>
                <div class="calc-header-sub">Estimation GIR</div>
            </div>
            <button class="btn-fav" onclick="toggleFav('aggir')">‚òÖ</button>
        </div>
        <div class="calc-body">
            <div class="form-card">
                <div class="form-card-title">üìä Estimation bas√©e sur ADL/IADL</div>
                <div class="form-group">
                    <label class="form-label">Score ADL (/6)</label>
                    <input type="number" class="form-input" id="aggir-adl" min="0" max="6" placeholder="0-6" oninput="calcAGGIR()">
                </div>
                <div class="form-group">
                    <label class="form-label">Score IADL (/8)</label>
                    <input type="number" class="form-input" id="aggir-iadl" min="0" max="8" placeholder="0-8" oninput="calcAGGIR()">
                </div>
            </div>
            <div class="result-card" id="aggir-result"><div class="result-label">GIR estim√©</div><div class="result-value" id="aggir-val">-</div><div class="result-unit"></div><div class="result-interp" id="aggir-interp"></div></div>
        </div>
    </div>

    

    
    <div class="modal-overlay" id="settingsModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">‚öôÔ∏è Param√®tres utilisateur</div>
                <button class="modal-close" onclick="closeSettingsModal()">√ó</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Pr√©nom et Nom</label>
                    <input type="text" class="form-input" id="settingName" placeholder="Dr. Giulia Scattu">
                </div>
                <div class="form-group">
                    <label class="form-label">Fonction</label>
                    <input type="text" class="form-input" id="settingRole" placeholder="M√©decin assistant">
                </div>
                <div class="form-group">
                    <label class="form-label">Service</label>
                    <input type="text" class="form-input" id="settingService" placeholder="UGA">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" onclick="closeSettingsModal()">Annuler</button>
                <button class="btn-primary" onclick="saveSettings()">Enregistrer</button>
            </div>
        </div>
    </div>

    
    <script>
    // ========== DATA ==========
    const CALCS = [
        {id:'cg',name:'Clairance Cr√©atinine',short:'Cockcroft-Gault',cat:'nephro',icon:'üß™',desc:'Estimation fonction r√©nale'},
        {id:'ckdepi',name:'DFG CKD-EPI',short:'CKD-EPI 2021',cat:'nephro',icon:'üß™',desc:'DFG estim√© sans race'},
        {id:'nacorr',name:'Natr√©mie corrig√©e',short:'Hyperglyc√©mie',cat:'nephro',icon:'üßÇ',desc:'Correction pour glyc√©mie'},
        {id:'osmo',name:'Osmolarit√©',short:'Plasmatique',cat:'nephro',icon:'üíß',desc:'Osmolarit√© calcul√©e'},
        {id:'ta',name:'Trou anionique',short:'Anion gap',cat:'nephro',icon:'‚ö°',desc:'Acidose m√©tabolique'},
        {id:'cacorr',name:'Calc√©mie corrig√©e',short:'Albumine',cat:'nephro',icon:'ü¶¥',desc:'Correction pour albumine'},
        {id:'chads',name:'CHA‚ÇÇDS‚ÇÇ-VASc',short:'Risque AVC',cat:'cardio',icon:'ü´Ä',desc:'FA - indication anticoag'},
        {id:'hasbled',name:'HAS-BLED',short:'Risque h√©mor.',cat:'cardio',icon:'ü©∏',desc:'Risque h√©morragique'},
        {id:'qtc',name:'QTc corrig√©',short:'Bazett',cat:'cardio',icon:'üìä',desc:'QT corrig√© ECG'},
        {id:'wellsep',name:'Wells EP',short:'Embolie pulm.',cat:'cardio',icon:'ü´Å',desc:'Probabilit√© EP'},
        {id:'wellstvp',name:'Wells TVP',short:'Thrombose',cat:'cardio',icon:'ü¶µ',desc:'Probabilit√© TVP'},
        {id:'qsofa',name:'qSOFA',short:'Quick SOFA',cat:'rea',icon:'üö®',desc:'D√©pistage sepsis'},
        {id:'sofa',name:'SOFA',short:'D√©faillances',cat:'rea',icon:'üè•',desc:'Score d√©faillance organes'},
        {id:'news',name:'NEWS 2',short:'Warning Score',cat:'rea',icon:'‚ö†Ô∏è',desc:'D√©tection d√©t√©rioration'},
        {id:'glasgow',name:'Glasgow',short:'GCS',cat:'rea',icon:'üß†',desc:'√âtat de conscience'},
        {id:'curb65',name:'CURB-65',short:'Pneumopathie',cat:'pneumo',icon:'ü´Å',desc:'Gravit√© pneumonie'},
        {id:'fine',name:'Fine PSI',short:'Pneumonia SI',cat:'pneumo',icon:'ü´Å',desc:'Pronostic pneumonie'},
        {id:'canadian',name:'Canadian CT Head',short:'TDM cr√¢nien',cat:'neuro',icon:'üß†',desc:'Indication scanner TC'},
        {id:'child',name:'Child-Pugh',short:'Cirrhose',cat:'gastro',icon:'üü°',desc:'S√©v√©rit√© cirrhose'},
        {id:'meld',name:'MELD',short:'Liver Disease',cat:'gastro',icon:'üü°',desc:'Pronostic h√©patique'},
        {id:'gbs',name:'Glasgow-Blatchford',short:'HDH',cat:'gastro',icon:'ü©∏',desc:'H√©morragie digestive'},
        {id:'alvarado',name:'Alvarado',short:'Appendicite',cat:'gastro',icon:'üî¥',desc:'Probabilit√© appendicite'},
        {id:'apgar',name:'Apgar',short:'Nouveau-n√©',cat:'pediatrie',icon:'üë∂',desc:'√âvaluation naissance'},
        {id:'silverman',name:'Silverman',short:'D√©tresse respi',cat:'pediatrie',icon:'üë∂',desc:'D√©tresse respiratoire NN'},
        {id:'imc',name:'IMC',short:'Masse corporelle',cat:'general',icon:'‚öñÔ∏è',desc:'Indice masse corporelle'},
        {id:'sc',name:'Surface corporelle',short:'Dubois',cat:'general',icon:'üìê',desc:'Surface en m¬≤'},
        {id:'poids',name:'Poids id√©al',short:'Lorentz',cat:'general',icon:'‚öñÔ∏è',desc:'Poids th√©orique'},
        {id:'dose',name:'Dose/poids',short:'Posologie',cat:'general',icon:'üíä',desc:'Dose selon poids'},
        // GERIATRIE
        {id:'adl',name:'ADL - Katz',short:'Autonomie base',cat:'geriatrie',icon:'üßì',desc:'Activit√©s vie quotidienne'},
        {id:'iadl',name:'IADL - Lawton',short:'Autonomie instr.',cat:'geriatrie',icon:'üßì',desc:'Activit√©s instrumentales'},
        {id:'mna',name:'MNA',short:'Nutrition',cat:'geriatrie',icon:'üçΩÔ∏è',desc:'Mini Nutritional Assessment'},
        {id:'mnasf',name:'MNA-SF',short:'D√©pistage nutri',cat:'geriatrie',icon:'üçΩÔ∏è',desc:'MNA version courte'},
        {id:'mmse',name:'MMSE',short:'Cognition',cat:'geriatrie',icon:'üß†',desc:'Mini Mental State'},
        {id:'horloge',name:'Test Horloge',short:'Cognition rapide',cat:'geriatrie',icon:'üïê',desc:'D√©pistage cognitif'},
        {id:'gds15',name:'GDS-15',short:'D√©pression',cat:'geriatrie',icon:'üòî',desc:'Geriatric Depression Scale'},
        {id:'gds4',name:'Mini-GDS',short:'D√©pistage d√©p.',cat:'geriatrie',icon:'üòî',desc:'D√©pression 4 questions'},
        {id:'charlson',name:'Charlson',short:'Comorbidit√©s',cat:'geriatrie',icon:'üìã',desc:'Index de comorbidit√©s'},
        {id:'tinetti',name:'Tinetti',short:'√âquilibre',cat:'geriatrie',icon:'üö∂',desc:'√âquilibre et marche'},
        {id:'getupgo',name:'Get Up and Go',short:'Mobilit√©',cat:'geriatrie',icon:'üö∂',desc:'Test mobilit√© chronom√©tr√©'},
        {id:'braden',name:'Braden',short:'Escarres',cat:'geriatrie',icon:'üõèÔ∏è',desc:'Risque d\'escarres'},
        {id:'norton',name:'Norton',short:'Escarres',cat:'geriatrie',icon:'üõèÔ∏è',desc:'Risque d\'escarres'},
        {id:'g8',name:'G8',short:'Oncog√©riatrie',cat:'geriatrie',icon:'üéóÔ∏è',desc:'D√©pistage fragilit√© cancer'},
        {id:'cam',name:'CAM',short:'Confusion',cat:'geriatrie',icon:'üòµ',desc:'Confusion Assessment Method'},
        {id:'fried',name:'Fried',short:'Fragilit√©',cat:'geriatrie',icon:'üí™',desc:'Crit√®res de fragilit√©'},
        {id:'sppb',name:'SPPB',short:'Performance',cat:'geriatrie',icon:'üèÉ',desc:'Short Physical Performance'},
        {id:'zarit',name:'Zarit',short:'Aidant',cat:'geriatrie',icon:'ü§ù',desc:'Fardeau de l\'aidant'},
        {id:'aggir',name:'AGGIR (GIR)',short:'D√©pendance',cat:'geriatrie',icon:'üìä',desc:'Groupe Iso-Ressources'}
    ];
    
    const CATS = {
        geriatrie:'G√©riatrie',
        nephro:'N√©phro',cardio:'Cardio',rea:'R√©a',pneumo:'Pneumo',
        neuro:'Neuro',gastro:'Gastro',pediatrie:'P√©diatrie',general:'G√©n√©ral'
    };
    
    let favorites = JSON.parse(localStorage.getItem('medcalc-fav-v7')) || ['cg','chads','glasgow','qsofa','wellsep','imc'];
    let history = JSON.parse(localStorage.getItem('medcalc-hist-v7')) || [];
    let currentCat = 'all';
    
    // User settings
    let userSettings = JSON.parse(localStorage.getItem('medcalc-user-v7')) || {
        name: 'Dr. Giulia Scattu',
        role: 'M√©decin assistant',
        service: 'UGA'
    };
    
    // Language settings
    let currentLang = localStorage.getItem('medcalc-lang-v7') || 'fr';
    
    const LANGS = {
        fr: { flag: 'üá´üá∑', code: 'FR', name: 'Fran√ßais' },
        de: { flag: 'üá©üá™', code: 'DE', name: 'Deutsch' },
        en: { flag: 'üá¨üáß', code: 'EN', name: 'English' },
        it: { flag: 'üáÆüáπ', code: 'IT', name: 'Italiano' },
        ro: { flag: 'üá∑üá¥', code: 'RO', name: 'Rom√¢nƒÉ' }
    };
    
    const TRANSLATIONS = {
        fr: {
            search: 'Rechercher un score...',
            calculs: 'üìä Calculs',
            guidelines: 'üìñ Guidelines',
            medchat: 'üí¨ MedChat',
            home: 'Accueil',
            history: 'Historique',
            favorites: 'Favoris',
            allScores: 'Tous les scores',
            noHistory: 'Aucun calcul r√©cent',
            noFavorites: 'Aucun favori'
        },
        de: {
            search: 'Score suchen...',
            calculs: 'üìä Rechner',
            guidelines: 'üìñ Leitlinien',
            medchat: 'üí¨ MedChat',
            home: 'Start',
            history: 'Verlauf',
            favorites: 'Favoriten',
            allScores: 'Alle Scores',
            noHistory: 'Keine aktuellen Berechnungen',
            noFavorites: 'Keine Favoriten'
        },
        en: {
            search: 'Search a score...',
            calculs: 'üìä Calculators',
            guidelines: 'üìñ Guidelines',
            medchat: 'üí¨ MedChat',
            home: 'Home',
            history: 'History',
            favorites: 'Favorites',
            allScores: 'All scores',
            noHistory: 'No recent calculations',
            noFavorites: 'No favorites'
        },
        it: {
            search: 'Cerca un punteggio...',
            calculs: 'üìä Calcolatori',
            guidelines: 'üìñ Linee guida',
            medchat: 'üí¨ MedChat',
            home: 'Home',
            history: 'Cronologia',
            favorites: 'Preferiti',
            allScores: 'Tutti i punteggi',
            noHistory: 'Nessun calcolo recente',
            noFavorites: 'Nessun preferito'
        },
        ro: {
            search: 'CƒÉuta»õi un scor...',
            calculs: 'üìä Calculatoare',
            guidelines: 'üìñ Ghiduri',
            medchat: 'üí¨ MedChat',
            home: 'AcasƒÉ',
            history: 'Istoric',
            favorites: 'Favorite',
            allScores: 'Toate scorurile',
            noHistory: 'Niciun calcul recent',
            noFavorites: 'Niciun favorit'
        }
    };
    
    // ========== LANGUAGE FUNCTIONS ==========
    function toggleLangDropdown() {
        document.getElementById('langDropdown').classList.toggle('show');
    }
    
    function setLanguage(lang) {
        currentLang = lang;
        localStorage.setItem('medcalc-lang-v7', lang);
        
        // Update button
        document.getElementById('currentLangFlag').textContent = LANGS[lang].flag;
        document.getElementById('currentLangCode').textContent = LANGS[lang].code;
        
        // Update dropdown active state
        document.querySelectorAll('.lang-option').forEach(opt => {
            opt.classList.remove('active');
            if (opt.textContent.includes(LANGS[lang].name)) {
                opt.classList.add('active');
            }
        });
        
        // Update UI texts
        updateUILanguage();
        
        // Close dropdown
        document.getElementById('langDropdown').classList.remove('show');
    }
    
    function updateUILanguage() {
        const t = TRANSLATIONS[currentLang];
        
        // Search placeholder
        document.getElementById('searchInput').placeholder = t.search;
        
        // Main tabs
        const mainTabs = document.querySelectorAll('.main-tab');
        if (mainTabs[0]) mainTabs[0].textContent = t.calculs;
        if (mainTabs[1]) mainTabs[1].textContent = t.guidelines;
        if (mainTabs[2]) mainTabs[2].textContent = t.medchat;
        
        // Bottom nav
        const navLabels = document.querySelectorAll('.nav-label');
        if (navLabels[0]) navLabels[0].textContent = t.home;
        if (navLabels[1]) navLabels[1].textContent = t.history;
        if (navLabels[2]) navLabels[2].textContent = t.favorites;
    }
    
    // ========== USER SETTINGS FUNCTIONS ==========
    function openSettingsModal() {
        document.getElementById('settingName').value = userSettings.name;
        document.getElementById('settingRole').value = userSettings.role;
        document.getElementById('settingService').value = userSettings.service;
        document.getElementById('settingsModal').classList.add('show');
    }
    
    function closeSettingsModal() {
        document.getElementById('settingsModal').classList.remove('show');
    }
    
    function saveSettings() {
        userSettings.name = document.getElementById('settingName').value || 'Utilisateur';
        userSettings.role = document.getElementById('settingRole').value || '';
        userSettings.service = document.getElementById('settingService').value || '';
        
        localStorage.setItem('medcalc-user-v7', JSON.stringify(userSettings));
        updateUserDisplay();
        closeSettingsModal();
    }
    
    function updateUserDisplay() {
        // Update avatar initials
        const nameParts = userSettings.name.replace('Dr. ', '').split(' ');
        let initials = nameParts.map(p => p[0]).join('').substring(0, 2).toUpperCase();
        document.getElementById('userAvatar').textContent = initials || '??';
        
        // Update name and role
        document.getElementById('userName').textContent = userSettings.name;
        const roleText = [userSettings.role, userSettings.service].filter(x => x).join(' ¬∑ ');
        document.getElementById('userRole').textContent = roleText;
    }
    
    // ========== SECTION SWITCHING (CORRIG√â) ==========
    function switchSection(section) {
        const calcSection = document.getElementById('sectionCalculs');
        const guideSection = document.getElementById('sectionGuidelines');
        const chatSection = document.getElementById('sectionMedchat');
        const searchCont = document.getElementById('searchContainer');
        const bottomNav = document.querySelector('.bottom-nav');
        const tabs = document.querySelectorAll('.main-tab');
        
        // Reset all sections
        calcSection.classList.add('hidden');
        guideSection.classList.remove('active');
        chatSection.classList.remove('active');
        searchCont.classList.add('hidden');
        tabs.forEach(t => t.classList.remove('active'));
        
        if (section === 'calculs') {
            calcSection.classList.remove('hidden');
            searchCont.classList.remove('hidden');
            tabs[0].classList.add('active');
            bottomNav.style.display = 'flex';
        } else if (section === 'guidelines') {
            guideSection.classList.add('active');
            tabs[1].classList.add('active');
            bottomNav.style.display = 'flex';
        } else if (section === 'medchat') {
            chatSection.classList.add('active');
            tabs[2].classList.add('active');
            bottomNav.style.display = 'none'; // Hide bottom nav for chat
        }
    }
    
    // ========== GUIDELINES ==========
    function toggleGuideCat(el) {
        el.classList.toggle('open');
    }
    
    function openGuide(id) {
        const page = document.getElementById('guide-' + id);
        if (page) {
            page.classList.add('active');
            document.body.style.overflow = 'hidden';
        }
    }
    
    function closeGuide() {
        document.querySelectorAll('.guide-page').forEach(p => p.classList.remove('active'));
        document.body.style.overflow = '';
    }
    
    // ========== RENDER ==========
    function renderFavorites() {
        const grid = document.getElementById('favGrid');
        if (!grid) return;
        grid.innerHTML = favorites.slice(0,6).map(id => {
            const c = CALCS.find(x => x.id === id);
            if (!c) return '';
            return `<div class="fav-card" onclick="openCalc('${c.id}')">
                <div class="fav-icon">${c.icon}</div>
                <div class="fav-name">${c.name}</div>
                <div class="fav-cat">${c.short}</div>
            </div>`;
        }).join('');
    }
    
    function renderCalcList() {
        const list = document.getElementById('calcList');
        if (!list) return;
        
        let filtered = currentCat === 'all' ? CALCS : CALCS.filter(c => c.cat === currentCat);
        
        if (currentCat === 'all') {
            let html = '';
            Object.keys(CATS).forEach(cat => {
                const catCalcs = filtered.filter(c => c.cat === cat);
                if (catCalcs.length) {
                    html += `<div class="calc-cat-title">${CATS[cat]}</div>`;
                    html += catCalcs.map(c => calcItemHTML(c)).join('');
                }
            });
            list.innerHTML = html;
        } else {
            list.innerHTML = filtered.map(c => calcItemHTML(c)).join('');
        }
    }
    
    function calcItemHTML(c) {
        return `<div class="calc-item" onclick="openCalc('${c.id}')">
            <div class="calc-icon">${c.icon}</div>
            <div class="calc-info">
                <div class="calc-name">${c.name}</div>
                <div class="calc-desc">${c.desc}</div>
            </div>
            <div class="calc-arrow">‚Ä∫</div>
        </div>`;
    }
    
    function renderHistory() {
        const list = document.getElementById('historyList');
        if (!list) return;
        
        if (history.length === 0) {
            list.innerHTML = `<div class="empty-state">
                <div class="empty-icon">üìä</div>
                <div class="empty-text">Aucun calcul r√©cent</div>
            </div>`;
            return;
        }
        
        list.innerHTML = history.slice(0,20).map(h => `
            <div class="history-item" onclick="openCalc('${h.calc}')">
                <div class="history-icon">${CALCS.find(c=>c.id===h.calc)?.icon || 'üìä'}</div>
                <div class="history-info">
                    <div class="history-name">${h.name}</div>
                    <div class="history-date">${h.date}</div>
                </div>
                <div class="history-result">${h.value} ${h.unit}</div>
            </div>
        `).join('');
    }
    
    function renderFavPage() {
        const list = document.getElementById('favList');
        if (!list) return;
        
        if (favorites.length === 0) {
            list.innerHTML = `<div class="empty-state">
                <div class="empty-icon">‚≠ê</div>
                <div class="empty-text">Aucun favori</div>
            </div>`;
            return;
        }
        
        list.innerHTML = favorites.map(id => {
            const c = CALCS.find(x => x.id === id);
            if (!c) return '';
            return calcItemHTML(c);
        }).join('');
    }
    
    // ========== NAVIGATION ==========
    function setupTabs() {
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', function() {
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                this.classList.add('active');
                currentCat = this.dataset.cat;
                renderCalcList();
            });
        });
    }
    
    function setupNav() {
        document.querySelectorAll('.nav-item').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.nav-item').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                
                const page = this.dataset.page;
                document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
                document.getElementById('page-' + page).classList.add('active');
                
                if (page === 'favorites') renderFavPage();
            });
        });
    }
    
    // ========== SEARCH ==========
    function handleSearch(q) {
        const results = document.getElementById('searchResults');
        if (!q.trim()) {
            results.classList.remove('show');
            return;
        }
        
        const filtered = CALCS.filter(c => 
            c.name.toLowerCase().includes(q.toLowerCase()) ||
            c.short.toLowerCase().includes(q.toLowerCase()) ||
            c.desc.toLowerCase().includes(q.toLowerCase())
        );
        
        if (filtered.length === 0) {
            results.innerHTML = '<div class="search-empty">Aucun r√©sultat</div>';
        } else {
            results.innerHTML = filtered.map(c => `
                <div class="search-item" onclick="openCalc('${c.id}');closeSearch()">
                    <span class="search-icon-item">${c.icon}</span>
                    <span class="search-name">${c.name}</span>
                </div>
            `).join('');
        }
        results.classList.add('show');
    }
    
    function closeSearch() {
        document.getElementById('searchResults').classList.remove('show');
        document.getElementById('searchInput').value = '';
    }
    
    // ========== CALC MANAGEMENT ==========
    function openCalc(id) {
        const page = document.getElementById('calc-' + id);
        if (page) {
            page.classList.add('active');
            document.body.style.overflow = 'hidden';
            const favBtn = page.querySelector('.btn-fav');
            if (favBtn) {
                favBtn.classList.toggle('active', favorites.includes(id));
            }
        }
    }
    
    function closeCalc() {
        document.querySelectorAll('.calc-page').forEach(p => p.classList.remove('active'));
        document.body.style.overflow = '';
    }
    
    function toggleFav(id) {
        const idx = favorites.indexOf(id);
        if (idx > -1) {
            favorites.splice(idx, 1);
        } else {
            favorites.unshift(id);
        }
        localStorage.setItem('medcalc-fav-v7', JSON.stringify(favorites));
        
        const page = document.getElementById('calc-' + id);
        if (page) {
            const btn = page.querySelector('.btn-fav');
            if (btn) btn.classList.toggle('active', favorites.includes(id));
        }
        
        renderFavorites();
    }
    
    function addHistory(calc, name, value, unit) {
        const now = new Date();
        const date = now.toLocaleDateString('fr-FR') + ' ' + now.toLocaleTimeString('fr-FR', {hour:'2-digit', minute:'2-digit'});
        history.unshift({calc, name, value, unit, date});
        if (history.length > 50) history.pop();
        localStorage.setItem('medcalc-hist-v7', JSON.stringify(history));
        renderHistory();
    }
    
    // ========== UI HELPERS ==========
    function toggleRef(btn) {
        btn.classList.toggle('open');
        btn.nextElementSibling.classList.toggle('open');
    }
    
    function selectRadio(el, group) {
        el.closest('.radio-group').querySelectorAll('.radio-opt').forEach(o => o.classList.remove('selected'));
        el.classList.add('selected');
    }
    
    function toggleCheck(el) {
        el.classList.toggle('selected');
    }
    
    function selectScore(el, group) {
        document.getElementById(group).querySelectorAll('.score-opt').forEach(o => o.classList.remove('selected'));
        el.classList.add('selected');
    }
    
    // ========== CALCULATION FUNCTIONS ==========
    
    function calcCG() {
        const age = parseFloat(document.getElementById('cg-age').value);
        const poids = parseFloat(document.getElementById('cg-poids').value);
        const creat = parseFloat(document.getElementById('cg-creat').value);
        const sex = document.querySelector('input[name="cg-sex"]:checked').value;
        if (!age || !poids || !creat) return;
        let cl = ((140 - age) * poids * (sex === 'M' ? 1.23 : 1.04)) / creat;
        cl = Math.round(cl);
        document.getElementById('cg-val').textContent = cl;
        document.getElementById('cg-result').classList.add('has-result');
        const interp = document.getElementById('cg-interp');
        if (cl >= 90) { interp.textContent = '‚úì Fonction r√©nale normale'; interp.className = 'result-interp show normal'; }
        else if (cl >= 60) { interp.textContent = '‚ö† IRC l√©g√®re (stade 2)'; interp.className = 'result-interp show warning'; }
        else if (cl >= 30) { interp.textContent = '‚ö† IRC mod√©r√©e (stade 3)'; interp.className = 'result-interp show warning'; }
        else if (cl >= 15) { interp.textContent = '‚õî IRC s√©v√®re (stade 4)'; interp.className = 'result-interp show danger'; }
        else { interp.textContent = '‚õî IRC terminale (stade 5)'; interp.className = 'result-interp show danger'; }
        addHistory('cg', 'Clairance Cr√©atinine', cl, 'mL/min');
    }
    
    function calcCKDEPI() {
        const age = parseFloat(document.getElementById('ckdepi-age').value);
        const creat = parseFloat(document.getElementById('ckdepi-creat').value);
        const sex = document.querySelector('input[name="ckdepi-sex"]:checked').value;
        if (!age || !creat) return;
        const creatMgdl = creat / 88.4;
        let dfg;
        if (sex === 'F') {
            dfg = creatMgdl <= 0.7 ? 142 * Math.pow(creatMgdl/0.7, -0.241) * Math.pow(0.9938, age) : 142 * Math.pow(creatMgdl/0.7, -1.200) * Math.pow(0.9938, age);
        } else {
            dfg = creatMgdl <= 0.9 ? 141 * Math.pow(creatMgdl/0.9, -0.411) * Math.pow(0.9938, age) : 141 * Math.pow(creatMgdl/0.9, -1.209) * Math.pow(0.9938, age);
        }
        dfg = Math.round(dfg);
        document.getElementById('ckdepi-val').textContent = dfg;
        document.getElementById('ckdepi-result').classList.add('has-result');
        const interp = document.getElementById('ckdepi-interp');
        if (dfg >= 90) { interp.textContent = '‚úì Fonction r√©nale normale'; interp.className = 'result-interp show normal'; }
        else if (dfg >= 60) { interp.textContent = '‚ö† IRC l√©g√®re'; interp.className = 'result-interp show warning'; }
        else if (dfg >= 30) { interp.textContent = '‚ö† IRC mod√©r√©e'; interp.className = 'result-interp show warning'; }
        else if (dfg >= 15) { interp.textContent = '‚õî IRC s√©v√®re'; interp.className = 'result-interp show danger'; }
        else { interp.textContent = '‚õî IRC terminale'; interp.className = 'result-interp show danger'; }
        addHistory('ckdepi', 'DFG CKD-EPI', dfg, 'mL/min/1.73m¬≤');
    }
    
    function calcNaCorr() {
        const na = parseFloat(document.getElementById('nacorr-na').value);
        const glyc = parseFloat(document.getElementById('nacorr-glyc').value);
        if (!na || !glyc) return;
        const nacorr = Math.round((na + 0.3 * (glyc - 5)) * 10) / 10;
        document.getElementById('nacorr-val').textContent = nacorr;
        document.getElementById('nacorr-result').classList.add('has-result');
        const interp = document.getElementById('nacorr-interp');
        if (nacorr < 135) { interp.textContent = '‚ö† Hyponatr√©mie'; interp.className = 'result-interp show warning'; }
        else if (nacorr > 145) { interp.textContent = '‚ö† Hypernatr√©mie'; interp.className = 'result-interp show warning'; }
        else { interp.textContent = '‚úì Normal'; interp.className = 'result-interp show normal'; }
        addHistory('nacorr', 'Natr√©mie corrig√©e', nacorr, 'mmol/L');
    }
    
    function calcOsmo() {
        const na = parseFloat(document.getElementById('osmo-na').value);
        const glyc = parseFloat(document.getElementById('osmo-glyc').value);
        const uree = parseFloat(document.getElementById('osmo-uree').value);
        if (!na || !glyc || !uree) return;
        const osmo = Math.round(2 * na + glyc + uree);
        document.getElementById('osmo-val').textContent = osmo;
        document.getElementById('osmo-result').classList.add('has-result');
        const interp = document.getElementById('osmo-interp');
        if (osmo < 280) { interp.textContent = '‚ö† Hypo-osmolarit√©'; interp.className = 'result-interp show warning'; }
        else if (osmo > 300) { interp.textContent = '‚ö† Hyperosmolarit√©'; interp.className = 'result-interp show warning'; }
        else { interp.textContent = '‚úì Normal (280-300)'; interp.className = 'result-interp show normal'; }
        addHistory('osmo', 'Osmolarit√©', osmo, 'mOsm/L');
    }
    
    function calcTA() {
        const na = parseFloat(document.getElementById('ta-na').value);
        const cl = parseFloat(document.getElementById('ta-cl').value);
        const hco3 = parseFloat(document.getElementById('ta-hco3').value);
        if (!na || !cl || !hco3) return;
        const ta = Math.round(na - cl - hco3);
        document.getElementById('ta-val').textContent = ta;
        document.getElementById('ta-result').classList.add('has-result');
        const interp = document.getElementById('ta-interp');
        if (ta > 16) { interp.textContent = '‚ö† Augment√©'; interp.className = 'result-interp show warning'; }
        else if (ta < 8) { interp.textContent = '‚ö† Diminu√©'; interp.className = 'result-interp show warning'; }
        else { interp.textContent = '‚úì Normal (8-16)'; interp.className = 'result-interp show normal'; }
        addHistory('ta', 'Trou anionique', ta, 'mmol/L');
    }
    
    function calcCaCorr() {
        const ca = parseFloat(document.getElementById('cacorr-ca').value);
        const alb = parseFloat(document.getElementById('cacorr-alb').value);
        if (!ca || !alb) return;
        const cacorr = Math.round((ca + 0.02 * (40 - alb)) * 100) / 100;
        document.getElementById('cacorr-val').textContent = cacorr;
        document.getElementById('cacorr-result').classList.add('has-result');
        const interp = document.getElementById('cacorr-interp');
        if (cacorr < 2.2) { interp.textContent = '‚ö† Hypocalc√©mie'; interp.className = 'result-interp show warning'; }
        else if (cacorr > 2.6) { interp.textContent = '‚ö† Hypercalc√©mie'; interp.className = 'result-interp show warning'; }
        else { interp.textContent = '‚úì Normal (2.2-2.6)'; interp.className = 'result-interp show normal'; }
        addHistory('cacorr', 'Calc√©mie corrig√©e', cacorr, 'mmol/L');
    }
    
    function calcIMC() {
        const taille = parseFloat(document.getElementById('imc-taille').value);
        const poids = parseFloat(document.getElementById('imc-poids').value);
        if (!taille || !poids) return;
        const imc = Math.round((poids / Math.pow(taille/100, 2)) * 10) / 10;
        document.getElementById('imc-val').textContent = imc;
        document.getElementById('imc-result').classList.add('has-result');
        const interp = document.getElementById('imc-interp');
        if (imc < 18.5) { interp.textContent = '‚ö† Insuffisance pond√©rale'; interp.className = 'result-interp show warning'; }
        else if (imc < 25) { interp.textContent = '‚úì Poids normal'; interp.className = 'result-interp show normal'; }
        else if (imc < 30) { interp.textContent = '‚ö† Surpoids'; interp.className = 'result-interp show warning'; }
        else { interp.textContent = '‚õî Ob√©sit√©'; interp.className = 'result-interp show danger'; }
        addHistory('imc', 'IMC', imc, 'kg/m¬≤');
    }
    
    function calcGlasgow() {
        const y = document.querySelector('#gla-y .score-opt.selected');
        const v = document.querySelector('#gla-v .score-opt.selected');
        const m = document.querySelector('#gla-m .score-opt.selected');
        if (!y || !v || !m) return;
        const score = parseInt(y.dataset.val) + parseInt(v.dataset.val) + parseInt(m.dataset.val);
        document.getElementById('gla-val').textContent = score;
        document.getElementById('gla-result').classList.add('has-result');
        const interp = document.getElementById('gla-interp');
        if (score === 15) { interp.textContent = '‚úì Normal'; interp.className = 'result-interp show normal'; }
        else if (score >= 13) { interp.textContent = '‚ö† TC l√©ger'; interp.className = 'result-interp show warning'; }
        else if (score >= 9) { interp.textContent = '‚ö† TC mod√©r√©'; interp.className = 'result-interp show warning'; }
        else { interp.textContent = '‚õî TC grave'; interp.className = 'result-interp show danger'; }
        addHistory('glasgow', 'Glasgow', score, '/15');
    }
    
    function calcQsofa() {
        const selected = document.querySelectorAll('#calc-qsofa .check-opt.selected');
        const score = selected.length;
        document.getElementById('qsofa-val').textContent = score;
        const interp = document.getElementById('qsofa-interp');
        if (score >= 2) { interp.textContent = '‚õî Risque √©lev√©'; interp.className = 'result-interp show danger'; }
        else { interp.textContent = '‚úì Risque faible'; interp.className = 'result-interp show normal'; }
        addHistory('qsofa', 'qSOFA', score, '/3');
    }
    
    function calcChads() {
        let score = 0;
        document.querySelectorAll('#chads-list .check-opt.selected').forEach(el => { score += parseInt(el.dataset.pts); });
        document.getElementById('chads-val').textContent = score;
        const interp = document.getElementById('chads-interp');
        if (score === 0) { interp.textContent = '‚úì Risque faible'; interp.className = 'result-interp show normal'; }
        else if (score === 1) { interp.textContent = '‚ö† Consid√©rer anticoag'; interp.className = 'result-interp show warning'; }
        else { interp.textContent = '‚õî Anticoag recommand√©e'; interp.className = 'result-interp show danger'; }
        addHistory('chads', 'CHA‚ÇÇDS‚ÇÇ-VASc', score, '/9');
    }
    
    function calcHASBLED() {
        let score = 0;
        document.querySelectorAll('#hasbled-list .check-opt.selected').forEach(el => { score += parseInt(el.dataset.pts); });
        document.getElementById('hasbled-val').textContent = score;
        const interp = document.getElementById('hasbled-interp');
        if (score <= 1) { interp.textContent = '‚úì Risque faible'; interp.className = 'result-interp show normal'; }
        else if (score === 2) { interp.textContent = '‚ö† Risque mod√©r√©'; interp.className = 'result-interp show warning'; }
        else { interp.textContent = '‚õî Risque √©lev√©'; interp.className = 'result-interp show danger'; }
        addHistory('hasbled', 'HAS-BLED', score, '/9');
    }
    
    function calcWellsEP() {
        let score = 0;
        document.querySelectorAll('#wellsep-list .check-opt.selected').forEach(el => { score += parseFloat(el.dataset.pts); });
        document.getElementById('wellsep-val').textContent = score;
        const interp = document.getElementById('wellsep-interp');
        if (score <= 4) { interp.textContent = '‚úì EP improbable'; interp.className = 'result-interp show normal'; }
        else { interp.textContent = '‚õî EP probable'; interp.className = 'result-interp show danger'; }
        addHistory('wellsep', 'Wells EP', score, 'pts');
    }
    
    function calcWellsTVP() {
        let score = 0;
        document.querySelectorAll('#wellstvp-list .check-opt.selected').forEach(el => { score += parseInt(el.dataset.pts); });
        document.getElementById('wellstvp-val').textContent = score;
        const interp = document.getElementById('wellstvp-interp');
        if (score < 2) { interp.textContent = '‚úì TVP improbable'; interp.className = 'result-interp show normal'; }
        else { interp.textContent = '‚õî TVP probable'; interp.className = 'result-interp show danger'; }
        addHistory('wellstvp', 'Wells TVP', score, 'pts');
    }
    
    function calcQTc() {
        const qt = parseFloat(document.getElementById('qtc-qt').value);
        const fc = parseFloat(document.getElementById('qtc-fc').value);
        if (!qt || !fc) return;
        const rr = 60 / fc;
        const qtc = Math.round(qt / Math.sqrt(rr));
        document.getElementById('qtc-val').textContent = qtc;
        document.getElementById('qtc-result').classList.add('has-result');
        const interp = document.getElementById('qtc-interp');
        if (qtc > 500) { interp.textContent = '‚õî QT tr√®s allong√©'; interp.className = 'result-interp show danger'; }
        else if (qtc > 450) { interp.textContent = '‚ö† QT allong√©'; interp.className = 'result-interp show warning'; }
        else { interp.textContent = '‚úì QTc normal'; interp.className = 'result-interp show normal'; }
        addHistory('qtc', 'QTc', qtc, 'ms');
    }
    
    function calcSOFA() {
        const selects = document.querySelectorAll('#calc-sofa .sofa-select');
        let score = 0;
        selects.forEach(s => score += parseInt(s.value));
        document.getElementById('sofa-val').textContent = score;
        const interp = document.getElementById('sofa-interp');
        if (score <= 1) { interp.textContent = '‚úì Mortalit√© <3%'; interp.className = 'result-interp show normal'; }
        else if (score <= 5) { interp.textContent = '‚ö† Mortalit√© 5-15%'; interp.className = 'result-interp show warning'; }
        else { interp.textContent = '‚õî Mortalit√© >20%'; interp.className = 'result-interp show danger'; }
        addHistory('sofa', 'SOFA', score, '/24');
    }
    
    function calcNEWS() {
        const selects = document.querySelectorAll('#calc-news .news-select');
        let score = 0;
        selects.forEach(s => score += parseInt(s.value));
        document.getElementById('news-val').textContent = score;
        const interp = document.getElementById('news-interp');
        if (score <= 4) { interp.textContent = '‚úì Risque faible'; interp.className = 'result-interp show normal'; }
        else if (score <= 6) { interp.textContent = '‚ö† Risque mod√©r√©'; interp.className = 'result-interp show warning'; }
        else { interp.textContent = '‚õî Risque √©lev√©'; interp.className = 'result-interp show danger'; }
        addHistory('news', 'NEWS 2', score, '/20');
    }
    
    function calcCURB65() {
        let score = 0;
        document.querySelectorAll('#curb65-list .check-opt.selected').forEach(el => { score += parseInt(el.dataset.pts); });
        document.getElementById('curb65-val').textContent = score;
        const interp = document.getElementById('curb65-interp');
        if (score <= 1) { interp.textContent = '‚úì Ambulatoire'; interp.className = 'result-interp show normal'; }
        else if (score === 2) { interp.textContent = '‚ö† Hospitalisation'; interp.className = 'result-interp show warning'; }
        else { interp.textContent = '‚õî Soins intensifs'; interp.className = 'result-interp show danger'; }
        addHistory('curb65', 'CURB-65', score, '/5');
    }
    
    function calcFine() {
        const age = parseFloat(document.getElementById('fine-age').value) || 0;
        const sex = document.querySelector('input[name="fine-sex"]:checked').value;
        let score = age;
        if (sex === 'F') score -= 10;
        document.querySelectorAll('#fine-list .check-opt.selected').forEach(el => { score += parseInt(el.dataset.pts); });
        document.getElementById('fine-val').textContent = score;
        document.getElementById('fine-result').classList.add('has-result');
        const interp = document.getElementById('fine-interp');
        if (score <= 70) { interp.textContent = '‚úì Classe I-II'; interp.className = 'result-interp show normal'; }
        else if (score <= 90) { interp.textContent = '‚ö† Classe III'; interp.className = 'result-interp show warning'; }
        else { interp.textContent = '‚õî Classe IV-V'; interp.className = 'result-interp show danger'; }
        addHistory('fine', 'Fine PSI', score, 'pts');
    }
    
    function calcChild() {
        const selects = document.querySelectorAll('#calc-child .child-select');
        let score = 0;
        selects.forEach(s => score += parseInt(s.value));
        document.getElementById('child-val').textContent = score;
        const interp = document.getElementById('child-interp');
        if (score <= 6) { interp.textContent = '‚úì Classe A'; interp.className = 'result-interp show normal'; }
        else if (score <= 9) { interp.textContent = '‚ö† Classe B'; interp.className = 'result-interp show warning'; }
        else { interp.textContent = '‚õî Classe C'; interp.className = 'result-interp show danger'; }
        addHistory('child', 'Child-Pugh', score, '/15');
    }
    
    function calcMELD() {
        const bili = parseFloat(document.getElementById('meld-bili').value);
        const inr = parseFloat(document.getElementById('meld-inr').value);
        const creat = parseFloat(document.getElementById('meld-creat').value);
        if (!bili || !inr || !creat) return;
        const biliMgdl = bili / 17.1;
        const creatMgdl = creat / 88.4;
        let meld = 10 * (0.957 * Math.log(Math.max(creatMgdl, 1)) + 0.378 * Math.log(Math.max(biliMgdl, 1)) + 1.12 * Math.log(Math.max(inr, 1)) + 0.643);
        meld = Math.round(meld);
        document.getElementById('meld-val').textContent = meld;
        document.getElementById('meld-result').classList.add('has-result');
        const interp = document.getElementById('meld-interp');
        if (meld < 10) { interp.textContent = '‚úì Mortalit√© <2%'; interp.className = 'result-interp show normal'; }
        else if (meld < 20) { interp.textContent = '‚ö† Mortalit√© 6%'; interp.className = 'result-interp show warning'; }
        else { interp.textContent = '‚õî Mortalit√© >20%'; interp.className = 'result-interp show danger'; }
        addHistory('meld', 'MELD', meld, '');
    }
    
    function calcGBS() {
        const selects = document.querySelectorAll('#calc-gbs .gbs-select');
        let score = 0;
        selects.forEach(s => score += parseInt(s.value));
        document.querySelectorAll('#gbs-list .check-opt.selected').forEach(el => { score += parseInt(el.dataset.pts); });
        document.getElementById('gbs-val').textContent = score;
        const interp = document.getElementById('gbs-interp');
        if (score === 0) { interp.textContent = '‚úì Sortie possible'; interp.className = 'result-interp show normal'; }
        else if (score <= 6) { interp.textContent = '‚ö† Risque mod√©r√©'; interp.className = 'result-interp show warning'; }
        else { interp.textContent = '‚õî FOGD urgente'; interp.className = 'result-interp show danger'; }
        addHistory('gbs', 'Glasgow-Blatchford', score, '/23');
    }
    
    function calcAlvarado() {
        let score = 0;
        document.querySelectorAll('#alvarado-list .check-opt.selected').forEach(el => { score += parseInt(el.dataset.pts); });
        document.getElementById('alvarado-val').textContent = score;
        const interp = document.getElementById('alvarado-interp');
        if (score <= 4) { interp.textContent = '‚úì Peu probable'; interp.className = 'result-interp show normal'; }
        else if (score <= 6) { interp.textContent = '‚ö† Possible'; interp.className = 'result-interp show warning'; }
        else { interp.textContent = '‚õî Probable'; interp.className = 'result-interp show danger'; }
        addHistory('alvarado', 'Alvarado', score, '/10');
    }
    
    function calcCanadian() {
        const selected = document.querySelectorAll('#canadian-list .check-opt.selected');
        const score = selected.length;
        document.getElementById('canadian-val').textContent = score;
        const interp = document.getElementById('canadian-interp');
        if (score === 0) { interp.textContent = '‚úì TDM non indiqu√©'; interp.className = 'result-interp show normal'; }
        else { interp.textContent = '‚õî TDM indiqu√©'; interp.className = 'result-interp show danger'; }
        addHistory('canadian', 'Canadian CT', score, '/7');
    }
    
    function calcSC() {
        const taille = parseFloat(document.getElementById('sc-taille').value);
        const poids = parseFloat(document.getElementById('sc-poids').value);
        if (!taille || !poids) return;
        const sc = Math.round(0.007184 * Math.pow(taille, 0.725) * Math.pow(poids, 0.425) * 100) / 100;
        document.getElementById('sc-val').textContent = sc;
        document.getElementById('sc-result').classList.add('has-result');
        document.getElementById('sc-interp').textContent = '‚úì Formule de Dubois';
        document.getElementById('sc-interp').className = 'result-interp show normal';
        addHistory('sc', 'Surface corporelle', sc, 'm¬≤');
    }
    
    function calcPoidsIdeal() {
        const taille = parseFloat(document.getElementById('poids-taille').value);
        const sex = document.querySelector('input[name="poids-sex"]:checked').value;
        if (!taille) return;
        let poids = sex === 'M' ? taille - 100 - ((taille - 150) / 4) : taille - 100 - ((taille - 150) / 2.5);
        poids = Math.round(poids * 10) / 10;
        document.getElementById('poids-val').textContent = poids;
        document.getElementById('poids-result').classList.add('has-result');
        document.getElementById('poids-interp').textContent = '‚úì Formule de Lorentz';
        document.getElementById('poids-interp').className = 'result-interp show normal';
        addHistory('poids', 'Poids id√©al', poids, 'kg');
    }
    
    function calcDose() {
        const poids = parseFloat(document.getElementById('dose-poids').value);
        const dose = parseFloat(document.getElementById('dose-dose').value);
        if (!poids || !dose) return;
        const total = Math.round(poids * dose * 10) / 10;
        document.getElementById('dose-val').textContent = total;
        document.getElementById('dose-result').classList.add('has-result');
        document.getElementById('dose-interp').textContent = `${dose} mg/kg √ó ${poids} kg`;
        document.getElementById('dose-interp').className = 'result-interp show normal';
        addHistory('dose', 'Dose/poids', total, 'mg');
    }
    
    function calcApgar() {
        const selects = document.querySelectorAll('#calc-apgar .apgar-select');
        let score = 0;
        selects.forEach(s => score += parseInt(s.value));
        document.getElementById('apgar-val').textContent = score;
        const interp = document.getElementById('apgar-interp');
        if (score >= 7) { interp.textContent = '‚úì Bonne adaptation'; interp.className = 'result-interp show normal'; }
        else if (score >= 4) { interp.textContent = '‚ö† D√©tresse mod√©r√©e'; interp.className = 'result-interp show warning'; }
        else { interp.textContent = '‚õî √âtat critique'; interp.className = 'result-interp show danger'; }
        addHistory('apgar', 'Apgar', score, '/10');
    }
    
    function calcSilverman() {
        const selects = document.querySelectorAll('#calc-silverman .silverman-select');
        let score = 0;
        selects.forEach(s => score += parseInt(s.value));
        document.getElementById('silverman-val').textContent = score;
        const interp = document.getElementById('silverman-interp');
        if (score <= 3) { interp.textContent = '‚úì D√©tresse l√©g√®re'; interp.className = 'result-interp show normal'; }
        else if (score <= 6) { interp.textContent = '‚ö† D√©tresse mod√©r√©e'; interp.className = 'result-interp show warning'; }
        else { interp.textContent = '‚õî D√©tresse s√©v√®re'; interp.className = 'result-interp show danger'; }
        addHistory('silverman', 'Silverman', score, '/10');
    }
    
    // ========== GERIATRIC CALCULATION FUNCTIONS ==========
    
    function calcADL() {
        const selected = document.querySelectorAll('#adl-list .check-opt.selected');
        const score = selected.length;
        document.getElementById('adl-val').textContent = score;
        document.getElementById('adl-result').classList.add('has-result');
        const interp = document.getElementById('adl-interp');
        if (score === 6) { interp.textContent = '‚úì Autonome'; interp.className = 'result-interp show normal'; }
        else if (score >= 4) { interp.textContent = '‚ö† D√©pendance l√©g√®re'; interp.className = 'result-interp show warning'; }
        else if (score >= 2) { interp.textContent = '‚ö† D√©pendance mod√©r√©e'; interp.className = 'result-interp show warning'; }
        else { interp.textContent = '‚õî D√©pendance s√©v√®re'; interp.className = 'result-interp show danger'; }
        addHistory('adl', 'ADL Katz', score, '/6');
    }
    
    function calcIADL() {
        const selected = document.querySelectorAll('#iadl-list .check-opt.selected');
        const score = selected.length;
        document.getElementById('iadl-val').textContent = score;
        document.getElementById('iadl-result').classList.add('has-result');
        const interp = document.getElementById('iadl-interp');
        if (score === 8) { interp.textContent = '‚úì Autonome'; interp.className = 'result-interp show normal'; }
        else if (score >= 5) { interp.textContent = '‚ö† D√©pendance l√©g√®re'; interp.className = 'result-interp show warning'; }
        else if (score >= 2) { interp.textContent = '‚ö† D√©pendance mod√©r√©e'; interp.className = 'result-interp show warning'; }
        else { interp.textContent = '‚õî D√©pendance s√©v√®re'; interp.className = 'result-interp show danger'; }
        addHistory('iadl', 'IADL Lawton', score, '/8');
    }
    
    function calcMNASF() {
        const selects = document.querySelectorAll('#calc-mnasf .mnasf-select');
        let score = 0;
        selects.forEach(s => score += parseFloat(s.value));
        document.getElementById('mnasf-val').textContent = score;
        document.getElementById('mnasf-result').classList.add('has-result');
        const interp = document.getElementById('mnasf-interp');
        if (score >= 12) { interp.textContent = '‚úì √âtat nutritionnel normal'; interp.className = 'result-interp show normal'; }
        else if (score >= 8) { interp.textContent = '‚ö† Risque de d√©nutrition'; interp.className = 'result-interp show warning'; }
        else { interp.textContent = '‚õî D√©nutrition av√©r√©e'; interp.className = 'result-interp show danger'; }
        addHistory('mnasf', 'MNA-SF', score, '/14');
    }
    
    function calcGDS15() {
        const selected = document.querySelectorAll('#gds15-list .check-opt.selected');
        const score = selected.length;
        document.getElementById('gds15-val').textContent = score;
        document.getElementById('gds15-result').classList.add('has-result');
        const interp = document.getElementById('gds15-interp');
        if (score <= 5) { interp.textContent = '‚úì Normal'; interp.className = 'result-interp show normal'; }
        else if (score <= 10) { interp.textContent = '‚ö† D√©pression l√©g√®re'; interp.className = 'result-interp show warning'; }
        else { interp.textContent = '‚õî D√©pression s√©v√®re'; interp.className = 'result-interp show danger'; }
        addHistory('gds15', 'GDS-15', score, '/15');
    }
    
    function calcGDS4() {
        const selected = document.querySelectorAll('#gds4-list .check-opt.selected');
        const score = selected.length;
        document.getElementById('gds4-val').textContent = score;
        document.getElementById('gds4-result').classList.add('has-result');
        const interp = document.getElementById('gds4-interp');
        if (score === 0) { interp.textContent = '‚úì Normal'; interp.className = 'result-interp show normal'; }
        else if (score === 1) { interp.textContent = '‚ö† Probable d√©pression'; interp.className = 'result-interp show warning'; }
        else { interp.textContent = '‚õî D√©pression tr√®s probable'; interp.className = 'result-interp show danger'; }
        addHistory('gds4', 'Mini-GDS', score, '/4');
    }
    
    function calcCharlson() {
        let score = 0;
        document.querySelectorAll('#charlson-list .check-opt.selected').forEach(el => {
            score += parseInt(el.dataset.pts);
        });
        document.getElementById('charlson-val').textContent = score;
        document.getElementById('charlson-result').classList.add('has-result');
        const interp = document.getElementById('charlson-interp');
        if (score === 0) { interp.textContent = '‚úì Survie 10 ans ~99%'; interp.className = 'result-interp show normal'; }
        else if (score <= 2) { interp.textContent = '‚ö† Survie 10 ans ~90%'; interp.className = 'result-interp show warning'; }
        else if (score <= 4) { interp.textContent = '‚ö† Survie 10 ans ~53%'; interp.className = 'result-interp show warning'; }
        else { interp.textContent = '‚õî Survie 10 ans <21%'; interp.className = 'result-interp show danger'; }
        addHistory('charlson', 'Charlson', score, 'pts');
    }
    
    function calcGetUpGo() {
        const time = parseFloat(document.getElementById('getupgo-time').value);
        if (!time) return;
        document.getElementById('getupgo-val').textContent = time;
        document.getElementById('getupgo-result').classList.add('has-result');
        const interp = document.getElementById('getupgo-interp');
        if (time < 10) { interp.textContent = '‚úì Normal - mobilit√© libre'; interp.className = 'result-interp show normal'; }
        else if (time < 20) { interp.textContent = '‚ö† Bonne mobilit√© - autonomie'; interp.className = 'result-interp show normal'; }
        else if (time < 30) { interp.textContent = '‚ö† Mobilit√© r√©duite - aide parfois'; interp.className = 'result-interp show warning'; }
        else { interp.textContent = '‚õî Risque chute √©lev√© - aide n√©cessaire'; interp.className = 'result-interp show danger'; }
        addHistory('getupgo', 'Get Up and Go', time, 'sec');
    }
    
    function calcBraden() {
        const selects = document.querySelectorAll('#calc-braden .braden-select');
        let score = 0;
        selects.forEach(s => score += parseInt(s.value));
        document.getElementById('braden-val').textContent = score;
        document.getElementById('braden-result').classList.add('has-result');
        const interp = document.getElementById('braden-interp');
        if (score >= 19) { interp.textContent = '‚úì Risque faible'; interp.className = 'result-interp show normal'; }
        else if (score >= 15) { interp.textContent = '‚ö† Risque mod√©r√©'; interp.className = 'result-interp show warning'; }
        else if (score >= 13) { interp.textContent = '‚ö† Risque √©lev√©'; interp.className = 'result-interp show warning'; }
        else { interp.textContent = '‚õî Risque tr√®s √©lev√©'; interp.className = 'result-interp show danger'; }
        addHistory('braden', 'Braden', score, '/23');
    }
    
    function calcG8() {
        const selects = document.querySelectorAll('#calc-g8 .g8-select');
        let score = 0;
        selects.forEach(s => score += parseFloat(s.value));
        document.getElementById('g8-val').textContent = score;
        document.getElementById('g8-result').classList.add('has-result');
        const interp = document.getElementById('g8-interp');
        if (score > 14) { interp.textContent = '‚úì Pas de fragilit√© d√©tect√©e'; interp.className = 'result-interp show normal'; }
        else { interp.textContent = '‚õî EGS recommand√©e'; interp.className = 'result-interp show danger'; }
        addHistory('g8', 'G8', score, '/17');
    }
    
    function calcCAM() {
        const selected = document.querySelectorAll('#cam-list .check-opt.selected');
        const crits = Array.from(selected).map(el => parseInt(el.dataset.crit));
        const has1 = crits.includes(1);
        const has2 = crits.includes(2);
        const has3 = crits.includes(3);
        const has4 = crits.includes(4);
        const positive = has1 && has2 && (has3 || has4);
        document.getElementById('cam-val').textContent = positive ? 'POSITIF' : 'N√©gatif';
        document.getElementById('cam-result').classList.add('has-result');
        const interp = document.getElementById('cam-interp');
        if (positive) { interp.textContent = '‚õî DELIRIUM - Crit√®res 1+2+(3ou4)'; interp.className = 'result-interp show danger'; }
        else { interp.textContent = '‚úì CAM n√©gatif'; interp.className = 'result-interp show normal'; }
        addHistory('cam', 'CAM', positive ? 'Positif' : 'N√©gatif', '');
    }
    
    function calcFried() {
        const selected = document.querySelectorAll('#fried-list .check-opt.selected');
        const score = selected.length;
        document.getElementById('fried-val').textContent = score;
        document.getElementById('fried-result').classList.add('has-result');
        const interp = document.getElementById('fried-interp');
        if (score === 0) { interp.textContent = '‚úì Robuste'; interp.className = 'result-interp show normal'; }
        else if (score <= 2) { interp.textContent = '‚ö† Pr√©-fragile'; interp.className = 'result-interp show warning'; }
        else { interp.textContent = '‚õî Fragile'; interp.className = 'result-interp show danger'; }
        addHistory('fried', 'Fried', score, '/5');
    }
    
    function calcMMSE() {
        const score = parseInt(document.getElementById('mmse-score').value);
        if (isNaN(score)) return;
        document.getElementById('mmse-val').textContent = score;
        document.getElementById('mmse-result').classList.add('has-result');
        const interp = document.getElementById('mmse-interp');
        if (score >= 27) { interp.textContent = '‚úì Normal'; interp.className = 'result-interp show normal'; }
        else if (score >= 24) { interp.textContent = '‚ö† Trouble l√©ger'; interp.className = 'result-interp show warning'; }
        else if (score >= 19) { interp.textContent = '‚ö† Trouble mod√©r√©'; interp.className = 'result-interp show warning'; }
        else if (score >= 10) { interp.textContent = '‚õî Trouble s√©v√®re'; interp.className = 'result-interp show danger'; }
        else { interp.textContent = '‚õî Trouble tr√®s s√©v√®re'; interp.className = 'result-interp show danger'; }
        addHistory('mmse', 'MMSE', score, '/30');
    }
    
    function calcHorloge() {
        const score = parseInt(document.getElementById('horloge-score').value);
        if (isNaN(score)) return;
        document.getElementById('horloge-val').textContent = score;
        document.getElementById('horloge-result').classList.add('has-result');
        const interp = document.getElementById('horloge-interp');
        if (score >= 4) { interp.textContent = '‚úì Normal'; interp.className = 'result-interp show normal'; }
        else if (score >= 3) { interp.textContent = '‚ö† Trouble possible'; interp.className = 'result-interp show warning'; }
        else { interp.textContent = '‚õî Trouble cognitif probable'; interp.className = 'result-interp show danger'; }
        addHistory('horloge', 'Test Horloge', score, '/5');
    }
    
    function calcTinetti() {
        const eq = parseInt(document.getElementById('tinetti-eq').value) || 0;
        const ma = parseInt(document.getElementById('tinetti-ma').value) || 0;
        const score = eq + ma;
        document.getElementById('tinetti-val').textContent = score;
        document.getElementById('tinetti-result').classList.add('has-result');
        const interp = document.getElementById('tinetti-interp');
        if (score >= 24) { interp.textContent = '‚úì Faible risque de chute'; interp.className = 'result-interp show normal'; }
        else if (score >= 19) { interp.textContent = '‚ö† Risque mod√©r√© de chute'; interp.className = 'result-interp show warning'; }
        else { interp.textContent = '‚õî Risque √©lev√© de chute'; interp.className = 'result-interp show danger'; }
        addHistory('tinetti', 'Tinetti', score, '/28');
    }
    
    function calcNorton() {
        const selects = document.querySelectorAll('#calc-norton .norton-select');
        let score = 0;
        selects.forEach(s => score += parseInt(s.value));
        document.getElementById('norton-val').textContent = score;
        document.getElementById('norton-result').classList.add('has-result');
        const interp = document.getElementById('norton-interp');
        if (score >= 14) { interp.textContent = '‚úì Risque faible'; interp.className = 'result-interp show normal'; }
        else if (score >= 12) { interp.textContent = '‚ö† Risque mod√©r√©'; interp.className = 'result-interp show warning'; }
        else { interp.textContent = '‚õî Risque √©lev√©'; interp.className = 'result-interp show danger'; }
        addHistory('norton', 'Norton', score, '/20');
    }
    
    function calcSPPB() {
        const selects = document.querySelectorAll('#calc-sppb .sppb-select');
        let score = 0;
        selects.forEach(s => score += parseInt(s.value));
        document.getElementById('sppb-val').textContent = score;
        document.getElementById('sppb-result').classList.add('has-result');
        const interp = document.getElementById('sppb-interp');
        if (score >= 10) { interp.textContent = '‚úì Performance normale'; interp.className = 'result-interp show normal'; }
        else if (score >= 7) { interp.textContent = '‚ö† Performance r√©duite'; interp.className = 'result-interp show warning'; }
        else { interp.textContent = '‚õî Performance tr√®s r√©duite'; interp.className = 'result-interp show danger'; }
        addHistory('sppb', 'SPPB', score, '/12');
    }
    
    function calcZarit() {
        const selected = document.querySelectorAll('#zarit-list .check-opt.selected');
        const score = selected.length;
        document.getElementById('zarit-val').textContent = score;
        document.getElementById('zarit-result').classList.add('has-result');
        const interp = document.getElementById('zarit-interp');
        if (score <= 1) { interp.textContent = '‚úì Pas d\'√©puisement'; interp.className = 'result-interp show normal'; }
        else if (score <= 3) { interp.textContent = '‚ö† Fardeau mod√©r√©'; interp.className = 'result-interp show warning'; }
        else { interp.textContent = '‚õî √âpuisement - soutien n√©cessaire'; interp.className = 'result-interp show danger'; }
        addHistory('zarit', 'Mini-Zarit', score, '/6');
    }
    
    function calcAGGIR() {
        const adl = parseInt(document.getElementById('aggir-adl').value) || 0;
        const iadl = parseInt(document.getElementById('aggir-iadl').value) || 0;
        let gir = '';
        const total = adl + iadl;
        if (adl === 6 && iadl >= 7) gir = 'GIR 6';
        else if (adl >= 5 && iadl >= 5) gir = 'GIR 5';
        else if (adl >= 3 && iadl >= 3) gir = 'GIR 4';
        else if (adl >= 2) gir = 'GIR 3';
        else if (adl >= 1) gir = 'GIR 2';
        else gir = 'GIR 1';
        document.getElementById('aggir-val').textContent = gir;
        document.getElementById('aggir-result').classList.add('has-result');
        const interp = document.getElementById('aggir-interp');
        if (gir === 'GIR 6' || gir === 'GIR 5') { interp.textContent = '‚úì Autonome - pas d\'APA'; interp.className = 'result-interp show normal'; }
        else if (gir === 'GIR 4') { interp.textContent = '‚ö† APA possible'; interp.className = 'result-interp show warning'; }
        else { interp.textContent = '‚õî D√©pendant - APA √©ligible'; interp.className = 'result-interp show danger'; }
        addHistory('aggir', 'AGGIR', gir, '');
    }
    
    // ========== MEDCHAT FUNCTIONS ==========
    const CLAUDE_API_KEY = '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';
    
    const SYSTEM_PROMPT = `Tu es un assistant clinique sp√©cialis√© en G√âRIATRIE, int√©gr√© dans l'application MedApp Pro utilis√©e par des m√©decins et soignants.

DOMAINE D'EXPERTISE :
- Syndromes g√©riatriques : d√©lirium, chutes, d√©nutrition, fragilit√©, incontinence
- Scores cliniques : CHA‚ÇÇDS‚ÇÇ-VASc, HAS-BLED, Cockcroft-Gault, CKD-EPI, Glasgow, qSOFA, SOFA, etc.
- Guidelines : HAS, SFGG, SPILF, crit√®res STOPP-START
- Pharmacologie du sujet √¢g√© : adaptation posologique, d√©prescription, interactions
- Crit√®res diagnostiques : Fried (fragilit√©), CAM (d√©lirium), MNA (d√©nutrition), EWGSOP2 (sarcop√©nie)

R√àGLES DE R√âPONSE :
1. R√©ponds de mani√®re CONCISE et STRUCTUR√âE (listes √† puces si pertinent)
2. Cite tes sources (HAS 2021, SFGG, STOPP-START v3, etc.) quand applicable
3. Utilise la terminologie m√©dicale appropri√©e
4. Si une question sort du domaine m√©dical, refuse poliment et recentre sur la m√©decine
5. Rappelle toujours que tu ne remplaces pas le jugement clinique quand c'est pertinent
6. Pour les posologies, pr√©cise toujours d'adapter √† la fonction r√©nale chez le sujet √¢g√©

FORMAT :
- Utilise le markdown l√©ger (gras avec **, listes avec -)
- Sois direct, √©vite les phrases de remplissage
- Privil√©gie les tableaux pour les comparaisons
- Maximum 300 mots sauf si la question n√©cessite plus de d√©tails`;

    let chatHistory = [];
    let isWaitingResponse = false;
    
    function handleChatKeydown(event) {
        if (event.key === 'Enter' && !event.shiftKey) {
            event.preventDefault();
            sendMessage();
        }
    }
    
    function askSuggestion(question) {
        document.getElementById('chatInput').value = question;
        sendMessage();
    }
    
    async function sendMessage() {
        const input = document.getElementById('chatInput');
        const message = input.value.trim();
        
        if (!message || isWaitingResponse) return;
        
        // Hide suggestions after first message
        document.getElementById('chatSuggestions').style.display = 'none';
        
        // Add user message to UI
        addMessageToUI('user', message);
        input.value = '';
        
        // Add to history
        chatHistory.push({ role: 'user', content: message });
        
        // Show typing indicator
        isWaitingResponse = true;
        const typingId = showTypingIndicator();
        document.getElementById('chatSendBtn').disabled = true;
        
        try {
            const response = await fetch('https://api.anthropic.com/v1/messages', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'x-api-key': CLAUDE_API_KEY,
                    'anthropic-version': '2023-06-01',
                    'anthropic-dangerous-direct-browser-access': 'true'
                },
                body: JSON.stringify({
                    model: 'claude-sonnet-4-20250514',
                    max_tokens: 1024,
                    system: SYSTEM_PROMPT,
                    messages: chatHistory
                })
            });
            
            if (!response.ok) {
                const errorData = await response.json();
                throw new Error(errorData.error?.message || 'Erreur API');
            }
            
            const data = await response.json();
            const assistantMessage = data.content[0].text;
            
            // Remove typing indicator
            removeTypingIndicator(typingId);
            
            // Add assistant message to UI
            addMessageToUI('assistant', assistantMessage);
            
            // Add to history
            chatHistory.push({ role: 'assistant', content: assistantMessage });
            
        } catch (error) {
            removeTypingIndicator(typingId);
            showChatError(error.message);
            console.error('Chat error:', error);
        } finally {
            isWaitingResponse = false;
            document.getElementById('chatSendBtn').disabled = false;
        }
    }
    
    function addMessageToUI(role, content) {
        const messagesDiv = document.getElementById('chatMessages');
        const messageDiv = document.createElement('div');
        messageDiv.className = `chat-message ${role}`;
        
        const avatar = role === 'user' ? getUserInitials() : 'ü§ñ';
        
        // Convert markdown to HTML
        let htmlContent = content
            .replace(/^### (.*$)/gm, '<strong style="display:block;margin:12px 0 6px;color:var(--primary);">$1</strong>')
            .replace(/^## (.*$)/gm, '<strong style="display:block;margin:12px 0 6px;color:var(--primary);font-size:15px;">$1</strong>')
            .replace(/^# (.*$)/gm, '<strong style="display:block;margin:12px 0 6px;color:var(--primary);font-size:16px;">$1</strong>')
            .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
            .replace(/\n\n/g, '</p><p>')
            .replace(/\n- /g, '<br>‚Ä¢ ')
            .replace(/\n/g, ' ');
        
        // Wrap in paragraph if needed
        if (!htmlContent.startsWith('<p>') && !htmlContent.startsWith('<strong')) {
            htmlContent = '<p>' + htmlContent + '</p>';
        }
        
        messageDiv.innerHTML = `
            <div class="chat-avatar">${avatar}</div>
            <div class="chat-bubble">${htmlContent}</div>
        `;
        
        messagesDiv.appendChild(messageDiv);
        messagesDiv.scrollTop = messagesDiv.scrollHeight;
    }
    
    function getUserInitials() {
        const name = userSettings.name.replace('Dr. ', '');
        const parts = name.split(' ');
        return parts.map(p => p[0]).join('').substring(0, 2).toUpperCase();
    }
    
    function showTypingIndicator() {
        const messagesDiv = document.getElementById('chatMessages');
        const typingDiv = document.createElement('div');
        typingDiv.className = 'chat-message assistant';
        typingDiv.id = 'typing-indicator';
        typingDiv.innerHTML = `
            <div class="chat-avatar">ü§ñ</div>
            <div class="chat-bubble">
                <div class="chat-typing">
                    <div class="chat-typing-dot"></div>
                    <div class="chat-typing-dot"></div>
                    <div class="chat-typing-dot"></div>
                </div>
            </div>
        `;
        messagesDiv.appendChild(typingDiv);
        messagesDiv.scrollTop = messagesDiv.scrollHeight;
        return 'typing-indicator';
    }
    
    function removeTypingIndicator(id) {
        const typing = document.getElementById(id);
        if (typing) typing.remove();
    }
    
    function showChatError(message) {
        const messagesDiv = document.getElementById('chatMessages');
        const errorDiv = document.createElement('div');
        errorDiv.className = 'chat-error';
        errorDiv.innerHTML = `‚ö†Ô∏è Erreur : ${message}. Veuillez r√©essayer.`;
        messagesDiv.appendChild(errorDiv);
        messagesDiv.scrollTop = messagesDiv.scrollHeight;
    }
    
    // ========== INIT ==========
    document.addEventListener('DOMContentLoaded', function() {
        // Load user settings and language
        updateUserDisplay();
        setLanguage(currentLang);
        
        renderFavorites();
        renderCalcList();
        renderHistory();
        setupTabs();
        setupNav();
        
        document.getElementById('searchInput').addEventListener('input', function() {
            handleSearch(this.value);
        });
        
        document.addEventListener('click', function(e) {
            if (!e.target.closest('.search-container')) {
                closeSearch();
            }
            if (!e.target.closest('.lang-selector')) {
                document.getElementById('langDropdown').classList.remove('show');
            }
        });
        
        // Close modal on outside click
        document.getElementById('settingsModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeSettingsModal();
            }
        });
        
        // Initialize theme from localStorage
        if (localStorage.getItem('medapp-theme') === 'dark') {
            document.documentElement.setAttribute('data-theme', 'dark');
            document.querySelector('.theme-toggle').textContent = '‚òÄÔ∏è';
        }
    });
    
    // Theme toggle function
    function toggleTheme() {
        const html = document.documentElement;
        const btn = document.querySelector('.theme-toggle');
        if (html.getAttribute('data-theme') === 'dark') {
            html.removeAttribute('data-theme');
            btn.textContent = 'üåô';
            localStorage.setItem('medapp-theme', 'light');
        } else {
            html.setAttribute('data-theme', 'dark');
            btn.textContent = '‚òÄÔ∏è';
            localStorage.setItem('medapp-theme', 'dark');
        }
    }
    
    // Service Worker for offline support (PWA)
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
            // Create inline service worker for offline caching
            const swCode = `
                const CACHE_NAME = 'medapp-v9-cache';
                const urlsToCache = ['/'];
                
                self.addEventListener('install', event => {
                    event.waitUntil(
                        caches.open(CACHE_NAME).then(cache => cache.addAll(urlsToCache))
                    );
                });
                
                self.addEventListener('fetch', event => {
                    event.respondWith(
                        caches.match(event.request).then(response => {
                            return response || fetch(event.request).then(fetchResponse => {
                                return caches.open(CACHE_NAME).then(cache => {
                                    if (event.request.url.startsWith('http')) {
                                        cache.put(event.request, fetchResponse.clone());
                                    }
                                    return fetchResponse;
                                });
                            });
                        }).catch(() => caches.match('/'))
                    );
                });
            `;
            const blob = new Blob([swCode], {type: 'application/javascript'});
            const swUrl = URL.createObjectURL(blob);
            navigator.serviceWorker.register(swUrl).catch(() => {});
        });
    }
    
    // ========== THEME TOGGLE ==========
    function toggleTheme() {
        const html = document.documentElement;
        const currentTheme = html.getAttribute('data-theme');
        const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
        html.setAttribute('data-theme', newTheme);
        localStorage.setItem('medapp-theme', newTheme);
        const btn = document.querySelector('.theme-toggle');
        btn.textContent = newTheme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
        document.querySelector('meta[name="theme-color"]').content = newTheme === 'dark' ? '#0F172A' : '#2563EB';
    }
    
    // Initialize theme on load
    (function initTheme() {
        const saved = localStorage.getItem('medapp-theme');
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        const theme = saved || (prefersDark ? 'dark' : 'light');
        if (theme === 'dark') {
            document.documentElement.setAttribute('data-theme', 'dark');
            const btn = document.querySelector('.theme-toggle');
            if (btn) btn.textContent = '‚òÄÔ∏è';
            const meta = document.querySelector('meta[name="theme-color"]');
            if (meta) meta.content = '#0F172A';
        }
    })();
    
    // ========== PWA INSTALL ==========
    let deferredPrompt = null;
    
    window.addEventListener('beforeinstallprompt', (e) => {
        e.preventDefault();
        deferredPrompt = e;
        // Show install banner after 3 seconds
        setTimeout(() => {
            const banner = document.getElementById('installBanner');
            if (banner && !localStorage.getItem('pwa-dismissed')) {
                banner.classList.add('show');
            }
        }, 3000);
    });
    
    function installPWA() {
        if (deferredPrompt) {
            deferredPrompt.prompt();
            deferredPrompt.userChoice.then(choice => {
                if (choice.outcome === 'accepted') {
                    console.log('PWA installed');
                }
                deferredPrompt = null;
                closeInstallBanner();
            });
        }
    }
    
    function closeInstallBanner() {
        const banner = document.getElementById('installBanner');
        if (banner) {
            banner.classList.remove('show');
            localStorage.setItem('pwa-dismissed', 'true');
        }
    }
    </script>
    
    <div class="install-banner" id="installBanner">
        <div class="install-banner-text">
            <div class="install-banner-title">üì≤ Installer MedApp Pro</div>
            <div class="install-banner-desc">Acc√®s rapide, mode hors-ligne</div>
        </div>
        <button class="install-banner-btn" onclick="installPWA()">Installer</button>
        <button class="install-banner-close" onclick="closeInstallBanner()">√ó</button>
    </div>


    <!-- Supabase Auth ‚Äî Scripts d'authentification -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js"></script>
    <script src="../js/supabase-config.js"></script>
    <script src="../js/auth-guard.js"></script>
</body></html>